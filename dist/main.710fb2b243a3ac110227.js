(self.webpackChunkreact_ssr=self.webpackChunkreact_ssr||[]).push([[179],{5152:(e,t,n)=>{var r=n(8433).Auth,a=n(9546).Reg,o=n(3498).ListOrders,i=n(1401).MapOrders,l=n(3543).Price,s=n(8868).Graph,c=n(9658).Settings;e.exports=[{path:"/",exact:!0,component:o,title:"Список заказов",code:200},{path:"/auth",exact:!0,component:r,title:"Авторизация",code:200},{path:"/registration",exact:!0,component:a,title:"Регистрация",code:200},{path:"/list_orders",exact:!0,component:o,title:"Список заказов",code:200},{path:"/map_orders",exact:!0,component:i,title:"Карта заказов",code:200},{path:"/price",exact:!0,component:l,title:"Расчет",code:200},{path:"/graph",exact:!0,component:s,title:"График работы",code:200},{path:"/settings",exact:!0,component:c,title:"Настройки",code:200}]},8433:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Auth:()=>P});var r=n(5861),a=n(5671),o=n(3144),i=n(7326),l=n(136),s=n(6215),c=n(1120),d=n(4942),p=n(7757),u=n.n(p),h=n(7294),m=n(5977),f=n(7109),g=n(1095),y=n(5725),E=n(2642),w=n(225),Z=n(4345),x=n(4666),v=n(8979),k=n(7750),b=n(6408),_=n(7645),S=n(821),C=n(9062);var O=n(7563),T=(0,Z.Z)({palette:{primary:{main:"#c03"}}}),D=(0,w.Z)({paper:{display:"flex",flexDirection:"column",alignItems:"center"},avatar:{borderRadius:0,width:"100%",height:150,margin:0,backgroundColor:"#fff"},avatar2:{borderRadius:0,width:"100%",height:130,margin:0,backgroundColor:"#fff"},form:{width:"100%",marginTop:T.spacing(1)},submit:{margin:T.spacing(3,0,2)},textLink:{color:"#c03"}}),I=function(e){(0,l.Z)(T,e);var t,n,p,m,w,Z=(m=T,w=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(m);if(w){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,s.Z)(this,e)});function T(e){var t;return(0,a.Z)(this,T),t=Z.call(this,e),(0,d.Z)((0,i.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/site/driver.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:O.stringify({type:e,data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){return setTimeout((function(){t.setState({is_load:!1})}),300),e})).catch((function(e){alert("Плохая связь с интернетом или ошибка на сервере"),console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"auth",module_name:"",is_load:!1,modalDialog:!1,dialogTitle:"",dialogText:""},t}return(0,o.Z)(T,[{key:"componentDidMount",value:(p=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"http:"!=window.location.protocol&&"http"!=window.location.protocol||"localhost"==window.location.hostname||(console.log("goTo","https://jacodriver.ru/"+window.location.pathname),window.location.href="https://jacodriver.ru/"+window.location.pathname);case 1:case"end":return e.stop()}}),e)}))),function(){return p.apply(this,arguments)})},{key:"updateData",value:(n=(0,r.Z)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point_id:this.state.point,showReady:!0===this.state.showReady?1:0},e.next=3,this.getData("get_orders",t);case 3:n=e.sent,this.setState({read:n.read,onstol:n.onstol,ordersQueue:n.prestol_new});case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"auth",value:(t=(0,r.Z)(u().mark((function e(){var t,n,r=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={login:document.getElementById("phone").value,pwd:document.getElementById("password").value},e.next=3,this.getData("auth",t);case 3:!1===(n=e.sent).st?setTimeout((function(){r.setState({modalDialog:!0,dialogTitle:"Предупреждение",dialogText:n.text})}),500):(localStorage.setItem("token",n.token),setTimeout((function(){window.location.pathname="/list_orders"}),300));case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(S.Z,{className:this.state.classes.backdrop,open:this.state.is_load},h.createElement(C.Z,{color:"inherit"})),h.createElement(x.Z,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(_.Z,{id:"alert-dialog-title"},this.state.dialogTitle),h.createElement(k.Z,null,h.createElement(b.Z,{id:"alert-dialog-description"},this.state.dialogText)),h.createElement(v.Z,null,h.createElement(E.Z,{onClick:function(){e.setState({modalDialog:!1})},color:"primary",autoFocus:!0},"Хорошо"))),h.createElement(y.ZP,{container:!0,spacing:3,direction:"row",justifyContent:"center",alignItems:"center"},h.createElement(y.ZP,{item:!0,xs:12,sm:6,md:6,lg:4,xl:3},h.createElement("div",{className:this.state.classes.paper},h.createElement(f.Z,{className:this.state.classes.avatar},h.createElement("img",{alt:"Жако доставка роллов и пиццы",src:"../assets/img_other/Favikon.png",style:{height:"100%"}})),h.createElement("form",{className:this.state.classes.form,noValidate:!0},h.createElement(g.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,id:"phone",label:"Номер телефона",name:"phone",autoComplete:"phone",autoFocus:!0}),h.createElement(g.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,name:"password",label:"Пароль",type:"password",id:"password",autoComplete:"current-password"}),h.createElement(E.Z,{fullWidth:!0,variant:"contained",color:"primary",className:this.state.classes.submit,onClick:this.auth.bind(this)},"Войти"),h.createElement(y.ZP,{container:!0,style:{marginTop:10}},h.createElement(y.ZP,{item:!0,xs:!0},h.createElement("a",{href:"/registration",className:this.state.classes.textLink},"Восстановить пароль"))))))))}}]),T}(h.Component);function P(){var e=D(),t=(0,m.k6)();return h.createElement(I,{classes:e,history:t})}},8868:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Graph:()=>B});var r=n(5861),a=n(5671),o=n(3144),i=n(7326),l=n(136),s=n(6215),c=n(1120),d=n(4942),p=n(7757),u=n.n(p),h=n(7294),m=n(5977),f=n(225),g=n(4345),y=n(5725),E=n(821),w=n(9062),Z=n(2642),x=n(2318),v=n(6501),k=n(9573),b=n(8732),_=n(6926),S=n(7896),C=n(6011),O=n(3694),T=n(4666),D=n(8979),I=n(7750),P=n(2658),R=n(7042);var W=n(7563),N=(0,g.Z)({palette:{primary:{main:"#c03"}}}),z=(0,f.Z)({formControl:{width:"100%"},selectEmpty:{marginTop:N.spacing(2)},tableCel:{textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},tableCelHead:{textAlign:"center",padding:15},customCel:{backgroundColor:"#bababa",textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},timePicker:{width:"100%"}}),j=function(e){(0,l.Z)(z,e);var t,n,p,m,f,g,N=(f=z,g=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(f);if(g){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,s.Z)(this,e)});function z(e){var t;return(0,a.Z)(this,z),t=N.call(this,e),(0,d.Z)((0,i.Z)(t),"getData",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("https://jacochef.ru/api/site/driver.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:W.stringify({type:e,data:JSON.stringify(t)})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){alert("Плохая связь с интернетом или ошибка на сервере"),console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,thisDate:"",is_load:!1,data:[],dates:[],mounth:[],thisMounth:"",errs:{orders:[],err_cum:[]},showErrOrders:!1,isOpen:!1,showErrOrder:null,showErrOrderCum:null,textErr1:"",textErr2:""},t}return(0,o.Z)(z,[{key:"componentDidMount",value:(m=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"http:"!=window.location.protocol&&"http"!=window.location.protocol||"localhost"==window.location.hostname||(console.log("goTo","https://jacodriver.ru/"+window.location.pathname),window.location.href="https://jacodriver.ru/"+window.location.pathname),this.getGraph();case 2:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"getGraph",value:(p=(0,r.Z)(u().mark((function e(){var t,n,r,a,o,i=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return""==(t=i.length>0&&void 0!==i[0]?i[0]:"")&&(n=new Date,r=n.getFullYear()+"-",r+=n.getMonth()+1,t=r),a={token:localStorage.getItem("token"),date:t},e.next=5,this.getData("getMyGraph",a);case 5:o=e.sent,this.setState({data:o.users,dates:o.all_dates,mounth:o.mounth,thisMounth:o.mounth.find((function(e){return e.day==t})).mounth,isOpen:!1,thisDate:t,errs:o.errs});case 7:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"false_err",value:(n=(0,r.Z)(u().mark((function e(t){var n,r,a=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.click||(this.click=!0),e.next=3,AsyncStorage.getItem("token");case 3:return e.t0=e.sent,e.t1=this.state.textErr1,e.t2=t.id,e.t3=t.row_id,n={token:e.t0,text:e.t1,err_id:e.t2,row_id:e.t3},e.next=10,this.getData("save_false_cash_orders",n);case 10:0==(r=e.sent).st?alert(r.text):(this.setState({showErrOrders:!1,showErrOrder:null,showErrOrderCum:null}),this.getGraph(this.state.thisDate)),setTimeout((function(){a.click=!1}),300);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"false_err_1",value:(t=(0,r.Z)(u().mark((function e(t){var n,r,a=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.click||(this.click=!0),e.next=3,AsyncStorage.getItem("token");case 3:return e.t0=e.sent,e.t1=this.state.textErr2,e.t2=t.id,n={token:e.t0,text:e.t1,id:e.t2},e.next=9,this.getData("save_false_cash_cum",n);case 9:0==(r=e.sent).st?alert(r.text):(this.setState({showErrOrders:!1,showErrOrder:null,showErrOrderCum:null}),this.getGraph(this.state.thisDate)),setTimeout((function(){a.click=!1}),300);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(E.Z,{open:this.state.is_load},h.createElement(w.Z,{color:"inherit"})),h.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}},h.createElement(Z.Z,{onClick:function(){e.setState({isOpen:!0})}},this.state.thisMounth)),h.createElement(T.Z,{open:this.state.showErrOrders,onClose:function(){e.setState({showErrOrders:!1,showErrOrder:null,showErrOrderCum:null})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(I.Z,null,this.state.showErrOrder?h.createElement(h.Fragment,null,h.createElement(P.Z,{style:{color:"#000",fontSize:15}},"Ошибка по заказу №",this.state.showErrOrder.order_id),h.createElement("div",{style:{display:"flex",flexDirection:"row",width:"auto",height:"auto",flexWrap:"wrap",flexShrink:1,paddingTop:20}},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Дата заказа: "),h.createElement(P.Z,{style:{fontSize:15,color:"#000"}},this.state.showErrOrder.date_time_order)),h.createElement("div",{style:{display:"flex",flexDirection:"row",width:"auto",height:"auto",flexWrap:"wrap",flexShrink:1,paddingTop:20}},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Ошибка заказа: "),h.createElement(P.Z,{style:{fontSize:15,color:"#000"}},this.state.showErrOrder.order_desc)),h.createElement("div",{style:{display:"flex",flexDirection:"row",width:"auto",height:"auto",flexWrap:"wrap",flexShrink:1,paddingTop:20}},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Позиция: "),h.createElement(P.Z,{style:{fontSize:15,color:"#000"}},this.state.showErrOrder.item_name)),h.createElement("div",{style:{display:"flex",flexDirection:"row",width:"auto",height:"auto",flexWrap:"wrap",flexShrink:1,paddingTop:20}},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Ошибка: "),h.createElement(P.Z,{style:{fontSize:15,color:"#000"}},this.state.showErrOrder.pr_name)),h.createElement("div",{style:{display:"flex",flexDirection:"row",width:"auto",height:"auto",flexWrap:"wrap",flexShrink:1,paddingTop:20}},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Сумма: "),h.createElement(P.Z,{style:{fontSize:15,color:"#000"}},this.state.showErrOrder.my_price)),0==this.state.showErrOrder.imgs.length?null:h.createElement("div",{style:{display:"flex",flexDirection:"row",width:"auto",height:"auto",flexWrap:"wrap",flexShrink:1,paddingTop:20}},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Фото")),this.state.showErrOrder.imgs.map((function(e,t){return h.createElement("img",{key:t,style:{width:"100%",height:"auto"},src:"https://jacochef.ru/src/img/err_orders/uploads/"+e})})),this.state.showErrOrder.new_text_1&&0!=this.state.showErrOrder.new_text_1.length?h.createElement("div",{style:{display:"flex",flexDirection:"row",width:"auto",height:"auto",flexWrap:"wrap",flexShrink:1,paddingTop:20}},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Причина обжалования:"),h.createElement(P.Z,{style:{fontSize:15,color:"#000"}},this.state.showErrOrder.new_text_1)):0==parseInt(this.state.showErrOrder.is_edit)?null:h.createElement("div",{style:{display:"flex",flexDirection:"row",width:"auto",height:"auto",flexWrap:"wrap",flexShrink:1,paddingTop:20}},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Причина обжалования:"),h.createElement(R.Z,{style:{width:"100%",minHeight:50},value:this.state.textErr1,onChange:function(t){e.setState({textErr1:t.target.value})}}),h.createElement(Z.Z,{onClick:this.false_err.bind(this,this.state.showErrOrder),style:{color:"#fff",marginTop:10,width:"100%",backgroundColor:"#c03"}},"Обжаловать")),this.state.showErrOrder.new_text_2&&0!=this.state.showErrOrder.new_text_2.length?h.createElement("div",{style:{display:"flex",flexDirection:"row",width:"auto",height:"auto",flexWrap:"wrap",flexShrink:1,paddingTop:20}},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Ответ обжалования:"),h.createElement(P.Z,{style:{fontSize:15,color:"#000"}},this.state.showErrOrder.new_text_2)):null):null,this.state.showErrOrderCum?h.createElement(h.Fragment,null,h.createElement(P.Z,{style:{color:"#000",fontSize:15}},"Ошибка №",this.state.showErrOrderCum.id),h.createElement("div",{style:{display:"flex",flexDirection:"row",width:"auto",height:"auto",flexWrap:"wrap",flexShrink:1,paddingTop:20}},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Дата время ошибки: "),h.createElement(P.Z,{style:{fontSize:15,color:"#000"}},this.state.showErrOrderCum.date_time_fine)),h.createElement("div",{style:{display:"flex",flexDirection:"row",width:"auto",height:"auto",flexWrap:"wrap",flexShrink:1,paddingTop:20}},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Ошибка: "),h.createElement(P.Z,{style:{fontSize:15,color:"#000"}},this.state.showErrOrderCum.fine_name)),h.createElement("div",{style:{display:"flex",flexDirection:"row",width:"auto",height:"auto",flexWrap:"wrap",flexShrink:1,paddingTop:20}},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Сумма: "),h.createElement(P.Z,{style:{fontSize:15,color:"#000"}},this.state.showErrOrderCum.price)),0==this.state.showErrOrderCum.imgs.length?null:h.createElement("div",{style:{display:"flex",flexDirection:"row",width:"auto",height:"auto",flexWrap:"wrap",flexShrink:1,paddingTop:20}},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Фото")),this.state.showErrOrderCum.imgs.map((function(e,t){return h.createElement("img",{key:t,style:{width:"100%",height:"auto"},src:"https://jacochef.ru/src/img/fine_err/uploads/"+e})})),this.state.showErrOrderCum.text_one&&0!=this.state.showErrOrderCum.text_one.length?h.createElement("div",{style:{display:"flex",flexDirection:"row",width:"auto",height:"auto",flexWrap:"wrap",flexShrink:1,paddingTop:20}},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Причина обжалования:"),h.createElement(P.Z,{style:{fontSize:15,color:"#000"}},this.state.showErrOrderCum.text_one)):0==parseInt(this.state.showErrOrderCum.is_edit)?null:h.createElement("div",{style:{display:"flex",flexDirection:"row",width:"auto",height:"auto",flexWrap:"wrap",flexShrink:1,paddingTop:20}},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Причина обжалования:"),h.createElement(R.Z,{style:{width:"100%",minHeight:50},value:this.state.textErr2,onChange:function(t){e.setState({textErr2:t.target.value})}}),h.createElement(Z.Z,{onClick:this.false_err_1.bind(this,this.state.showErrOrderCum),style:{color:"#fff",marginTop:10,width:"100%",backgroundColor:"#c03"}},"Обжаловать")),this.state.showErrOrderCum.text_two&&0!=this.state.showErrOrder.text_two.length?h.createElement("div",{style:{display:"flex",flexDirection:"row",width:"auto",height:"auto",flexWrap:"wrap",flexShrink:1,paddingTop:20}},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Ответ обжалования:"),h.createElement(P.Z,{style:{fontSize:15,color:"#000"}},this.state.showErrOrderCum.text_two)):null):null),h.createElement(D.Z,null,h.createElement(Z.Z,{onClick:function(){e.setState({showErrOrders:!1,showErrOrder:null,showErrOrderCum:null})},color:"primary"},"Закрыть"))),h.createElement(h.Fragment,null,h.createElement(x.ZP,{anchor:"bottom",open:this.state.isOpen,onClose:function(){e.setState({isOpen:!1})}},this.state.mounth.map((function(t,n){return h.createElement(Z.Z,{key:n,onClick:e.getGraph.bind(e,t.day)},t.mounth)})))),h.createElement(y.ZP,{container:!0,spacing:3},h.createElement(y.ZP,{item:!0,xs:12},h.createElement(v.Z,{sx:{width:"100%",overflow:"hidden"}},h.createElement(S.Z,{sx:{maxHeight:600},id:"tableGraph"},h.createElement(k.Z,{stickyHeader:!0,"aria-label":"sticky table"},h.createElement(C.Z,null,h.createElement(O.Z,null,h.createElement(_.Z,{style:{width:200,height:30,textAlign:"center",border:"1px solid #e5e5e5"}}),this.state.dates.map((function(e,t){return h.createElement(_.Z,{key:t,style:{width:50,height:30,textAlign:"center",border:"1px solid #e5e5e5"}},e.day)}))),h.createElement(O.Z,null,h.createElement(_.Z,{style:{width:200,height:30,textAlign:"center",border:"1px solid #e5e5e5"}},"Сотрудник"),this.state.dates.map((function(e,t){return h.createElement(_.Z,{key:t,style:{width:50,height:30,textAlign:"center",border:"1px solid #e5e5e5"}},e.dow)})))),h.createElement(b.Z,null,this.state.data.map((function(e,t){return h.createElement(O.Z,{hover:!0,key:t},e.map((function(e,t){return h.createElement(_.Z,{key:t,style:0==t?{width:200,height:30}:{width:50,height:30,textAlign:"center",border:"1px solid #e5e5e5"}},0==t?e.user_name:"0"==e.min?"":e.hours)})))})))))))),h.createElement(y.ZP,{container:!0,spacing:3,style:{paddingTop:20}},h.createElement(y.ZP,{item:!0,xs:12},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Ошибки по заказам"),h.createElement(v.Z,null,h.createElement(S.Z,null,h.createElement(k.Z,null,h.createElement(C.Z,null,h.createElement(O.Z,null,h.createElement(_.Z,null,"Заказ"),h.createElement(_.Z,null,"Дата заказа"),h.createElement(_.Z,null,"Ошибка"),h.createElement(_.Z,null,"Довоз"),h.createElement(_.Z,null,"Сумма"))),h.createElement(b.Z,null,this.state.errs.orders.map((function(t,n){return h.createElement(O.Z,{hover:!0,key:n,onClick:function(){e.setState({showErrOrders:!0,showErrOrder:t})}},h.createElement(_.Z,null,t.order_id),h.createElement(_.Z,null,t.date_time_order),h.createElement(_.Z,null,t.pr_name),h.createElement(_.Z,null,parseInt(t.new_order_id)>0?"+":" "),h.createElement(_.Z,null,t.my_price+" р."))}))))))),h.createElement(y.ZP,{item:!0,xs:12,style:{paddingTop:20}},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Ошибки по камерам"),h.createElement(v.Z,null,h.createElement(S.Z,null,h.createElement(k.Z,null,h.createElement(C.Z,null,h.createElement(O.Z,null,h.createElement(_.Z,null,"#"),h.createElement(_.Z,null,"Дата время совершения ошибки"),h.createElement(_.Z,null,"Ошибка"),h.createElement(_.Z,null,"Сумма"))),h.createElement(b.Z,null,this.state.errs.err_cum.map((function(t,n){return h.createElement(O.Z,{hover:!0,key:n,onClick:function(){e.setState({showErrOrders:!0,showErrOrderCum:t})}},h.createElement(_.Z,null,t.id),h.createElement(_.Z,null,t.date_time_fine),h.createElement(_.Z,null,t.fine_name),h.createElement(_.Z,null,t.price+" р."))})))))))))}}]),z}(h.Component);function B(){var e=z(),t=(0,m.k6)();return h.createElement(j,{classes:e,history:t})}},3498:(e,t,n)=>{"use strict";n.r(t),n.d(t,{CardItemList:()=>I,ListOrders:()=>R});var r=n(5861),a=n(5671),o=n(3144),i=n(7326),l=n(136),s=n(6215),c=n(1120),d=n(4942),p=n(7462),u=n(5987),h=n(7757),m=n.n(h),f=n(7294),g=n(5977),y=n(1861),E=n(5725),w=n(2658),Z=n(2642),x=n(2318),v=n(3412),k=n(8999),b=n(821),_=n(9062),S=n(3707),C=["className"];function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var a=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var T=n(7563),D=(0,y.ZP)((function(e){var t=e.className,n=(0,u.Z)(e,C);return f.createElement(v.Z,(0,p.Z)({},n,{classes:{popper:t}}))}))((function(e){var t=e.theme;return(0,d.Z)({},"& .".concat(k.Z.tooltip),{backgroundColor:"#000",color:"#fff",marginTop:0,maxWidth:220,fontSize:t.typography.pxToRem(12),border:"1px solid #dadde9",borderRadius:5})})),I=function(e){(0,l.Z)(n,e);var t=O(n);function n(e){var r;return(0,a.Z)(this,n),r=t.call(this,e),(0,d.Z)((0,i.Z)(r),"_isMounted",!1),r.state={openTooltip:!1},r}return(0,o.Z)(n,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"finishOrder",value:function(e){confirm("Точно завершить заказ ?")&&this.props.actionOrder(e,3)}},{key:"cancelOrder",value:function(e){confirm("Отменить заказ ?")&&this.props.actionOrder(e,2)}},{key:"render",value:function(){var e=this,t=this.props.item,n="100%";return f.createElement("div",{className:"container"},f.createElement("div",{style:{display:"flex",flexDirection:"column",paddingBottom:10}},f.createElement(w.Z,{style:{fontSize:20,color:"#000"},component:"span"},t.id_text)),f.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",paddingBottom:10}},0==parseInt(t.count_other)?null:f.createElement(w.Z,{className:"textBold typeItems typeItemsBlue",style:{marginRight:5},component:"span"},"Роллы"),0==parseInt(t.count_pizza)?null:f.createElement(w.Z,{className:"textBold typeItems typeItemsRed",style:{marginLeft:5,marginRight:5},component:"span"},"Пицца x",t.count_pizza),0==parseInt(t.count_drink)?null:f.createElement(D,{style:{marginTop:0},open:this.state.openTooltip,onClose:function(){e.setState({openTooltip:!1})},title:f.createElement(f.Fragment,null,t.drink_list.map((function(e,t){return f.createElement(w.Z,{key:t,className:"text",style:{paddingBottom:5,paddingTop:2,color:"#fff"}},e.names)})))},f.createElement(w.Z,{onClick:function(){e.setState({openTooltip:!0})},className:"textBold typeItems typeItemsGreen",style:{marginLeft:5,marginRight:5},component:"span"},"Напиток x",t.count_drink))),f.createElement("div",{style:{display:"flex",flexDirection:"column",width:n,paddingBottom:15}},f.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},f.createElement(w.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000",paddingRight:5},component:"span"},"Адрес: "),f.createElement(w.Z,{style:{fontSize:20,color:"#000"},component:"span"},t.addr)),f.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},0==t.pd.length||0==parseInt(t.pd)?null:f.createElement(f.Fragment,null,f.createElement(w.Z,{className:"textBold",component:"span",style:{paddingRight:5}},"Пд:"),f.createElement(w.Z,{className:"text",component:"span",style:{paddingRight:5}},t.pd,",")),0==t.et.length||0==parseInt(t.et)?null:f.createElement(f.Fragment,null,f.createElement(w.Z,{className:"textBold",component:"span",style:{paddingRight:5}},"Эт: "),f.createElement(w.Z,{className:"text",component:"span",style:{paddingRight:5}},t.et,",")),0==t.kv.length||0==parseInt(t.kv)?null:f.createElement(f.Fragment,null,f.createElement(w.Z,{className:"textBold",component:"span",style:{paddingRight:5}},"Кв:"),f.createElement(w.Z,{className:"text",component:"span",style:{paddingRight:5}},t.kv))),0==parseInt(t.fake_dom)?null:f.createElement(w.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Домофон не работает"),f.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",paddingBottom:5,paddingTop:10}},f.createElement(w.Z,{className:"textBold",style:{paddingRight:5}},"Ко времени: "),f.createElement(w.Z,{className:"text"},t.need_time)),1!==parseInt(t.status_order)?null:f.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},f.createElement(w.Z,{className:"textBold",style:{paddingRight:5}},"Начнут готовить: "),f.createElement(w.Z,{className:"text"},t.time_start_order)),6!==parseInt(t.status_order)?null:f.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},f.createElement(w.Z,{className:"textBold",style:{paddingRight:5}},"Отдали: "),f.createElement(w.Z,{className:"text"},t.close_date_time_order)),6==parseInt(t.status_order)?null:f.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},f.createElement(w.Z,{className:"textBold",style:{paddingRight:5}},"Осталось: "),f.createElement(w.Z,{className:"text"},t.to_time))),0==t.comment.length?null:f.createElement("div",{style:{flex:1,display:"flex",flexDirection:"row",flexWrap:"wrap",paddingBottom:5,width:n}},f.createElement(w.Z,{className:"textBold",style:{paddingRight:5}},"Коммент: "),f.createElement(w.Z,{className:"text"},t.comment)),0==parseInt(t.is_delete)?null:f.createElement("div",{style:{flex:1,display:"flex",flexDirection:"row",flexWrap:"wrap",paddingBottom:5,width:n}},f.createElement(w.Z,{className:"textBold",style:{paddingRight:5}},"Причина удаления: "),f.createElement(w.Z,{className:"text"},t.delete_reason)),f.createElement("div",{style:{flex:1,display:"flex",flexDirection:"row",flexWrap:"wrap",paddingBottom:5,width:n}},f.createElement(w.Z,{className:"textBold",style:{paddingRight:5}},"Сумма: "),1==parseInt(t.online_pay)?f.createElement(w.Z,{style:{fontSize:15,color:"#fc2847",fontWeight:"bold"}},"Оплачено"):f.createElement(w.Z,{className:"text"},t.sum_order,"р.")),0==parseInt(t.sdacha)||1==parseInt(t.online_pay)?null:f.createElement("div",{style:{flex:1,display:"flex",flexDirection:"row",flexWrap:"wrap",paddingBottom:5,width:n}},f.createElement(w.Z,{className:"textBold",style:{paddingRight:5}},"Сдача с: "),f.createElement(w.Z,{className:"text"},t.sdacha,"р. ( ",t.sum_sdacha,"р. )")),0==parseInt(t.is_get)?f.createElement("div",{style:{display:"flex",flexDirection:"column",marginLeft:0,width:n,alignItems:"center",justifyContent:"center",paddingTop:10}},f.createElement("a",{className:"bntAction typeItemsGray",style:{width:"100%",marginBottom:10},href:"tel:"+t.number},t.number),f.createElement(Z.Z,{className:"bntAction typeItemsGreen",style:{width:"100%"},onClick:this.props.actionOrder.bind(this,t.id,1)},"Взять")):1==parseInt(t.is_get)&&1==parseInt(t.is_my)?f.createElement("div",{style:{display:"flex",flexDirection:"column",width:n,alignItems:"center",justifyContent:"center",paddingTop:10}},f.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",width:n}},6==parseInt(t.status_order)?null:f.createElement(Z.Z,{className:"bntAction typeItemsRed",style:{width:"40%",marginRight:5},onClick:this.cancelOrder.bind(this,t.id)},"Отменить"),f.createElement("a",{className:"bntAction",style:{width:6!=parseInt(t.status_order)?"60%":"100%",marginLeft:5,backgroundColor:"#bababa"},href:"tel:"+t.number},t.number)),6==parseInt(t.status_order)?null:f.createElement(Z.Z,{className:"bntAction typeItemsGreen",style:{width:n,marginTop:10},onClick:this.finishOrder.bind(this,t.id)},"Завершить")):f.createElement("div",{style:{display:"flex",flexDirection:"column",marginLeft:0,width:n,alignItems:"center",justifyContent:"center",paddingTop:10}},f.createElement(Z.Z,{className:"bntAction typeItemsGray",style:{width:"100%",textAlign:"center"}},t.driver_name),f.createElement("a",{className:"bntAction typeItemsGray",style:{width:"100%",textAlign:"center",marginTop:10,color:"#000"},href:"tel:"+t.driver_login},t.driver_login)))}}]),n}(f.PureComponent),P=function(e){(0,l.Z)(p,e);var t,n,s,c=O(p);function p(e){var t;return(0,a.Z)(this,p),t=c.call(this,e),(0,d.Z)((0,i.Z)(t),"timerId",null),(0,d.Z)((0,i.Z)(t),"_isMounted",!1),(0,d.Z)((0,i.Z)(t),"getData",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("https://jacochef.ru/api/site/driver.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:T.stringify({type:e,data:JSON.stringify(t)})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){alert("Плохая связь с интернетом или ошибка на сервере"),console.log(e)}))})),t.state={history:t.props.history,module_name:"",is_load:!1,orders:[],is_open:!1,type:{id:1,text:"Активные"},types:[{id:1,text:"Активные"},{id:3,text:"Предзаказы"},{id:2,text:"Мои отмеченные"},{id:5,text:"У других курьеров"},{id:6,text:"Мои завершенные"}]},t}return(0,o.Z)(p,[{key:"componentWillUnmount",value:function(){this._isMounted=!1,clearInterval(this.timerId)}},{key:"componentDidMount",value:(s=(0,r.Z)(m().mark((function e(){var t,n,r=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(e){var t=e.message;console.log(t)},t=function(e){var t=e.coords,n=[t.latitude,t.longitude];console.log(n)},this._isMounted=!0,"http:"!=window.location.protocol&&"http"!=window.location.protocol||"localhost"==window.location.hostname||(console.log("goTo","https://jacodriver.ru/"+window.location.pathname),window.location.href="https://jacodriver.ru/"+window.location.pathname),localStorage.getItem("token")&&localStorage.getItem("token").length>0||(this.state.history.push("/auth"),window.location.reload()),navigator.geolocation.getCurrentPosition(t,n,{enableHighAccuracy:!0}),this.timerId=setInterval((function(){r._isMounted?r.getOrders(!1,r.state.type.id):clearInterval(r.timerId)}),3e4),setTimeout((function(){r.getOrders()}),100);case 8:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"getOrders",value:(n=(0,r.Z)(m().mark((function e(){var t,n,r,a,o,i=this,l=arguments;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(l.length>0&&void 0!==l[0])||l[0],n=l.length>1&&void 0!==l[1]?l[1]:1,t&&this.setState({is_load:!0,is_open:!1}),r=this.state.types.find((function(e){return parseInt(e.id)==parseInt(n)})),this.setState({type:r}),a={token:localStorage.getItem("token"),type:n,is_map:0},e.next=8,this.getData("get_orders_v3",a);case 8:!1===(o=e.sent)||setTimeout((function(){var e=[];1==n&&(e=o.free_orders),2==n&&(e=o.my_orders),5==n&&(e=o.other_orders),3==n&&(e=o.pred_orders),6==n&&(e=o.my_finish),i.setState({orders:e,is_load:!1})}),1e3);case 10:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"actionOrder",value:(t=(0,r.Z)(m().mark((function e(t,n){var r,a,o,i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({is_load:!0}),3==parseInt(n)&&(r=function(e){var n=e.coords,r=n.latitude,a=n.longitude,o={token:localStorage.getItem("token"),order_id:t,lat:r,lon:a};fetch("https://jacochef.ru/api/site/driver.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:T.stringify({type:"checkPosition",data:JSON.stringify(o)})}).then((function(e){return e.json()})).then((function(e){console.log("res1",e)})).catch((function(e){console.log(e)}))},a=function(e){var t=e.message;console.log(t)},navigator.geolocation.getCurrentPosition(r,a,{enableHighAccuracy:!0})),o={token:localStorage.getItem("token"),id:t,type:n},e.next=5,this.getData("actionOrder",o);case 5:0==(i=e.sent).st?this.setState({showErr:!0,textErr:i.text,is_load:!1}):this.getOrders(!0,this.state.type.id);case 7:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return f.createElement(f.Fragment,null,f.createElement(b.Z,{open:this.state.is_load},f.createElement(_.Z,{color:"inherit"})),f.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingBottom:10}},f.createElement(Z.Z,{onClick:function(){e.setState({is_open:!0})}},this.state.type.text),f.createElement(Z.Z,{style:{marginRight:3},onClick:this.getOrders.bind(this,!0,this.state.type.id)},f.createElement(S.Z,null))),f.createElement(f.Fragment,null,f.createElement(x.ZP,{anchor:"bottom",open:this.state.is_open,onClose:function(){e.setState({is_open:!1})}},this.state.types.map((function(t,n){return f.createElement(Z.Z,{key:n,onClick:e.getOrders.bind(e,!0,t.id)},t.text)})))),f.createElement(E.ZP,{container:!0,spacing:3},this.state.orders.map((function(t,n){return f.createElement(E.ZP,{item:!0,xs:12,sm:3,key:n},f.createElement(I,{item:t,actionOrder:e.actionOrder.bind(e)}))}))))}}]),p}(f.Component);function R(){var e=(0,g.k6)();return f.createElement(P,{history:e})}},1401:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MapOrders:()=>b});var r=n(5861),a=n(5671),o=n(3144),i=n(7326),l=n(136),s=n(6215),c=n(1120),d=n(4942),p=n(7757),u=n.n(p),h=n(7294),m=n(5977),f=n(5725),g=n(2642),y=n(2318),E=n(821),w=n(9062),Z=n(3498),x=n(3707);var v=n(7563),k=function(e){(0,l.Z)(_,e);var t,n,p,m,k,b=(m=_,k=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(m);if(k){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,s.Z)(this,e)});function _(e){var t;return(0,a.Z)(this,_),t=b.call(this,e),(0,d.Z)((0,i.Z)(t),"timerId",null),(0,d.Z)((0,i.Z)(t),"_isMounted",!1),(0,d.Z)((0,i.Z)(t),"map",null),(0,d.Z)((0,i.Z)(t),"getData",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("https://jacochef.ru/api/site/driver.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:v.stringify({type:e,data:JSON.stringify(t)})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){alert("Плохая связь с интернетом или ошибка на сервере"),console.log(e)}))})),t.state={history:t.props.history,module_name:"",is_load:!1,orders:[],home:null,is_open:!1,is_open_order:!1,openOrder:null,type:{id:1,text:"Активные"},types:[{id:1,text:"Активные"},{id:2,text:"Мои отмеченные"},{id:5,text:"У других курьеров"}],rotate:!0},t}return(0,o.Z)(_,[{key:"componentWillUnmount",value:function(){this._isMounted=!1,clearInterval(this.timerId)}},{key:"componentDidMount",value:(p=(0,r.Z)(u().mark((function e(){var t,n,r=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(e){var t=e.message;console.log(t)},t=function(e){var t=e.coords,n=[t.latitude,t.longitude];console.log(n)},this._isMounted=!0,"http:"!=window.location.protocol&&"http"!=window.location.protocol||"localhost"==window.location.hostname||(window.location.href="https://jacodriver.ru/"+window.location.pathname),localStorage.getItem("token")&&localStorage.getItem("token").length>0||(this.state.history.push("/auth"),window.location.reload()),navigator.geolocation.getCurrentPosition(t,n,{enableHighAccuracy:!0}),this.getOrders(!1,1),this.timerId=setInterval((function(){r._isMounted?r.getOrders(!1,r.state.type.id):clearInterval(r.timerId)}),3e4),setTimeout((function(){r.getOrders()}),100);case 9:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"getOrders",value:(n=(0,r.Z)(u().mark((function e(){var t,n,r,a,o,i=this,l=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(l.length>0&&void 0!==l[0])||l[0],n=l.length>1&&void 0!==l[1]?l[1]:1,t&&this.setState({is_load:!0,is_open:!1}),r=this.state.types.find((function(e){return parseInt(e.id)==parseInt(n)})),this.setState({type:r}),a={token:localStorage.getItem("token"),type:n,is_map:1},e.next=8,this.getData("get_orders_v3",a);case 8:o=e.sent,console.log(o.home),!1===o||setTimeout((function(){var e=[];1==n&&(e=o.free_orders),2==n&&(e=o.my_orders),5==n&&(e=o.other_orders),i.setState({orders:e,home:o.home,is_load:!1});var t=new ymaps.ObjectManager;if(i.map){var r={type:"FeatureCollection",features:[]};r.features.push({type:"Feature",id:0,options:{preset:"islands#blackDotIcon",iconColor:"black"},geometry:{type:"Point",coordinates:[o.home.latitude,o.home.longitude]}}),e.map((function(e){r.features.push({type:"Feature",id:e.id,options:{preset:6==parseInt(e.status_order)?"islands#blueCircleDotIconWithCaption":"islands#circleDotIcon",iconColor:e.point_color?e.point_color:e.color},properties:{iconCaption:e.point_text},geometry:{type:"Point",coordinates:[e.xy.latitude,e.xy.longitude]}})})),i.map.geoObjects.removeAll(),t.add(r),i.map.geoObjects.add(t)}else ymaps.ready((function(){i.map=new ymaps.Map("map",{center:[o.home.latitude,o.home.longitude],zoom:11},{searchControlProvider:"yandex#search"});var n=new ymaps.GeoObject({geometry:{type:"Point",coordinates:[o.home.latitude,o.home.longitude]}},{preset:"islands#blackDotIcon",iconColor:"black"});i.map.geoObjects.add(n);var r={type:"FeatureCollection",features:[]};e.map((function(e){r.features.push({type:"Feature",id:e.id,options:{preset:6==parseInt(e.status_order)?"islands#blueCircleDotIconWithCaption":"islands#circleDotIcon",iconColor:e.point_color?e.point_color:e.color},properties:{iconCaption:e.point_text},geometry:{type:"Point",coordinates:[e.xy.latitude,e.xy.longitude]}})})),t.add(r),i.map.geoObjects.add(t)}));t.objects.events.add(["click"],(function(e){var t=e.get("objectId"),n=i.state.orders.find((function(e){return parseInt(e.id)==parseInt(t)}));n&&i.showOrder(n)}))}),1e3);case 11:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"actionOrder",value:(t=(0,r.Z)(u().mark((function e(t,n){var r,a,o,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({is_load:!0}),this.setState({is_open_order:!1,openOrder:null}),3==parseInt(n)&&(r=function(e){var n=e.coords,r=n.latitude,a=n.longitude,o={token:localStorage.getItem("token"),order_id:t,lat:r,lon:a};fetch("https://jacochef.ru/api/site/driver.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:v.stringify({type:"checkPosition",data:JSON.stringify(o)})}).then((function(e){return e.json()})).then((function(e){console.log("res1",e)})).catch((function(e){console.log(e)}))},a=function(e){var t=e.message;console.log(t)},navigator.geolocation.getCurrentPosition(r,a,{enableHighAccuracy:!0})),o={token:localStorage.getItem("token"),id:t,type:n},e.next=6,this.getData("actionOrder",o);case 6:0==(i=e.sent).st?this.setState({showErr:!0,textErr:i.text,is_load:!1}):this.getOrders(!0,this.state.type.id);case 8:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"showOrder",value:function(e){this.setState({is_open_order:!0,openOrder:e})}},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(E.Z,{open:this.state.is_load},h.createElement(w.Z,{color:"inherit"})),h.createElement("div",{style:{position:"absolute",zIndex:10,display:"flex",flexDirection:"row",justifyContent:"space-between",width:"100%",left:0,top:100}},h.createElement(g.Z,{style:{marginLeft:38,color:1==this.state.type.id?"#2c75ff":"#000",fontWeight:"bold"},onClick:this.getOrders.bind(this,!0,1)},"Активные"),h.createElement(g.Z,{style:{color:2==this.state.type.id?"#2c75ff":"#000",fontWeight:"bold"},onClick:this.getOrders.bind(this,!0,2)},"Мои"),h.createElement(g.Z,{style:{color:5==this.state.type.id?"#2c75ff":"#000",fontWeight:"bold"},onClick:this.getOrders.bind(this,!0,5)},"У других"),h.createElement(g.Z,{style:{marginRight:3},onClick:this.getOrders.bind(this,!0,this.state.type.id)},h.createElement(x.Z,null))),h.createElement(h.Fragment,null,h.createElement(y.ZP,{anchor:"bottom",open:this.state.is_open,onClose:function(){e.setState({is_open:!1})}},this.state.types.map((function(t,n){return h.createElement(g.Z,{key:n,onClick:e.getOrders.bind(e,!0,t.id)},t.text)})))),h.createElement(h.Fragment,null,h.createElement(y.ZP,{anchor:"bottom",open:this.state.is_open_order,onClose:function(){e.setState({is_open_order:!1,openOrder:null})}},this.state.openOrder?h.createElement(Z.CardItemList,{item:this.state.openOrder,actionOrder:this.actionOrder.bind(this)}):null)),h.createElement(f.ZP,{style:{zIndex:9,margin:-16}},h.createElement("div",{id:"map",name:"map",style:{width:"100%",height:700,paddingTop:10}})))}}]),_}(h.Component);function b(){var e=(0,m.k6)();return h.createElement(k,{history:e})}},3543:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Price:()=>M});var r=n(5861),a=n(5671),o=n(3144),i=n(7326),l=n(136),s=n(6215),c=n(1120),d=n(4942),p=n(7757),u=n.n(p),h=n(7294),m=n(5977),f=n(225),g=n(4345),y=n(5725),E=n(821),w=n(9062),Z=n(2658),x=n(1095),v=n(4424),k=n(5344),b=n(6752),_=n(6447),S=n(8523),C=n(6501),O=n(9573),T=n(8732),D=n(6926),I=n(7896),P=n(6011),R=n(3694),W=n(3887);var N=n(7563),z=(0,g.Z)({palette:{primary:{main:"#c03"}}}),j=(0,f.Z)({formControl:{width:"100%"},selectEmpty:{marginTop:z.spacing(2)},tableCel:{textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},tableCelHead:{textAlign:"center",padding:15},customCel:{backgroundColor:"#bababa",textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},timePicker:{width:"100%"}}),B=function(e){(0,l.Z)(g,e);var t,n,p,m,f=(p=g,m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(p);if(m){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,s.Z)(this,e)});function g(e){var t;return(0,a.Z)(this,g),t=f.call(this,e),(0,d.Z)((0,i.Z)(t),"getData",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("https://jacochef.ru/api/site/driver.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:N.stringify({type:e,data:JSON.stringify(t)})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){alert("Плохая связь с интернетом или ошибка на сервере"),console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,is_load:!1,date:new Date,allCount:0,bankCount:0,cashCount:0,bankSum:0,cashSum:0,myPrice:0,sdacha:0,myCash:0,giveList:[],full_give:0},t}return(0,o.Z)(g,[{key:"componentDidMount",value:(n=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"http:"!=window.location.protocol&&"http"!=window.location.protocol||"localhost"==window.location.hostname||(window.location.href="https://jacodriver.ru/"+window.location.pathname),this.getPrice();case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"changeDate",value:function(e){var t=this;this.setState({date:e}),setTimeout((function(){t.getPrice()}),300)}},{key:"getPrice",value:(t=(0,r.Z)(u().mark((function e(){var t,n,r,a,o,i,l,s,c,d,p,h,m,f;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p=new Date(this.state.date),h=p.getFullYear()+"-",h+=p.getMonth()+1+"-",h+=p.getDate(),m={token:localStorage.getItem("token"),date:h},e.next=7,this.getData("getMyPrice_v2",m);case 7:f=e.sent,this.setState({allCount:null!==(t=f.stat.count)&&void 0!==t?t:0,bankCount:null!==(n=f.stat.count_bank)&&void 0!==n?n:0,cashCount:null!==(r=f.stat.count_cash)&&void 0!==r?r:0,bankSum:null!==(a=f.stat.sum_bank)&&void 0!==a?a:0,cashSum:null!==(o=f.stat.sum_cash)&&void 0!==o?o:0,myPrice:null!==(i=f.stat.my_price)&&void 0!==i?i:0,sdacha:null!==(l=f.stat.sdacha)&&void 0!==l?l:0,myCash:null!==(s=f.stat.my_cash)&&void 0!==s?s:0,giveList:null!==(c=f.give_hist)&&void 0!==c?c:[],full_give:null!==(d=f.stat.full_give)&&void 0!==d?d:0});case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e,t=this;return h.createElement(h.Fragment,null,h.createElement(E.Z,{className:this.state.classes.backdrop,open:this.state.is_load},h.createElement(w.Z,{color:"inherit"})),h.createElement(y.ZP,{container:!0,spacing:3},h.createElement(y.ZP,{item:!0,xs:12,sm:3,style:{marginTop:10}},h.createElement(k.Z,{dateAdapter:v.Z,locale:S.Z},h.createElement(_.Z,{spacing:3},h.createElement(b.Z,(e={label:"Дата",allowSameDateSelection:!0,showTodayButton:!0,startText:this.props.startText,endText:this.props.endText,value:this.props.value,inputFormat:"yyyy-MM-dd"},(0,d.Z)(e,"value",this.state.date),(0,d.Z)(e,"onChange",(function(e){t.changeDate(e)})),(0,d.Z)(e,"renderInput",(function(e){return h.createElement(x.Z,e)})),e)))),h.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",paddingTop:10}},h.createElement(Z.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000",paddingRight:5},component:"span"},"Cумма нала:"),h.createElement(Z.Z,{style:{fontSize:20,color:"#000"},component:"span"},this.state.cashSum,"р.")),h.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},h.createElement(Z.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000",paddingRight:5},component:"span"},"Cумма безнала:"),h.createElement(Z.Z,{style:{fontSize:20,color:"#000"},component:"span"},this.state.bankSum,"р.")),h.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},h.createElement(Z.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000",paddingRight:5},component:"span"},"Заработал:"),h.createElement(Z.Z,{style:{fontSize:20,color:"#000"},component:"span"},this.state.myPrice,"р.")),h.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",paddingBottom:10}},h.createElement(Z.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000",paddingRight:5},component:"span"},"Сдача:"),h.createElement(Z.Z,{style:{fontSize:20,color:"#000"},component:"span"},this.state.sdacha,"р.")),h.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",paddingBottom:10}},h.createElement(Z.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000",paddingRight:5},component:"span"},"Налички:"),h.createElement(Z.Z,{style:{fontSize:20,color:"#000"},component:"span"},this.state.myCash,"р.")),h.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},h.createElement(Z.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000",paddingRight:5},component:"span"},"Количество по налу:"),h.createElement(Z.Z,{style:{fontSize:20,color:"#000"},component:"span"},this.state.cashCount)),h.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},h.createElement(Z.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000",paddingRight:5},component:"span"},"Количество по безналу:"),h.createElement(Z.Z,{style:{fontSize:20,color:"#000"},component:"span"},this.state.bankCount)),h.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},h.createElement(Z.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000",paddingRight:5},component:"span"},"Завершенных заказов:"),h.createElement(Z.Z,{style:{fontSize:20,color:"#000"},component:"span"},this.state.allCount)))),h.createElement(y.ZP,{container:!0,spacing:3},h.createElement(y.ZP,{item:!0,xs:12,sm:3,style:{marginTop:10}},h.createElement(C.Z,{sx:{width:"100%"}},h.createElement(I.Z,null,h.createElement(O.Z,null,h.createElement(P.Z,null,h.createElement(R.Z,null,h.createElement(D.Z,null,"Время"),h.createElement(D.Z,null,"Сданная сумма"))),h.createElement(T.Z,null,this.state.giveList.map((function(e,t){return h.createElement(R.Z,{hover:!0,key:t},h.createElement(D.Z,null,e.time),h.createElement(D.Z,null,e.give," р."))}))),h.createElement(W.Z,null,h.createElement(R.Z,null,h.createElement(D.Z,null,"Итого"),h.createElement(D.Z,null,this.state.full_give," р.")),h.createElement(R.Z,null,h.createElement(D.Z,null,"Осталось"),h.createElement(D.Z,null,this.state.myCash," р.")))))))))}}]),g}(h.Component);function M(){var e=j(),t=(0,m.k6)();return h.createElement(B,{classes:e,history:t})}},9546:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Reg:()=>N});var r=n(5861),a=n(5671),o=n(3144),i=n(7326),l=n(136),s=n(6215),c=n(1120),d=n(4942),p=n(7757),u=n.n(p),h=n(7294),m=n(5977),f=n(7109),g=n(1095),y=n(5725),E=n(2642),w=n(225),Z=n(4345),x=n(4436),v=n(5272),k=n(5162),b=n(4666),_=n(8979),S=n(7750),C=n(6408),O=n(7645),T=n(821),D=n(9062);var I=n(7563),P=(0,Z.Z)({palette:{primary:{main:"#c03"}}}),R=(0,w.Z)({paper:{display:"flex",flexDirection:"column",alignItems:"center"},avatar:{borderRadius:0,width:"100%",height:150,margin:0,backgroundColor:"#fff"},avatar2:{borderRadius:0,width:"100%",height:130,margin:0,backgroundColor:"#fff"},form:{width:"100%",marginTop:P.spacing(1)},submit:{margin:P.spacing(3,0,2)},backButton:{marginRight:P.spacing(1)},instructions:{marginTop:P.spacing(1),marginBottom:P.spacing(1)},textLink:{color:"#c03"}}),W=function(e){(0,l.Z)(P,e);var t,n,p,m,w,Z=(m=P,w=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(m);if(w){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,s.Z)(this,e)});function P(e){var t;return(0,a.Z)(this,P),t=Z.call(this,e),(0,d.Z)((0,i.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/site/driver.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:I.stringify({type:e,data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){return setTimeout((function(){t.setState({is_load:!1})}),300),e})).catch((function(e){alert("Плохая связь с интернетом или ошибка на сервере"),console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"auth",module_name:"",is_load:!1,modalDialog:!1,dialogTitle:"",dialogText:"",activeStep:0,steps:["Телефон","Подтверждение"],phone:"",code:"",pwd:""},t}return(0,o.Z)(P,[{key:"componentDidMount",value:(p=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(window.location.protocol),"http:"!=window.location.protocol&&"http"!=window.location.protocol||"localhost"==window.location.hostname||(console.log("goTo","https://jacodriver.ru/"+window.location.pathname),window.location.href="https://jacodriver.ru/"+window.location.pathname);case 2:case"end":return e.stop()}}),e)}))),function(){return p.apply(this,arguments)})},{key:"updateData",value:(n=(0,r.Z)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point_id:this.state.point,showReady:!0===this.state.showReady?1:0},e.next=3,this.getData("get_orders",t);case 3:n=e.sent,this.setState({read:n.read,onstol:n.onstol,ordersQueue:n.prestol_new});case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"nextStep",value:(t=(0,r.Z)(u().mark((function e(){var t,n,r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=this.state.activeStep){e.next=8;break}return t={login:document.getElementById("phone").value,pwd:document.getElementById("password").value},e.next=4,this.getData("get_sms",t);case 4:0==(n=e.sent).st?this.setState({modalDialog:!0,dialogTitle:"Предупреждение",dialogText:n.text}):this.setState({activeStep:this.state.activeStep+1,phone:t.login,pwd:t.pwd}),e.next=14;break;case 8:if(1!=this.state.activeStep){e.next=14;break}return r={login:this.state.phone,pwd:this.state.pwd,code:document.getElementById("code").value},e.next=12,this.getData("send_code",r);case 12:0==(a=e.sent).st?this.setState({modalDialog:!0,dialogTitle:"Предупреждение",dialogText:a.text}):(localStorage.setItem("token",a.token),this.state.history.push("/list_orders"),location.reload());case 14:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"enterNextStep",value:function(e){13==e.charCode&&this.nextStep()}},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(T.Z,{className:this.state.classes.backdrop,open:this.state.is_load},h.createElement(D.Z,{color:"inherit"})),h.createElement(b.Z,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(O.Z,{id:"alert-dialog-title"},this.state.dialogTitle),h.createElement(S.Z,null,h.createElement(C.Z,{id:"alert-dialog-description"},this.state.dialogText)),h.createElement(_.Z,null,h.createElement(E.Z,{onClick:function(){e.setState({modalDialog:!1})},color:"primary",autoFocus:!0},"Хорошо"))),h.createElement(y.ZP,{container:!0,spacing:3,direction:"row",justifyContent:"center",alignItems:"center"},h.createElement(y.ZP,{item:!0,xs:12,sm:6,md:6,lg:4,xl:3},h.createElement("div",{className:this.state.classes.paper},h.createElement(f.Z,{className:this.state.classes.avatar,style:{marginBottom:10}},h.createElement("img",{alt:"Жако доставка роллов и пиццы",src:"../assets/img_other/Favikon.png",style:{height:"100%"}})),h.createElement(x.Z,{activeStep:this.state.activeStep,alternativeLabel:!0,style:{width:"100%"}},this.state.steps.map((function(e){return h.createElement(v.Z,{key:e},h.createElement(k.Z,null,e))}))),h.createElement("div",{className:this.state.classes.form,style:{width:"100%"}},0==this.state.activeStep?h.createElement(h.Fragment,null,h.createElement(g.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,id:"phone",label:"Номер телефона",name:"phone",autoComplete:"phone",autoFocus:!0}),h.createElement(g.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,name:"password",label:"Новый пароль",type:"password",id:"password",autoComplete:"current-password"})):null,1==this.state.activeStep?h.createElement(g.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,id:"code",label:"Код из смс",name:"code",autoComplete:"code",autoFocus:!0}):null,2==this.state.activeStep?h.createElement(g.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,name:"password",label:"Пароль",type:"password",id:"password",autoComplete:"current-password",onKeyPress:this.enterNextStep.bind(this)}):null,h.createElement(E.Z,{fullWidth:!0,variant:"contained",color:"primary",className:this.state.classes.submit,onClick:this.nextStep.bind(this)},"Дальше"),h.createElement(y.ZP,{container:!0,style:{marginTop:10}},h.createElement(y.ZP,{item:!0,xs:!0},h.createElement("a",{href:"/auth",className:this.state.classes.textLink},"Вернуться к авторизации"))))))))}}]),P}(h.Component);function N(){var e=R(),t=(0,m.k6)();return h.createElement(W,{classes:e,history:t})}},9658:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Settings:()=>I});var r=n(5861),a=n(5671),o=n(3144),i=n(7326),l=n(136),s=n(6215),c=n(1120),d=n(4942),p=n(7757),u=n.n(p),h=n(7294),m=n(5977),f=n(225),g=n(4345),y=n(5725),E=n(821),w=n(9062),Z=n(3063),x=n(165),v=n(542),k=n(6446),b=n(476),_=n(2642),S=n(3565);var C=n(7563),O=(0,g.Z)({palette:{primary:{main:"#c03"}}}),T=(0,f.Z)({formControl:{width:"100%"},selectEmpty:{marginTop:O.spacing(2)},tableCel:{textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},tableCelHead:{textAlign:"center",padding:15},customCel:{backgroundColor:"#bababa",textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},timePicker:{width:"100%"}}),D=function(e){(0,l.Z)(g,e);var t,n,p,m,f=(p=g,m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(p);if(m){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,s.Z)(this,e)});function g(e){var t;return(0,a.Z)(this,g),t=f.call(this,e),(0,d.Z)((0,i.Z)(t),"click",!1),(0,d.Z)((0,i.Z)(t),"getData",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("https://jacochef.ru/api/site/driver.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:C.stringify({type:e,data:JSON.stringify(t)})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){alert("Плохая связь с интернетом или ошибка на сервере"),console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,is_load:!1,groupTypeTime:"norm",color:"blue"},t}return(0,o.Z)(g,[{key:"componentDidMount",value:function(){"http:"!=window.location.protocol&&"http"!=window.location.protocol||"localhost"==window.location.hostname||(window.location.href="https://jacodriver.ru/"+window.location.pathname),this.getSettings()}},{key:"getSettings",value:(n=(0,r.Z)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={token:localStorage.getItem("token")},e.next=3,this.getData("getMySetting",t);case 3:n=e.sent,this.setState({groupTypeTime:n.type_data_map}),n.color&&this.setState({color:n.color});case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"saveMySetting",value:(t=(0,r.Z)(u().mark((function e(){var t,n=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.click){e.next=4;break}return e.abrupt("return");case 4:this.click=!0;case 5:return this.setState({is_load:!0}),t={token:localStorage.getItem("token"),typeMap:this.state.groupTypeTime,color:this.state.color},e.next=9,this.getData("saveMySetting",t);case 9:e.sent,setTimeout((function(){n.setState({is_load:!1}),n.click=!1}),300);case 11:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(E.Z,{className:this.state.classes.backdrop,open:this.state.is_load},h.createElement(w.Z,{color:"inherit"})),h.createElement(y.ZP,{container:!0,spacing:3},h.createElement(y.ZP,{item:!0,xs:12,style:{marginTop:10}},h.createElement(k.Z,{component:"fieldset"},h.createElement(b.Z,{component:"legend"},"Формат данных на карте"),h.createElement(x.Z,{"aria-label":"gender",name:"radio-buttons-group",value:this.state.groupTypeTime,onChange:function(t,n){e.setState({groupTypeTime:n})}},h.createElement(v.Z,{value:"norm",control:h.createElement(Z.Z,null),label:"Обычный (об заказ - время оформления, пред - промежуток времени)"}),h.createElement(v.Z,{value:"full",control:h.createElement(Z.Z,null),label:"Полный (промежуток времени)"}),h.createElement(v.Z,{value:"min",control:h.createElement(Z.Z,null),label:"Сокращенный (только оставшееся время)"})))),h.createElement(y.ZP,{item:!0,xs:12,style:{marginTop:10}},h.createElement(S.AI,{style:{width:"100%"},color:this.state.color,onChangeComplete:function(t){e.setState({color:t.hex})}})),h.createElement(y.ZP,{item:!0,xs:12,style:{marginTop:10}},h.createElement(_.Z,{onClick:this.saveMySetting.bind(this),color:"primary",style:{width:"100%"}},"Сохранить"))))}}]),g}(h.Component);function I(){var e=T(),t=(0,m.k6)();return h.createElement(D,{classes:e,history:t})}},5798:(e,t,n)=>{"use strict";var r=n(7294),a=n(3935),o=n(3727),i=n(5861),l=n(5671),s=n(3144),c=n(7326),d=n(136),p=n(6215),u=n(1120),h=n(4942),m=n(7757),f=n.n(m),g=n(6010),y=n(225),E=n(6720),w=n(3720),Z=n(4386),x=n(2440),v=n(799),k=n(8584),b=n(2658),_=n(6867),S=n(4065),C=n(5725),O=n(326),T=n(4345),D=n(1807),I=n(5977),P=n(6655),R=n(5152),W=n.n(R);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var z=n(7563),j=(0,T.Z)({palette:{primary:{main:"#c03"},def:{main:"#353b48",secondary:"#fff"}}}),B=(0,y.Z)({root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,h.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},j.mixins.toolbar),appBar:{zIndex:j.zIndex.drawer+1,transition:j.transitions.create(["width","margin"],{easing:j.transitions.easing.sharp,duration:j.transitions.duration.leavingScreen})},appBarShift:{marginLeft:300,width:"calc(100% - ".concat(300,"px)"),transition:j.transitions.create(["width","margin"],{easing:j.transitions.easing.sharp,duration:j.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:300,transition:j.transitions.create("width",{easing:j.transitions.easing.sharp,duration:j.transitions.duration.enteringScreen})},drawerPaperClose:(0,h.Z)({overflowX:"hidden",transition:j.transitions.create("width",{easing:j.transitions.easing.sharp,duration:j.transitions.duration.leavingScreen}),width:j.spacing(7)},j.breakpoints.up("sm"),{width:j.spacing(9)}),appBarSpacer:j.mixins.toolbar,content:{flexGrow:1,overflow:"auto"},container:{paddingTop:j.spacing(1),paddingBottom:j.spacing(4),width:"100%"},paper:{padding:j.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},heading:{fontSize:j.typography.pxToRem(15),fontWeight:j.typography.fontWeightRegular}}),M=function(e){(0,d.Z)(y,e);var t,n,a,m=(n=y,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(a){var r=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,p.Z)(this,e)});function y(e){var t;return(0,l.Z)(this,y),t=m.call(this,e),(0,h.Z)((0,c.Z)(t),"getData",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("https://jacochef.ru/api/site/driver.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:z.stringify({type:e,data:JSON.stringify(t)})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){alert("Плохая связь с интернетом или ошибка на сервере"),console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"header",title:"",open:!1,menu:[],full_menu:[],left:!1,phone_man:"",phone_center:"",phone_dir:""},t}return(0,s.Z)(y,[{key:"componentDidMount",value:(t=(0,i.Z)(f().mark((function e(){var t,n,r,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(window.location.protocol),"http:"!=window.location.protocol&&"http"!=window.location.protocol||"localhost"==window.location.hostname||(console.log("goTo","https://jacodriver.ru/"+window.location.pathname),window.location.href="https://jacodriver.ru/"+window.location.pathname),t=window.location.pathname,e.next=8;break;case 8:return n=W().find((function(e){return t.includes(e.path)})),this.setState({title:n.title}),window.document.title=n.title,r={token:localStorage.getItem("token")},e.next=14,this.getData("getPointInfo",r);case 14:a=e.sent,console.log(a),a&&this.setState({phone_man:a.phone_man,phone_center:a.phone_new,phone_dir:a.phone_upr});case 17:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"handleDrawerOpen",value:function(){this.setState({open:!0})}},{key:"handleDrawerClose",value:function(){this.setState({open:!1})}},{key:"logOut",value:function(){localStorage.removeItem("token"),this.state.history.push("/auth"),location.reload()}},{key:"goTo",value:function(e){this.setState({title:e}),window.document.title=e}},{key:"render",value:function(){var e=this;return r.createElement(r.Fragment,null,r.createElement(w.Z,{className:(0,g.Z)(this.state.classes.appBar,this.state.open&&this.state.classes.appBarShift)},r.createElement(Z.Z,{className:this.state.classes.toolbar},r.createElement(_.Z,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:this.handleDrawerOpen.bind(this),className:(0,g.Z)(this.state.classes.menuButton,this.state.open&&this.state.classes.menuButtonHidden)},r.createElement(O.Z,null)),r.createElement(b.Z,{component:"h1",variant:"h6",id:"GlobalHeader",color:"inherit",noWrap:!0,className:this.state.classes.title},this.state.title))),r.createElement(r.Fragment,null,r.createElement(P.Z,{anchor:"left",open:this.state.open,onClose:function(){e.setState({open:!1})},onOpen:function(){e.setState({open:!0})}},r.createElement(x.Z,{style:{width:"100%"}},r.createElement(v.ZP,{button:!0,onClick:this.goTo.bind(this,"Список заказов")},r.createElement(o.OL,{to:"/list_orders"},r.createElement(k.Z,{primary:"Список заказов"}))),r.createElement(v.ZP,{button:!0,onClick:this.goTo.bind(this,"Карта заказов")},r.createElement(o.OL,{to:"/map_orders"},r.createElement(k.Z,{primary:"Карта заказов"}))),r.createElement(v.ZP,{button:!0,onClick:this.goTo.bind(this,"Расчет")},r.createElement(o.OL,{to:"/price"},r.createElement(k.Z,{primary:"Расчет"}))),r.createElement(v.ZP,{button:!0,onClick:this.goTo.bind(this,"График работы")},r.createElement(o.OL,{to:"/graph"},r.createElement(k.Z,{primary:"График работы"}))),r.createElement(v.ZP,{button:!0,onClick:this.goTo.bind(this,"Настройки")},r.createElement(o.OL,{to:"/settings"},r.createElement(k.Z,{primary:"Настройки"}))),r.createElement(v.ZP,{button:!0},r.createElement("a",{href:"tel:"+this.state.phone_dir},r.createElement(k.Z,{primary:"Директор"}))),r.createElement(v.ZP,{button:!0},r.createElement("a",{href:"tel:"+this.state.phone_man},r.createElement(k.Z,{primary:"Менеджер"}))),r.createElement(v.ZP,{button:!0},r.createElement("a",{href:"tel:"+this.state.phone_center},r.createElement(k.Z,{primary:"Контакт-центр"}))),r.createElement(v.ZP,{button:!0,onClick:this.logOut.bind(this)},r.createElement(k.Z,{primary:"Выйти"}))))))}}]),y}(r.Component);function A(e){var t=e.code,n=e.children;return r.createElement(I.AW,{render:function(e){var r=e.staticContext;return r&&(r.status=t),n}})}function F(){var e=B(),t=(0,I.k6)(),n=!0;return"/auth/"!=t.location.pathname&&"/auth"!=t.location.pathname&&"/registration/"!=t.location.pathname&&"/registration"!=t.location.pathname||(n=!1),r.createElement(D.Z,{theme:j},r.createElement("div",{className:e.root},n?r.createElement(r.Fragment,null,r.createElement(E.ZP,null),r.createElement(M,{classes:e,history:t})):null,r.createElement("main",{className:e.content},r.createElement("div",{className:e.appBarSpacer}),r.createElement(S.Z,{maxWidth:!1,className:e.container},r.createElement(I.rs,null,W().map((function(e,t){return r.createElement(I.AW,{key:t,path:e.path,exact:e.exact,component:e.component})})),r.createElement(I.AW,{component:function(){return r.createElement(A,{code:404},r.createElement(C.ZP,{container:!0,className:"Contact mainContainer MuiGrid-spacing-xs-3",style:{marginTop:64}},r.createElement(C.ZP,{item:!0,xs:12},r.createElement(b.Z,{variant:"h5",component:"h1"},"404 Страница не найдена"))))}}))))))}a.render(r.createElement(o.VK,null,r.createElement(F,null)),document.getElementById("app"))}},e=>{e.O(0,[216],(()=>(5798,e(e.s=5798)))),e.O()}]);
//# sourceMappingURL=main.710fb2b243a3ac110227.js.map