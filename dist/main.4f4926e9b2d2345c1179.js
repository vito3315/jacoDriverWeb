(self.webpackChunkreact_ssr=self.webpackChunkreact_ssr||[]).push([[179],{5152:(e,t,n)=>{var a=n(8433).Auth,r=n(9546).Reg,o=n(3498).ListOrders,i=n(1401).MapOrders,s=n(3543).Price,l=n(8868).Graph;e.exports=[{path:"/auth",exact:!0,component:a,title:"Авторизация",code:200},{path:"/registration",exact:!0,component:r,title:"Регистрация",code:200},{path:"/list_orders",exact:!0,component:o,title:"Список заказов",code:200},{path:"/map_orders",exact:!0,component:i,title:"Карта заказов",code:200},{path:"/price",exact:!0,component:s,title:"Расчет",code:200},{path:"/graph",exact:!0,component:l,title:"График работы",code:200}]},8433:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Auth:()=>T});var a=n(5861),r=n(5671),o=n(3144),i=n(7326),s=n(136),l=n(6215),c=n(1120),u=n(4942),d=n(7757),p=n.n(d),m=n(7294),h=n(5977),f=n(7109),g=n(156),y=n(5725),v=n(2642),Z=n(225),E=n(4345),x=n(4666),w=n(8979),k=n(7750),b=n(6408),S=n(8538),_=n(821),C=n(9062);var O=n(7563),I=(0,E.Z)({palette:{primary:{main:"#c03"}}}),D=(0,Z.Z)({paper:{display:"flex",flexDirection:"column",alignItems:"center"},avatar:{borderRadius:0,width:"100%",height:150,margin:0,backgroundColor:"#fff"},avatar2:{borderRadius:0,width:"100%",height:130,margin:0,backgroundColor:"#fff"},form:{width:"100%",marginTop:I.spacing(1)},submit:{margin:I.spacing(3,0,2)},textLink:{color:"#c03"}}),R=function(e){(0,s.Z)(I,e);var t,n,d,h,Z,E=(h=I,Z=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(h);if(Z){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,l.Z)(this,e)});function I(e){var t;return(0,r.Z)(this,I),t=E.call(this,e),(0,u.Z)((0,i.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/site/driver.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:O.stringify({type:e,data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){return setTimeout((function(){t.setState({is_load:!1})}),300),e})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"auth",module_name:"",is_load:!1,modalDialog:!1,dialogTitle:"",dialogText:""},t}return(0,o.Z)(I,[{key:"componentDidMount",value:(d=(0,a.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return d.apply(this,arguments)})},{key:"updateData",value:(n=(0,a.Z)(p().mark((function e(){var t,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point_id:this.state.point,showReady:!0===this.state.showReady?1:0},e.next=3,this.getData("get_orders",t);case 3:n=e.sent,this.setState({read:n.read,onstol:n.onstol,ordersQueue:n.prestol_new});case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"auth",value:(t=(0,a.Z)(p().mark((function e(){var t,n,a=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={login:document.getElementById("phone").value,pwd:document.getElementById("password").value},e.next=3,this.getData("auth",t);case 3:!1===(n=e.sent).st?setTimeout((function(){a.setState({modalDialog:!0,dialogTitle:"Предупреждение",dialogText:n.text})}),500):(localStorage.setItem("token",n.token),setTimeout((function(){window.location.pathname="/list_orders"}),300));case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return m.createElement(m.Fragment,null,m.createElement(_.Z,{className:this.state.classes.backdrop,open:this.state.is_load},m.createElement(C.Z,{color:"inherit"})),m.createElement(x.Z,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},m.createElement(S.Z,{id:"alert-dialog-title"},this.state.dialogTitle),m.createElement(k.Z,null,m.createElement(b.Z,{id:"alert-dialog-description"},this.state.dialogText)),m.createElement(w.Z,null,m.createElement(v.Z,{onClick:function(){e.setState({modalDialog:!1})},color:"primary",autoFocus:!0},"Хорошо"))),m.createElement(y.ZP,{container:!0,spacing:3,direction:"row",justifyContent:"center",alignItems:"center"},m.createElement(y.ZP,{item:!0,xs:12,sm:6,md:6,lg:4,xl:3},m.createElement("div",{className:this.state.classes.paper},m.createElement(f.Z,{className:this.state.classes.avatar},m.createElement("img",{alt:"Жако доставка роллов и пиццы",src:"../assets/img_other/Favikon.png",style:{height:"100%"}})),m.createElement("form",{className:this.state.classes.form,noValidate:!0},m.createElement(g.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,id:"phone",label:"Номер телефона",name:"phone",autoComplete:"phone",autoFocus:!0}),m.createElement(g.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,name:"password",label:"Пароль",type:"password",id:"password",autoComplete:"current-password"}),m.createElement(v.Z,{fullWidth:!0,variant:"contained",color:"primary",className:this.state.classes.submit,onClick:this.auth.bind(this)},"Войти"),m.createElement(y.ZP,{container:!0,style:{marginTop:10}},m.createElement(y.ZP,{item:!0,xs:!0},m.createElement("a",{href:"/registration",className:this.state.classes.textLink},"Восстановить пароль"))))))))}}]),I}(m.Component);function T(){var e=D(),t=(0,h.k6)();return m.createElement(R,{classes:e,history:t})}},8868:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Graph:()=>P});var a=n(5861),r=n(5671),o=n(3144),i=n(7326),s=n(136),l=n(6215),c=n(1120),u=n(4942),d=n(7757),p=n.n(d),m=n(7294),h=n(5977),f=n(225),g=n(4345),y=n(5725),v=n(821),Z=n(9062),E=n(2642),x=n(2318),w=n(6501),k=n(9573),b=n(8732),S=n(6926),_=n(7896),C=n(6011),O=n(3694);var I=n(7563),D=(0,g.Z)({palette:{primary:{main:"#c03"}}}),R=(0,f.Z)({formControl:{width:"100%"},selectEmpty:{marginTop:D.spacing(2)},tableCel:{textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},tableCelHead:{textAlign:"center",padding:15},customCel:{backgroundColor:"#bababa",textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},timePicker:{width:"100%"}}),T=function(e){(0,s.Z)(g,e);var t,n,d,h,f=(d=g,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(d);if(h){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,l.Z)(this,e)});function g(e){var t;return(0,r.Z)(this,g),t=f.call(this,e),(0,u.Z)((0,i.Z)(t),"getData",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("https://jacochef.ru/api/site/driver.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:I.stringify({type:e,data:JSON.stringify(t)})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,is_load:!1,data:[],dates:[],mounth:[],thisMounth:"",isOpen:!1},t}return(0,o.Z)(g,[{key:"componentDidMount",value:(n=(0,a.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getGraph();case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getGraph",value:(t=(0,a.Z)(p().mark((function e(){var t,n,a,r,o,i=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return""==(t=i.length>0&&void 0!==i[0]?i[0]:"")&&(n=new Date,a=n.getFullYear()+"-",a+=n.getMonth()+1,t=a),r={token:localStorage.getItem("token"),date:t},e.next=5,this.getData("getMyGraph",r);case 5:o=e.sent,this.setState({data:o.users,dates:o.all_dates,mounth:o.mounth,thisMounth:o.mounth.find((function(e){return e.day==t})).mounth,isOpen:!1});case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return m.createElement(m.Fragment,null,m.createElement(v.Z,{open:this.state.is_load},m.createElement(Z.Z,{color:"inherit"})),m.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}},m.createElement(E.Z,{onClick:function(){e.setState({isOpen:!0})}},this.state.thisMounth)),m.createElement(m.Fragment,null,m.createElement(x.ZP,{anchor:"bottom",open:this.state.isOpen,onClose:function(){e.setState({isOpen:!1})}},this.state.mounth.map((function(t,n){return m.createElement(E.Z,{key:n,onClick:e.getGraph.bind(e,t.day)},t.mounth)})))),m.createElement(y.ZP,{container:!0,spacing:3,style:{marginTop:10}},m.createElement(w.Z,{sx:{width:"100%",overflow:"hidden"}},m.createElement(_.Z,{sx:{maxHeight:window.screen.height-120}},m.createElement(k.Z,{stickyHeader:!0,"aria-label":"sticky table"},m.createElement(C.Z,null,m.createElement(O.Z,null,m.createElement(S.Z,{style:{width:150,height:30,textAlign:"center",border:"1px solid #e5e5e5"}}),this.state.dates.map((function(e,t){return m.createElement(S.Z,{key:t,style:{width:50,height:30,textAlign:"center",border:"1px solid #e5e5e5"}},e.day)}))),m.createElement(O.Z,null,m.createElement(S.Z,{style:{width:150,height:30,textAlign:"center",border:"1px solid #e5e5e5"}},"Сотрудник"),this.state.dates.map((function(e,t){return m.createElement(S.Z,{key:t,style:{width:50,height:30,textAlign:"center",border:"1px solid #e5e5e5"}},e.dow)})))),m.createElement(b.Z,null,this.state.data.map((function(e,t){return m.createElement(O.Z,{hover:!0,key:t},e.map((function(e,t){return m.createElement(S.Z,{key:t,style:0==t?{width:150,height:30}:{width:50,height:30,textAlign:"center",border:"1px solid #e5e5e5"}},0==t?e.user_name:"0"==e.min?"":e.hours)})))}))))))))}}]),g}(m.Component);function P(){var e=R(),t=(0,h.k6)();return m.createElement(T,{classes:e,history:t})}},3498:(e,t,n)=>{"use strict";n.r(t),n.d(t,{CardItemList:()=>R,ListOrders:()=>P});var a=n(5861),r=n(5671),o=n(3144),i=n(7326),s=n(136),l=n(6215),c=n(1120),u=n(4942),d=n(7462),p=n(5987),m=n(7757),h=n.n(m),f=n(7294),g=n(5977),y=n(1861),v=n(5725),Z=n(2658),E=n(2642),x=n(2318),w=n(1989),k=n(8999),b=n(821),S=n(9062),_=n(3707),C=["className"];function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.Z)(e);if(t){var r=(0,c.Z)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.Z)(this,n)}}var I=n(7563),D=(0,y.ZP)((function(e){var t=e.className,n=(0,p.Z)(e,C);return f.createElement(w.Z,(0,d.Z)({},n,{classes:{popper:t}}))}))((function(e){var t=e.theme;return(0,u.Z)({},"& .".concat(k.Z.tooltip),{backgroundColor:"#000",color:"#fff",marginTop:0,maxWidth:220,fontSize:t.typography.pxToRem(12),border:"1px solid #dadde9",borderRadius:5})})),R=function(e){(0,s.Z)(n,e);var t=O(n);function n(e){var a;return(0,r.Z)(this,n),a=t.call(this,e),(0,u.Z)((0,i.Z)(a),"_isMounted",!1),a.state={openTooltip:!1},a}return(0,o.Z)(n,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"finishOrder",value:function(e){confirm("Точно завершить заказ ?")&&this.props.actionOrder(e,3)}},{key:"cancelOrder",value:function(e){confirm("Отменить заказ ?")&&this.props.actionOrder(e,2)}},{key:"render",value:function(){var e=this,t=this.props.item,n="100%";return f.createElement("div",{className:"container"},f.createElement("div",{style:{display:"flex",flexDirection:"column",paddingBottom:10}},f.createElement(Z.Z,{style:{fontSize:20,color:"#000"},component:"span"},t.id_text)),f.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",paddingBottom:10}},0==parseInt(t.count_other)?null:f.createElement(Z.Z,{className:"textBold typeItems typeItemsBlue",style:{marginRight:5},component:"span"},"Роллы"),0==parseInt(t.count_pizza)?null:f.createElement(Z.Z,{className:"textBold typeItems typeItemsRed",style:{marginLeft:5,marginRight:5},component:"span"},"Пицца x",t.count_pizza),0==parseInt(t.count_drink)?null:f.createElement(D,{style:{marginTop:0},open:this.state.openTooltip,onClose:function(){e.setState({openTooltip:!1})},title:f.createElement(f.Fragment,null,t.drink_list.map((function(e,t){return f.createElement(Z.Z,{key:t,className:"text",style:{paddingBottom:5,paddingTop:2,color:"#fff"}},e.names)})))},f.createElement(Z.Z,{onClick:function(){e.setState({openTooltip:!0})},className:"textBold typeItems typeItemsGreen",style:{marginLeft:5,marginRight:5},component:"span"},"Напиток x",t.count_drink))),f.createElement("div",{style:{display:"flex",flexDirection:"column",width:n,paddingBottom:15}},f.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},f.createElement(Z.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000",paddingRight:5},component:"span"},"Адрес: "),f.createElement(Z.Z,{style:{fontSize:20,color:"#000"},component:"span"},t.addr)),f.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},0==t.pd.length||0==parseInt(t.pd)?null:f.createElement(f.Fragment,null,f.createElement(Z.Z,{className:"textBold",component:"span",style:{paddingRight:5}},"Пд:"),f.createElement(Z.Z,{className:"text",component:"span",style:{paddingRight:5}},t.pd,",")),0==t.et.length||0==parseInt(t.et)?null:f.createElement(f.Fragment,null,f.createElement(Z.Z,{className:"textBold",component:"span",style:{paddingRight:5}},"Эт: "),f.createElement(Z.Z,{className:"text",component:"span",style:{paddingRight:5}},t.et,",")),0==t.kv.length||0==parseInt(t.kv)?null:f.createElement(f.Fragment,null,f.createElement(Z.Z,{className:"textBold",component:"span",style:{paddingRight:5}},"Кв:"),f.createElement(Z.Z,{className:"text",component:"span",style:{paddingRight:5}},t.kv))),0==parseInt(t.fake_dom)?null:f.createElement(Z.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Домофон не работает"),f.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",paddingBottom:5,paddingTop:10}},f.createElement(Z.Z,{className:"textBold",style:{paddingRight:5}},"Ко времени: "),f.createElement(Z.Z,{className:"text"},t.need_time)),f.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},f.createElement(Z.Z,{className:"textBold",style:{paddingRight:5}},"Осталось: "),f.createElement(Z.Z,{className:"text"},t.to_time))),0==t.comment.length?null:f.createElement("div",{style:{flex:1,display:"flex",flexDirection:"row",flexWrap:"wrap",paddingBottom:5,width:n}},f.createElement(Z.Z,{className:"textBold",style:{paddingRight:5}},"Коммент: "),f.createElement(Z.Z,{className:"text"},t.comment)),f.createElement("div",{style:{flex:1,display:"flex",flexDirection:"row",flexWrap:"wrap",paddingBottom:5,width:n}},f.createElement(Z.Z,{className:"textBold",style:{paddingRight:5}},"Сумма: "),1==parseInt(t.online_pay)?f.createElement(Z.Z,{style:{fontSize:15,color:"#fc2847",fontWeight:"bold"}},"Оплачено"):f.createElement(Z.Z,{className:"text"},t.sum_order,"р.")),0==parseInt(t.sdacha)||1==parseInt(t.online_pay)?null:f.createElement("div",{style:{flex:1,display:"flex",flexDirection:"row",flexWrap:"wrap",paddingBottom:5,width:n}},f.createElement(Z.Z,{className:"textBold",style:{paddingRight:5}},"Сдача с: "),f.createElement(Z.Z,{className:"text"},t.sdacha,"р. ( ",t.sum_sdacha,"р. )")),0==parseInt(t.is_get)?f.createElement("div",{style:{display:"flex",flexDirection:"column",marginLeft:0,width:n,alignItems:"center",justifyContent:"center",paddingTop:10}},f.createElement("a",{className:"bntAction typeItemsGray",style:{width:"100%",marginBottom:10},href:"tel:"+t.number},t.number),f.createElement(E.Z,{className:"bntAction typeItemsGreen",style:{width:"100%"},onClick:this.props.actionOrder.bind(this,t.id,1)},"Взять")):1==parseInt(t.is_get)&&1==parseInt(t.is_my)?f.createElement("div",{style:{display:"flex",flexDirection:"column",width:n,alignItems:"center",justifyContent:"center",paddingTop:10}},f.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",width:n}},f.createElement(E.Z,{className:"bntAction typeItemsRed",style:{width:"40%",marginRight:5},onClick:this.cancelOrder.bind(this,t.id)},"Отменить"),f.createElement("a",{className:"bntAction",style:{width:"60%",marginLeft:5,backgroundColor:"#bababa"},href:"tel:"+t.number},t.number)),f.createElement(E.Z,{className:"bntAction typeItemsGreen",style:{width:n,marginTop:10},onClick:this.finishOrder.bind(this,t.id)},"Завершить")):f.createElement("div",{style:{display:"flex",flexDirection:"row",marginLeft:0,width:n,alignItems:"center",justifyContent:"center",paddingTop:10}},f.createElement(E.Z,{className:"bntAction typeItemsGray",style:{width:"100%",textAlign:"center"}},t.driver_name)))}}]),n}(f.PureComponent),T=function(e){(0,s.Z)(d,e);var t,n,l,c=O(d);function d(e){var t;return(0,r.Z)(this,d),t=c.call(this,e),(0,u.Z)((0,i.Z)(t),"timerId",null),(0,u.Z)((0,i.Z)(t),"_isMounted",!1),(0,u.Z)((0,i.Z)(t),"getData",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("https://jacochef.ru/api/site/driver.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:I.stringify({type:e,data:JSON.stringify(t)})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){console.log(e)}))})),t.state={history:t.props.history,module_name:"",is_load:!1,orders:[],is_open:!1,type:{id:-1,text:"Все заказы"},types:[{id:-1,text:"Все заказы"},{id:1,text:"Отмеченные"},{id:2,text:"Свободные"},{id:3,text:"В очереди"},{id:4,text:"Мои завешенные"},{id:5,text:"У других курьеров"}]},t}return(0,o.Z)(d,[{key:"componentWillUnmount",value:function(){this._isMounted=!1,clearInterval(this.timerId)}},{key:"componentDidMount",value:(l=(0,a.Z)(h().mark((function e(){var t,n,a=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(e){var t=e.message;console.log(t)},t=function(e){var t=e.coords,n=[t.latitude,t.longitude];console.log(n)},this._isMounted=!0,localStorage.getItem("token")&&localStorage.getItem("token").length>0||this.state.history.push("/Auth"),navigator.geolocation.getCurrentPosition(t,n,{enableHighAccuracy:!0}),this.timerId=setInterval((function(){a._isMounted?a.getOrders(!1,a.state.type.id):clearInterval(a.timerId)}),3e4),setTimeout((function(){a.getOrders()}),100);case 7:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"getOrders",value:(n=(0,a.Z)(h().mark((function e(){var t,n,a,r,o,i=this,s=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(s.length>0&&void 0!==s[0])||s[0],n=s.length>1&&void 0!==s[1]?s[1]:-1,t&&this.setState({is_load:!0,is_open:!1}),a=this.state.types.find((function(e){return parseInt(e.id)==parseInt(n)})),this.setState({type:a}),r={token:localStorage.getItem("token"),type:n},e.next=8,this.getData("get_orders_new",r);case 8:!1===(o=e.sent)||setTimeout((function(){i.setState({orders:o.orders,is_load:!1})}),1e3);case 10:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"actionOrder",value:(t=(0,a.Z)(h().mark((function e(t,n){var a,r,o,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({is_load:!0}),parseInt(n),a=function(e){var n=e.coords,a=n.latitude,r=n.longitude,o={token:localStorage.getItem("token"),order_id:t,lat:a,lon:r};fetch("https://jacochef.ru/api/site/driver.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:I.stringify({type:"checkPosition",data:JSON.stringify(o)})}).then((function(e){return e.json()})).then((function(e){console.log("res1",e)})).catch((function(e){console.log(e)}))},r=function(e){var t=e.message;console.log(t)},navigator.geolocation.getCurrentPosition(a,r,{enableHighAccuracy:!0}),o={token:localStorage.getItem("token"),id:t,type:n},e.next=5,this.getData("actionOrder",o);case 5:0==(i=e.sent).st?this.setState({showErr:!0,textErr:i.text,is_load:!1}):this.getOrders(!0,this.state.type.id);case 7:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return f.createElement(f.Fragment,null,f.createElement(b.Z,{open:this.state.is_load},f.createElement(S.Z,{color:"inherit"})),f.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingBottom:10}},f.createElement(E.Z,{onClick:function(){e.setState({is_open:!0})}},this.state.type.text),f.createElement(E.Z,{style:{marginRight:3},onClick:this.getOrders.bind(this,!0,this.state.type.id)},f.createElement(_.Z,null))),f.createElement(f.Fragment,null,f.createElement(x.ZP,{anchor:"bottom",open:this.state.is_open,onClose:function(){e.setState({is_open:!1})}},this.state.types.map((function(t,n){return f.createElement(E.Z,{key:n,onClick:e.getOrders.bind(e,!0,t.id)},t.text)})))),f.createElement(v.ZP,{container:!0,spacing:3},this.state.orders.map((function(t,n){return f.createElement(v.ZP,{item:!0,xs:12,sm:3,key:n},f.createElement(R,{item:t,actionOrder:e.actionOrder.bind(e)}))}))))}}]),d}(f.Component);function P(){var e=(0,g.k6)();return f.createElement(T,{history:e})}},1401:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MapOrders:()=>S});var a=n(5861),r=n(5671),o=n(3144),i=n(7326),s=n(136),l=n(6215),c=n(1120),u=n(4942),d=n(7757),p=n.n(d),m=n(7294),h=n(5977),f=n(5725),g=n(2642),y=n(2318),v=n(821),Z=n(9062),E=n(3498),x=n(3707),w=n(8112);var k=n(7563),b=function(e){(0,s.Z)(_,e);var t,n,d,h,b,S=(h=_,b=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(h);if(b){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,l.Z)(this,e)});function _(e){var t;return(0,r.Z)(this,_),t=S.call(this,e),(0,u.Z)((0,i.Z)(t),"timerId",null),(0,u.Z)((0,i.Z)(t),"_isMounted",!1),(0,u.Z)((0,i.Z)(t),"getData",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("https://jacochef.ru/api/site/driver.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:k.stringify({type:e,data:JSON.stringify(t)})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){console.log(e)}))})),t.state={history:t.props.history,module_name:"",is_load:!1,orders:[],home:null,is_open:!1,is_open_order:!1,openOrder:null,type:{id:-1,text:"Все заказы"},types:[{id:-1,text:"Все заказы"},{id:1,text:"Отмеченные"},{id:2,text:"Свободные"},{id:3,text:"В очереди"},{id:4,text:"Мои завешенные"},{id:5,text:"У других курьеров"}]},t}return(0,o.Z)(_,[{key:"componentWillUnmount",value:function(){this._isMounted=!1,clearInterval(this.timerId)}},{key:"componentDidMount",value:(d=(0,a.Z)(p().mark((function e(){var t,n,a=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(e){var t=e.message;console.log(t)},t=function(e){var t=e.coords,n=[t.latitude,t.longitude];console.log(n)},this._isMounted=!0,localStorage.getItem("token")&&localStorage.getItem("token").length>0||this.state.history.push("/Auth"),navigator.geolocation.getCurrentPosition(t,n,{enableHighAccuracy:!0}),this.timerId=setInterval((function(){a._isMounted?a.getOrders(!1,a.state.type.id):clearInterval(a.timerId)}),3e4),setTimeout((function(){a.getOrders()}),100);case 7:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"getOrders",value:(n=(0,a.Z)(p().mark((function e(){var t,n,a,r,o,i=this,s=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(s.length>0&&void 0!==s[0])||s[0],n=s.length>1&&void 0!==s[1]?s[1]:-1,t&&this.setState({is_load:!0,is_open:!1}),a=this.state.types.find((function(e){return parseInt(e.id)==parseInt(n)})),this.setState({type:a}),r={token:localStorage.getItem("token"),type:n},e.next=8,this.getData("get_orders_new",r);case 8:!1===(o=e.sent)||setTimeout((function(){i.setState({orders:o.orders,home:o.home,is_load:!1})}),1e3);case 10:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"actionOrder",value:(t=(0,a.Z)(p().mark((function e(t,n){var a,r,o,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({is_load:!0}),parseInt(n),a=function(e){var n=e.coords,a=n.latitude,r=n.longitude,o={token:localStorage.getItem("token"),order_id:t,lat:a,lon:r};fetch("https://jacochef.ru/api/site/driver.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:k.stringify({type:"checkPosition",data:JSON.stringify(o)})}).then((function(e){return e.json()})).then((function(e){console.log("res1",e)})).catch((function(e){console.log(e)}))},r=function(e){var t=e.message;console.log(t)},navigator.geolocation.getCurrentPosition(a,r,{enableHighAccuracy:!0}),o={token:localStorage.getItem("token"),id:t,type:n},e.next=5,this.getData("actionOrder",o);case 5:0==(i=e.sent).st?this.setState({showErr:!0,textErr:i.text,is_load:!1}):this.getOrders(!0,this.state.type.id);case 7:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"showOrder",value:function(e){this.setState({is_open_order:!0,openOrder:e})}},{key:"render",value:function(){var e=this;return m.createElement(m.Fragment,null,m.createElement(v.Z,{open:this.state.is_load},m.createElement(Z.Z,{color:"inherit"})),m.createElement("div",{style:{position:"absolute",zIndex:10,display:"flex",flexDirection:"row",justifyContent:"space-between",width:"100%",left:0}},m.createElement(g.Z,{style:{marginLeft:38},onClick:function(){e.setState({is_open:!0})}},this.state.type.text),m.createElement(g.Z,{style:{marginRight:3},onClick:this.getOrders.bind(this,!0,this.state.type.id)},m.createElement(x.Z,null))),m.createElement(m.Fragment,null,m.createElement(y.ZP,{anchor:"bottom",open:this.state.is_open,onClose:function(){e.setState({is_open:!1})}},this.state.types.map((function(t,n){return m.createElement(g.Z,{key:n,onClick:e.getOrders.bind(e,!0,t.id)},t.text)})))),m.createElement(m.Fragment,null,m.createElement(y.ZP,{anchor:"bottom",open:this.state.is_open_order,onClose:function(){e.setState({is_open_order:!1,openOrder:null})}},this.state.openOrder?m.createElement(E.CardItemList,{item:this.state.openOrder,actionOrder:this.actionOrder.bind(this)}):null)),m.createElement(f.ZP,{style:{zIndex:9,margin:-16}},this.state.home?m.createElement(w.Yy,null,m.createElement(w.D5,{style:{width:window.screen.width+60,height:window.screen.height-40},defaultState:{center:[this.state.home.latitude,this.state.home.longitude],zoom:11}},m.createElement(w.Zw,{options:{position:{top:60}}}),m.createElement(w.Ly,{options:{float:"right"}}),m.createElement(w.ah,{geometry:[this.state.home.latitude,this.state.home.longitude],options:{preset:"islands#blackDotIcon",iconColor:"black"}}),this.state.orders.map((function(t,n){return m.createElement(w.ah,{key:n,onClick:e.showOrder.bind(e,t),geometry:[t.xy.latitude,t.xy.longitude],properties:{iconCaption:1==parseInt(t.is_pred)?t.need_time:""},options:{preset:"islands#circleDotIcon",iconColor:0==parseInt(t.is_get)?parseInt(t.status_order)>1?"#3caa3c":"#bababa":1==parseInt(t.is_my)?"#2c75ff":t.color}})})))):null))}}]),_}(m.Component);function S(){var e=(0,h.k6)();return m.createElement(b,{history:e})}},3543:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Price:()=>R});var a=n(5861),r=n(5671),o=n(3144),i=n(7326),s=n(136),l=n(6215),c=n(1120),u=n(4942),d=n(7757),p=n.n(d),m=n(7294),h=n(5977),f=n(225),g=n(4345),y=n(5725),v=n(821),Z=n(9062),E=n(2658),x=n(156),w=n(4424),k=n(5344),b=n(6752),S=n(6447),_=n(8523);var C=n(7563),O=(0,g.Z)({palette:{primary:{main:"#c03"}}}),I=(0,f.Z)({formControl:{width:"100%"},selectEmpty:{marginTop:O.spacing(2)},tableCel:{textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},tableCelHead:{textAlign:"center",padding:15},customCel:{backgroundColor:"#bababa",textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},timePicker:{width:"100%"}}),D=function(e){(0,s.Z)(g,e);var t,n,d,h,f=(d=g,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(d);if(h){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,l.Z)(this,e)});function g(e){var t;return(0,r.Z)(this,g),t=f.call(this,e),(0,u.Z)((0,i.Z)(t),"getData",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("https://jacochef.ru/api/site/driver.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:C.stringify({type:e,data:JSON.stringify(t)})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,is_load:!1,date:new Date,allCount:0,bankCount:0,cashCount:0,bankSum:0,cashSum:0,myPrice:0,sdacha:0},t}return(0,o.Z)(g,[{key:"componentDidMount",value:(n=(0,a.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getPrice();case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"changeDate",value:function(e){var t=this;this.setState({date:e}),setTimeout((function(){t.getPrice()}),300)}},{key:"getPrice",value:(t=(0,a.Z)(p().mark((function e(){var t,n,a,r,o,i,s,l,c,u,d;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=new Date(this.state.date),c=l.getFullYear()+"-",c+=l.getMonth()+1+"-",c+=l.getDate(),u={token:localStorage.getItem("token"),date:c},e.next=7,this.getData("getMyPrice",u);case 7:d=e.sent,console.log("load res",d),this.setState({allCount:null!==(t=d.count)&&void 0!==t?t:0,bankCount:null!==(n=d.count_bank)&&void 0!==n?n:0,cashCount:null!==(a=d.count_cash)&&void 0!==a?a:0,bankSum:null!==(r=d.sum_bank)&&void 0!==r?r:0,cashSum:null!==(o=d.sum_cash)&&void 0!==o?o:0,myPrice:null!==(i=d.my_price)&&void 0!==i?i:0,sdacha:null!==(s=d.sdacha)&&void 0!==s?s:0});case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e,t=this;return m.createElement(m.Fragment,null,m.createElement(v.Z,{className:this.state.classes.backdrop,open:this.state.is_load},m.createElement(Z.Z,{color:"inherit"})),m.createElement(y.ZP,{container:!0,spacing:3},m.createElement(y.ZP,{item:!0,xs:12,sm:3,style:{marginTop:10}},m.createElement(k.Z,{dateAdapter:w.Z,locale:_.Z},m.createElement(S.Z,{spacing:3},m.createElement(b.Z,(e={label:"Дата",allowSameDateSelection:!0,showTodayButton:!0,startText:this.props.startText,endText:this.props.endText,value:this.props.value,inputFormat:"yyyy-MM-dd"},(0,u.Z)(e,"value",this.state.date),(0,u.Z)(e,"onChange",(function(e){t.changeDate(e)})),(0,u.Z)(e,"renderInput",(function(e){return m.createElement(x.Z,e)})),e)))),m.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",paddingTop:10}},m.createElement(E.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000",paddingRight:5},component:"span"},"Cумма нала:"),m.createElement(E.Z,{style:{fontSize:20,color:"#000"},component:"span"},this.state.cashSum,"р.")),m.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},m.createElement(E.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000",paddingRight:5},component:"span"},"Cумма безнала:"),m.createElement(E.Z,{style:{fontSize:20,color:"#000"},component:"span"},this.state.bankSum,"р.")),m.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},m.createElement(E.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000",paddingRight:5},component:"span"},"Заработал:"),m.createElement(E.Z,{style:{fontSize:20,color:"#000"},component:"span"},this.state.myPrice,"р.")),m.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",paddingBottom:10}},m.createElement(E.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000",paddingRight:5},component:"span"},"Сдача:"),m.createElement(E.Z,{style:{fontSize:20,color:"#000"},component:"span"},this.state.sdacha,"р.")),m.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},m.createElement(E.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000",paddingRight:5},component:"span"},"Количество по налу:"),m.createElement(E.Z,{style:{fontSize:20,color:"#000"},component:"span"},this.state.cashCount)),m.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},m.createElement(E.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000",paddingRight:5},component:"span"},"Количество по безналу:"),m.createElement(E.Z,{style:{fontSize:20,color:"#000"},component:"span"},this.state.bankCount)),m.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},m.createElement(E.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000",paddingRight:5},component:"span"},"Завершенных заказов:"),m.createElement(E.Z,{style:{fontSize:20,color:"#000"},component:"span"},this.state.allCount)))))}}]),g}(m.Component);function R(){var e=I(),t=(0,h.k6)();return m.createElement(D,{classes:e,history:t})}},9546:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Reg:()=>B});var a=n(5861),r=n(5671),o=n(3144),i=n(7326),s=n(136),l=n(6215),c=n(1120),u=n(4942),d=n(7757),p=n.n(d),m=n(7294),h=n(5977),f=n(7109),g=n(156),y=n(5725),v=n(2642),Z=n(225),E=n(4345),x=n(4436),w=n(5272),k=n(5162),b=n(4666),S=n(8979),_=n(7750),C=n(6408),O=n(8538),I=n(821),D=n(9062);var R=n(7563),T=(0,E.Z)({palette:{primary:{main:"#c03"}}}),P=(0,Z.Z)({paper:{display:"flex",flexDirection:"column",alignItems:"center"},avatar:{borderRadius:0,width:"100%",height:150,margin:0,backgroundColor:"#fff"},avatar2:{borderRadius:0,width:"100%",height:130,margin:0,backgroundColor:"#fff"},form:{width:"100%",marginTop:T.spacing(1)},submit:{margin:T.spacing(3,0,2)},backButton:{marginRight:T.spacing(1)},instructions:{marginTop:T.spacing(1),marginBottom:T.spacing(1)},textLink:{color:"#c03"}}),N=function(e){(0,s.Z)(T,e);var t,n,d,h,Z,E=(h=T,Z=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(h);if(Z){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,l.Z)(this,e)});function T(e){var t;return(0,r.Z)(this,T),t=E.call(this,e),(0,u.Z)((0,i.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/site/driver.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:R.stringify({type:e,data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){return setTimeout((function(){t.setState({is_load:!1})}),300),e})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"auth",module_name:"",is_load:!1,modalDialog:!1,dialogTitle:"",dialogText:"",activeStep:0,steps:["Телефон","Подтверждение"],phone:"",code:"",pwd:""},t}return(0,o.Z)(T,[{key:"componentDidMount",value:(d=(0,a.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return d.apply(this,arguments)})},{key:"updateData",value:(n=(0,a.Z)(p().mark((function e(){var t,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point_id:this.state.point,showReady:!0===this.state.showReady?1:0},e.next=3,this.getData("get_orders",t);case 3:n=e.sent,this.setState({read:n.read,onstol:n.onstol,ordersQueue:n.prestol_new});case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"nextStep",value:(t=(0,a.Z)(p().mark((function e(){var t,n,a,r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=this.state.activeStep){e.next=8;break}return t={login:document.getElementById("phone").value,pwd:document.getElementById("password").value},e.next=4,this.getData("get_sms",t);case 4:0==(n=e.sent).st?this.setState({modalDialog:!0,dialogTitle:"Предупреждение",dialogText:n.text}):this.setState({activeStep:this.state.activeStep+1,phone:t.login,pwd:t.pwd}),e.next=14;break;case 8:if(1!=this.state.activeStep){e.next=14;break}return a={login:this.state.phone,pwd:this.state.pwd,code:document.getElementById("code").value},e.next=12,this.getData("send_code",a);case 12:0==(r=e.sent).st?this.setState({modalDialog:!0,dialogTitle:"Предупреждение",dialogText:r.text}):(localStorage.setItem("token",r.token),this.state.history.push("/list_orders"),location.reload());case 14:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"enterNextStep",value:function(e){13==e.charCode&&this.nextStep()}},{key:"render",value:function(){var e=this;return m.createElement(m.Fragment,null,m.createElement(I.Z,{className:this.state.classes.backdrop,open:this.state.is_load},m.createElement(D.Z,{color:"inherit"})),m.createElement(b.Z,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},m.createElement(O.Z,{id:"alert-dialog-title"},this.state.dialogTitle),m.createElement(_.Z,null,m.createElement(C.Z,{id:"alert-dialog-description"},this.state.dialogText)),m.createElement(S.Z,null,m.createElement(v.Z,{onClick:function(){e.setState({modalDialog:!1})},color:"primary",autoFocus:!0},"Хорошо"))),m.createElement(y.ZP,{container:!0,spacing:3,direction:"row",justifyContent:"center",alignItems:"center"},m.createElement(y.ZP,{item:!0,xs:12,sm:6,md:6,lg:4,xl:3},m.createElement("div",{className:this.state.classes.paper},m.createElement(f.Z,{className:this.state.classes.avatar,style:{marginBottom:10}},m.createElement("img",{alt:"Жако доставка роллов и пиццы",src:"../assets/img_other/Favikon.png",style:{height:"100%"}})),m.createElement(x.Z,{activeStep:this.state.activeStep,alternativeLabel:!0,style:{width:"100%"}},this.state.steps.map((function(e){return m.createElement(w.Z,{key:e},m.createElement(k.Z,null,e))}))),m.createElement("div",{className:this.state.classes.form,style:{width:"100%"}},0==this.state.activeStep?m.createElement(m.Fragment,null,m.createElement(g.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,id:"phone",label:"Номер телефона",name:"phone",autoComplete:"phone",autoFocus:!0}),m.createElement(g.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,name:"password",label:"Новый пароль",type:"password",id:"password",autoComplete:"current-password"})):null,1==this.state.activeStep?m.createElement(g.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,id:"code",label:"Код из смс",name:"code",autoComplete:"code",autoFocus:!0}):null,2==this.state.activeStep?m.createElement(g.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,name:"password",label:"Пароль",type:"password",id:"password",autoComplete:"current-password",onKeyPress:this.enterNextStep.bind(this)}):null,m.createElement(v.Z,{fullWidth:!0,variant:"contained",color:"primary",className:this.state.classes.submit,onClick:this.nextStep.bind(this)},"Дальше"),m.createElement(y.ZP,{container:!0,style:{marginTop:10}},m.createElement(y.ZP,{item:!0,xs:!0},m.createElement("a",{href:"/auth",className:this.state.classes.textLink},"Вернуться к авторизации"))))))))}}]),T}(m.Component);function B(){var e=P(),t=(0,h.k6)();return m.createElement(N,{classes:e,history:t})}},5798:(e,t,n)=>{"use strict";var a=n(7294),r=n(3935),o=n(3727),i=n(5861),s=n(5671),l=n(3144),c=n(7326),u=n(136),d=n(6215),p=n(1120),m=n(4942),h=n(7757),f=n.n(h),g=n(6010),y=n(225),v=n(6720),Z=n(3720),E=n(4386),x=n(2440),w=n(799),k=n(8584),b=n(2658),S=n(6867),_=n(4065),C=n(5725),O=n(326),I=n(4345),D=n(1807),R=n(5977),T=n(6655),P=n(5152),N=n.n(P);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var W=n(7563),j=(0,I.Z)({palette:{primary:{main:"#c03"},def:{main:"#353b48",secondary:"#fff"}}}),z=(0,y.Z)({root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},j.mixins.toolbar),appBar:{zIndex:j.zIndex.drawer+1,transition:j.transitions.create(["width","margin"],{easing:j.transitions.easing.sharp,duration:j.transitions.duration.leavingScreen})},appBarShift:{marginLeft:300,width:"calc(100% - ".concat(300,"px)"),transition:j.transitions.create(["width","margin"],{easing:j.transitions.easing.sharp,duration:j.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:300,transition:j.transitions.create("width",{easing:j.transitions.easing.sharp,duration:j.transitions.duration.enteringScreen})},drawerPaperClose:(0,m.Z)({overflowX:"hidden",transition:j.transitions.create("width",{easing:j.transitions.easing.sharp,duration:j.transitions.duration.leavingScreen}),width:j.spacing(7)},j.breakpoints.up("sm"),{width:j.spacing(9)}),appBarSpacer:j.mixins.toolbar,content:{flexGrow:1,overflow:"auto"},container:{paddingTop:j.spacing(1),paddingBottom:j.spacing(4),width:"100%"},paper:{padding:j.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},heading:{fontSize:j.typography.pxToRem(15),fontWeight:j.typography.fontWeightRegular}}),M=function(e){(0,u.Z)(y,e);var t,n,r,h=(n=y,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,p.Z)(n);if(r){var a=(0,p.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,d.Z)(this,e)});function y(e){var t;return(0,s.Z)(this,y),t=h.call(this,e),(0,m.Z)((0,c.Z)(t),"getData",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("https://jacochef.ru/api/site/driver.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:W.stringify({type:e,data:JSON.stringify(t)})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"header",title:"",open:!1,menu:[],full_menu:[],left:!1,phone_man:"",phone_center:"",phone_dir:""},t}return(0,l.Z)(y,[{key:"componentDidMount",value:(t=(0,i.Z)(f().mark((function e(){var t,n,a,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/"!=(t=window.location.pathname)&&""!=t||(this.state.history.push("/list_orders"),window.location.reload()),n=N().find((function(e){return t.includes(e.path)})),this.setState({title:n.title}),window.document.title=n.title,a={token:localStorage.getItem("token")},e.next=8,this.getData("getPointInfo",a);case 8:r=e.sent,console.log(r),r&&this.setState({phone_man:r.phone_man,phone_center:r.phone_new,phone_dir:r.phone_upr});case 11:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"handleDrawerOpen",value:function(){this.setState({open:!0})}},{key:"handleDrawerClose",value:function(){this.setState({open:!1})}},{key:"logOut",value:function(){localStorage.removeItem("token"),this.state.history.push("/auth"),location.reload()}},{key:"goTo",value:function(e){this.setState({title:e}),window.document.title=e}},{key:"render",value:function(){var e=this;return a.createElement(a.Fragment,null,a.createElement(Z.Z,{className:(0,g.Z)(this.state.classes.appBar,this.state.open&&this.state.classes.appBarShift)},a.createElement(E.Z,{className:this.state.classes.toolbar},a.createElement(S.Z,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:this.handleDrawerOpen.bind(this),className:(0,g.Z)(this.state.classes.menuButton,this.state.open&&this.state.classes.menuButtonHidden)},a.createElement(O.Z,null)),a.createElement(b.Z,{component:"h1",variant:"h6",id:"GlobalHeader",color:"inherit",noWrap:!0,className:this.state.classes.title},this.state.title))),a.createElement(a.Fragment,null,a.createElement(T.Z,{anchor:"left",open:this.state.open,onClose:function(){e.setState({open:!1})},onOpen:function(){e.setState({open:!0})}},a.createElement(x.Z,{style:{width:"100%"}},a.createElement(w.ZP,{button:!0,onClick:this.goTo.bind(this,"Список заказов")},a.createElement(o.OL,{to:"/list_orders"},a.createElement(k.Z,{primary:"Список заказов"}))),a.createElement(w.ZP,{button:!0,onClick:this.goTo.bind(this,"Карта заказов")},a.createElement(o.OL,{to:"/map_orders"},a.createElement(k.Z,{primary:"Карта заказов"}))),a.createElement(w.ZP,{button:!0,onClick:this.goTo.bind(this,"Расчет")},a.createElement(o.OL,{to:"/price"},a.createElement(k.Z,{primary:"Расчет"}))),a.createElement(w.ZP,{button:!0,onClick:this.goTo.bind(this,"График работы")},a.createElement(o.OL,{to:"/graph"},a.createElement(k.Z,{primary:"График работы"}))),a.createElement(w.ZP,{button:!0},a.createElement("a",{href:"tel:"+this.state.phone_dir},a.createElement(k.Z,{primary:"Директор"}))),a.createElement(w.ZP,{button:!0},a.createElement("a",{href:"tel:"+this.state.phone_man},a.createElement(k.Z,{primary:"Менеджер"}))),a.createElement(w.ZP,{button:!0},a.createElement("a",{href:"tel:"+this.state.phone_center},a.createElement(k.Z,{primary:"Контакт-центр"}))),a.createElement(w.ZP,{button:!0,onClick:this.logOut.bind(this)},a.createElement(k.Z,{primary:"Выйти"}))))))}}]),y}(a.Component);function A(e){var t=e.code,n=e.children;return a.createElement(R.AW,{render:function(e){var a=e.staticContext;return a&&(a.status=t),n}})}function F(){var e=z(),t=(0,R.k6)(),n=!0;return"/auth/"!=t.location.pathname&&"/auth"!=t.location.pathname&&"/registration/"!=t.location.pathname&&"/registration"!=t.location.pathname||(n=!1),a.createElement(D.Z,{theme:j},a.createElement("div",{className:e.root},n?a.createElement(a.Fragment,null,a.createElement(v.ZP,null),a.createElement(M,{classes:e,history:t})):null,a.createElement("main",{className:e.content},a.createElement("div",{className:e.appBarSpacer}),a.createElement(_.Z,{maxWidth:!1,className:e.container},a.createElement(R.rs,null,N().map((function(e,t){return a.createElement(R.AW,{key:t,path:e.path,exact:e.exact,component:e.component})})),a.createElement(R.AW,{component:function(){return a.createElement(A,{code:404},a.createElement(C.ZP,{container:!0,className:"Contact mainContainer MuiGrid-spacing-xs-3",style:{marginTop:64}},a.createElement(C.ZP,{item:!0,xs:12},a.createElement(b.Z,{variant:"h5",component:"h1"},"404 Страница не найдена"))))}}))))))}r.render(a.createElement(o.VK,null,a.createElement(F,null)),document.getElementById("app"))}},e=>{e.O(0,[216],(()=>(5798,e(e.s=5798)))),e.O()}]);
//# sourceMappingURL=main.4f4926e9b2d2345c1179.js.map