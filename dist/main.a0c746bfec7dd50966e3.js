(self.webpackChunkreact_ssr=self.webpackChunkreact_ssr||[]).push([[179],{5152:(e,t,n)=>{var r=n(8433).Auth,o=n(9546).Reg,a=n(3498).ListOrders,i=n(1401).MapOrders,l=n(3543).Price,s=n(8868).Graph,c=n(9658).Settings;e.exports=[{path:"/",exact:!0,component:a,title:"Список заказов",code:200},{path:"/auth",exact:!0,component:r,title:"Авторизация",code:200},{path:"/registration",exact:!0,component:o,title:"Регистрация",code:200},{path:"/list_orders",exact:!0,component:a,title:"Список заказов",code:200},{path:"/map_orders",exact:!0,component:i,title:"Карта заказов",code:200},{path:"/price",exact:!0,component:l,title:"Расчет",code:200},{path:"/graph",exact:!0,component:s,title:"График работы",code:200},{path:"/settings",exact:!0,component:c,title:"Настройки",code:200}]},8433:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Auth:()=>W});var r=n(5861),o=n(5671),a=n(3144),i=n(7326),l=n(136),s=n(6215),c=n(1120),d=n(4942),u=n(4687),p=n.n(u),h=n(7294),m=n(5977),f=n(7109),g=n(1095),y=n(5725),E=n(6914),w=n(225),v=n(9617),Z=n(4666),x=n(8979),_=n(7750),k=n(6408),b=n(7645),S=n(4567),C=n(9062),O=n(8811),I=n.n(O);var T=n(7563),D=(0,v.Z)({palette:{primary:{main:"#c03"}}}),P=(0,w.Z)({paper:{display:"flex",flexDirection:"column",alignItems:"center"},avatar:{borderRadius:0,width:"100%",height:150,margin:0,backgroundColor:"#fff"},avatar2:{borderRadius:0,width:"100%",height:130,margin:0,backgroundColor:"#fff"},form:{width:"100%",marginTop:D.spacing(1)},submit:{margin:D.spacing(3,0,2)},textLink:{color:"#c03"}}),R=function(e){(0,l.Z)(O,e);var t,n,u,m,w,v=(m=O,w=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(m);if(w){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,s.Z)(this,e)});function O(e){var t;return(0,o.Z)(this,O),t=v.call(this,e),(0,d.Z)((0,i.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch(I().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:T.stringify({type:e,data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){return setTimeout((function(){t.setState({is_load:!1})}),300),e})).catch((function(e){alert("Плохая связь с интернетом или ошибка на сервере"),console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"auth",module_name:"",is_load:!1,modalDialog:!1,dialogTitle:"",dialogText:""},t}return(0,a.Z)(O,[{key:"componentDidMount",value:(u=(0,r.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"http:"!=window.location.protocol&&"http"!=window.location.protocol||"localhost"==window.location.hostname||(console.log("goTo","https://jacodriver.ru/"+window.location.pathname),window.location.href="https://jacodriver.ru/"+window.location.pathname);case 1:case"end":return e.stop()}}),e)}))),function(){return u.apply(this,arguments)})},{key:"updateData",value:(n=(0,r.Z)(p().mark((function e(){var t,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point_id:this.state.point,showReady:!0===this.state.showReady?1:0},e.next=3,this.getData("get_orders",t);case 3:n=e.sent,this.setState({read:n.read,onstol:n.onstol,ordersQueue:n.prestol_new});case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"auth",value:(t=(0,r.Z)(p().mark((function e(){var t,n,r=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={login:document.getElementById("phone").value,pwd:document.getElementById("password").value},e.next=3,this.getData("auth",t);case 3:!1===(n=e.sent).st?setTimeout((function(){r.setState({modalDialog:!0,dialogTitle:"Предупреждение",dialogText:n.text})}),500):(localStorage.setItem("token",n.token),setTimeout((function(){window.location.pathname="/list_orders"}),300));case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(S.Z,{className:this.state.classes.backdrop,open:this.state.is_load},h.createElement(C.Z,{color:"inherit"})),h.createElement(Z.Z,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(b.Z,{id:"alert-dialog-title"},this.state.dialogTitle),h.createElement(_.Z,null,h.createElement(k.Z,{id:"alert-dialog-description"},this.state.dialogText)),h.createElement(x.Z,null,h.createElement(E.Z,{onClick:function(){e.setState({modalDialog:!1})},color:"primary",autoFocus:!0},"Хорошо"))),h.createElement(y.ZP,{container:!0,spacing:3,direction:"row",justifyContent:"center",alignItems:"center"},h.createElement(y.ZP,{item:!0,xs:12,sm:6,md:6,lg:4,xl:3},h.createElement("div",{className:this.state.classes.paper},h.createElement(f.Z,{className:this.state.classes.avatar},h.createElement("img",{alt:"Жако доставка роллов и пиццы",src:"../assets/img_other/Favikon.png",style:{height:"100%"}})),h.createElement("form",{className:this.state.classes.form,noValidate:!0},h.createElement(g.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,id:"phone",label:"Номер телефона",name:"phone",autoComplete:"phone",autoFocus:!0}),h.createElement(g.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,name:"password",label:"Пароль",type:"password",id:"password",autoComplete:"current-password"}),h.createElement(E.Z,{fullWidth:!0,variant:"contained",color:"primary",className:this.state.classes.submit,onClick:this.auth.bind(this)},"Войти"),h.createElement(y.ZP,{container:!0,style:{marginTop:10}},h.createElement(y.ZP,{item:!0,xs:!0},h.createElement("a",{href:"/registration",className:this.state.classes.textLink},"Восстановить пароль"))))))))}}]),O}(h.Component);function W(){var e=P(),t=(0,m.k6)();return h.createElement(R,{classes:e,history:t})}},8868:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Graph:()=>F});var r=n(5861),o=n(5671),a=n(3144),i=n(7326),l=n(136),s=n(6215),c=n(1120),d=n(4942),u=n(4687),p=n.n(u),h=n(7294),m=n(5977),f=n(225),g=n(9617),y=n(5725),E=n(4567),w=n(9062),v=n(6914),Z=n(2318),x=n(6501),_=n(9573),k=n(8732),b=n(6926),S=n(7896),C=n(6011),O=n(3694),I=n(4666),T=n(8979),D=n(7750),P=n(2658),R=n(7598),W=n(8811),z=n.n(W);var N=n(7563),B=(0,g.Z)({palette:{primary:{main:"#c03"}}}),j=(0,f.Z)({formControl:{width:"100%"},selectEmpty:{marginTop:B.spacing(2)},tableCel:{textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},tableCelHead:{textAlign:"center",padding:15},customCel:{backgroundColor:"#bababa",textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},timePicker:{width:"100%"}}),A=function(e){(0,l.Z)(B,e);var t,n,u,m,f,g,W=(f=B,g=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(f);if(g){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,s.Z)(this,e)});function B(e){var t;return(0,o.Z)(this,B),t=W.call(this,e),(0,d.Z)((0,i.Z)(t),"getData",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(z().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:N.stringify({type:e,data:JSON.stringify(t)})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){alert("Плохая связь с интернетом или ошибка на сервере"),console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,thisDate:"",is_load:!1,data:[],dates:[],mounth:[],thisMounth:"",errs:{orders:[],err_cum:[]},showErrOrders:!1,isOpen:!1,showErrOrder:null,showErrOrderCum:null,textErr1:"",textErr2:""},t}return(0,a.Z)(B,[{key:"componentDidMount",value:(m=(0,r.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"http:"!=window.location.protocol&&"http"!=window.location.protocol||"localhost"==window.location.hostname||(console.log("goTo","https://jacodriver.ru/"+window.location.pathname),window.location.href="https://jacodriver.ru/"+window.location.pathname),this.getGraph();case 2:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"getGraph",value:(u=(0,r.Z)(p().mark((function e(){var t,n,r,o,a,i,l=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return""==(t=l.length>0&&void 0!==l[0]?l[0]:"")&&(n=new Date,r=n.getMonth()+1,r=parseInt(r)>9?r:"0"+r,o=n.getFullYear()+"-",t=o+=r),a={token:localStorage.getItem("token"),date:t},e.next=5,this.getData("getMyGraph",a);case 5:i=e.sent,this.setState({data:i.users,dates:i.all_dates,mounth:i.mounth,thisMounth:i.mounth.find((function(e){return e.day==t})).mounth,isOpen:!1,thisDate:t,errs:i.errs});case 7:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"false_err",value:(n=(0,r.Z)(p().mark((function e(t){var n,r,o=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.click||(this.click=!0),e.next=3,AsyncStorage.getItem("token");case 3:return e.t0=e.sent,e.t1=this.state.textErr1,e.t2=t.id,e.t3=t.row_id,n={token:e.t0,text:e.t1,err_id:e.t2,row_id:e.t3},e.next=10,this.getData("save_false_cash_orders",n);case 10:0==(r=e.sent).st?alert(r.text):(this.setState({showErrOrders:!1,showErrOrder:null,showErrOrderCum:null}),this.getGraph(this.state.thisDate)),setTimeout((function(){o.click=!1}),300);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"false_err_1",value:(t=(0,r.Z)(p().mark((function e(t){var n,r,o=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.click||(this.click=!0),e.next=3,AsyncStorage.getItem("token");case 3:return e.t0=e.sent,e.t1=this.state.textErr2,e.t2=t.id,n={token:e.t0,text:e.t1,id:e.t2},e.next=9,this.getData("save_false_cash_cum",n);case 9:0==(r=e.sent).st?alert(r.text):(this.setState({showErrOrders:!1,showErrOrder:null,showErrOrderCum:null}),this.getGraph(this.state.thisDate)),setTimeout((function(){o.click=!1}),300);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(E.Z,{open:this.state.is_load},h.createElement(w.Z,{color:"inherit"})),h.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}},h.createElement(v.Z,{onClick:function(){e.setState({isOpen:!0})}},this.state.thisMounth)),h.createElement(I.Z,{open:this.state.showErrOrders,onClose:function(){e.setState({showErrOrders:!1,showErrOrder:null,showErrOrderCum:null})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(D.Z,null,this.state.showErrOrder?h.createElement(h.Fragment,null,h.createElement(P.Z,{style:{color:"#000",fontSize:15}},"Ошибка по заказу №",this.state.showErrOrder.order_id),h.createElement("div",{style:{display:"flex",flexDirection:"row",width:"auto",height:"auto",flexWrap:"wrap",flexShrink:1,paddingTop:20}},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Дата заказа: "),h.createElement(P.Z,{style:{fontSize:15,color:"#000"}},this.state.showErrOrder.date_time_order)),h.createElement("div",{style:{display:"flex",flexDirection:"row",width:"auto",height:"auto",flexWrap:"wrap",flexShrink:1,paddingTop:20}},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Ошибка заказа: "),h.createElement(P.Z,{style:{fontSize:15,color:"#000"}},this.state.showErrOrder.order_desc)),h.createElement("div",{style:{display:"flex",flexDirection:"row",width:"auto",height:"auto",flexWrap:"wrap",flexShrink:1,paddingTop:20}},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Позиция: "),h.createElement(P.Z,{style:{fontSize:15,color:"#000"}},this.state.showErrOrder.item_name)),h.createElement("div",{style:{display:"flex",flexDirection:"row",width:"auto",height:"auto",flexWrap:"wrap",flexShrink:1,paddingTop:20}},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Ошибка: "),h.createElement(P.Z,{style:{fontSize:15,color:"#000"}},this.state.showErrOrder.pr_name)),h.createElement("div",{style:{display:"flex",flexDirection:"row",width:"auto",height:"auto",flexWrap:"wrap",flexShrink:1,paddingTop:20}},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Сумма: "),h.createElement(P.Z,{style:{fontSize:15,color:"#000"}},this.state.showErrOrder.my_price)),0==this.state.showErrOrder.imgs.length?null:h.createElement("div",{style:{display:"flex",flexDirection:"row",width:"auto",height:"auto",flexWrap:"wrap",flexShrink:1,paddingTop:20}},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Фото")),this.state.showErrOrder.imgs.map((function(e,t){return h.createElement("img",{key:t,style:{width:"100%",height:"auto"},src:"https://jacochef.ru/src/img/err_orders/uploads/"+e})})),this.state.showErrOrder.new_text_1&&0!=this.state.showErrOrder.new_text_1.length?h.createElement("div",{style:{display:"flex",flexDirection:"row",width:"auto",height:"auto",flexWrap:"wrap",flexShrink:1,paddingTop:20}},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Причина обжалования:"),h.createElement(P.Z,{style:{fontSize:15,color:"#000"}},this.state.showErrOrder.new_text_1)):0==parseInt(this.state.showErrOrder.is_edit)?null:h.createElement("div",{style:{display:"flex",flexDirection:"row",width:"auto",height:"auto",flexWrap:"wrap",flexShrink:1,paddingTop:20}},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Причина обжалования:"),h.createElement(R.Z,{style:{width:"100%",minHeight:50},value:this.state.textErr1,onChange:function(t){e.setState({textErr1:t.target.value})}}),h.createElement(v.Z,{onClick:this.false_err.bind(this,this.state.showErrOrder),style:{color:"#fff",marginTop:10,width:"100%",backgroundColor:"#c03"}},"Обжаловать")),this.state.showErrOrder.new_text_2&&0!=this.state.showErrOrder.new_text_2.length?h.createElement("div",{style:{display:"flex",flexDirection:"row",width:"auto",height:"auto",flexWrap:"wrap",flexShrink:1,paddingTop:20}},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Ответ обжалования:"),h.createElement(P.Z,{style:{fontSize:15,color:"#000"}},this.state.showErrOrder.new_text_2)):null):null,this.state.showErrOrderCum?h.createElement(h.Fragment,null,h.createElement(P.Z,{style:{color:"#000",fontSize:15}},"Ошибка №",this.state.showErrOrderCum.id),h.createElement("div",{style:{display:"flex",flexDirection:"row",width:"auto",height:"auto",flexWrap:"wrap",flexShrink:1,paddingTop:20}},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Дата время ошибки: "),h.createElement(P.Z,{style:{fontSize:15,color:"#000"}},this.state.showErrOrderCum.date_time_fine)),h.createElement("div",{style:{display:"flex",flexDirection:"row",width:"auto",height:"auto",flexWrap:"wrap",flexShrink:1,paddingTop:20}},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Ошибка: "),h.createElement(P.Z,{style:{fontSize:15,color:"#000"}},this.state.showErrOrderCum.fine_name)),h.createElement("div",{style:{display:"flex",flexDirection:"row",width:"auto",height:"auto",flexWrap:"wrap",flexShrink:1,paddingTop:20}},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Сумма: "),h.createElement(P.Z,{style:{fontSize:15,color:"#000"}},this.state.showErrOrderCum.price)),0==this.state.showErrOrderCum.imgs.length?null:h.createElement("div",{style:{display:"flex",flexDirection:"row",width:"auto",height:"auto",flexWrap:"wrap",flexShrink:1,paddingTop:20}},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Фото")),this.state.showErrOrderCum.imgs.map((function(e,t){return h.createElement("img",{key:t,style:{width:"100%",height:"auto"},src:"https://jacochef.ru/src/img/fine_err/uploads/"+e})})),this.state.showErrOrderCum.text_one&&0!=this.state.showErrOrderCum.text_one.length?h.createElement("div",{style:{display:"flex",flexDirection:"row",width:"auto",height:"auto",flexWrap:"wrap",flexShrink:1,paddingTop:20}},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Причина обжалования:"),h.createElement(P.Z,{style:{fontSize:15,color:"#000"}},this.state.showErrOrderCum.text_one)):0==parseInt(this.state.showErrOrderCum.is_edit)?null:h.createElement("div",{style:{display:"flex",flexDirection:"row",width:"auto",height:"auto",flexWrap:"wrap",flexShrink:1,paddingTop:20}},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Причина обжалования:"),h.createElement(R.Z,{style:{width:"100%",minHeight:50},value:this.state.textErr2,onChange:function(t){e.setState({textErr2:t.target.value})}}),h.createElement(v.Z,{onClick:this.false_err_1.bind(this,this.state.showErrOrderCum),style:{color:"#fff",marginTop:10,width:"100%",backgroundColor:"#c03"}},"Обжаловать")),this.state.showErrOrderCum.text_two&&0!=this.state.showErrOrder.text_two.length?h.createElement("div",{style:{display:"flex",flexDirection:"row",width:"auto",height:"auto",flexWrap:"wrap",flexShrink:1,paddingTop:20}},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Ответ обжалования:"),h.createElement(P.Z,{style:{fontSize:15,color:"#000"}},this.state.showErrOrderCum.text_two)):null):null),h.createElement(T.Z,null,h.createElement(v.Z,{onClick:function(){e.setState({showErrOrders:!1,showErrOrder:null,showErrOrderCum:null})},color:"primary"},"Закрыть"))),h.createElement(h.Fragment,null,h.createElement(Z.ZP,{anchor:"bottom",open:this.state.isOpen,onClose:function(){e.setState({isOpen:!1})}},this.state.mounth.map((function(t,n){return h.createElement(v.Z,{key:n,onClick:e.getGraph.bind(e,t.day)},t.mounth)})))),h.createElement(y.ZP,{container:!0,spacing:3},h.createElement(y.ZP,{item:!0,xs:12},h.createElement(x.Z,{sx:{width:"100%",overflow:"hidden"}},h.createElement(S.Z,{sx:{maxHeight:600},id:"tableGraph"},h.createElement(_.Z,{stickyHeader:!0,"aria-label":"sticky table"},h.createElement(C.Z,null,h.createElement(O.Z,null,h.createElement(b.Z,{style:{width:200,height:30,textAlign:"center",border:"1px solid #e5e5e5"}}),this.state.dates.map((function(e,t){return h.createElement(b.Z,{key:t,style:{width:50,height:30,textAlign:"center",border:"1px solid #e5e5e5"}},e.day)}))),h.createElement(O.Z,null,h.createElement(b.Z,{style:{width:200,height:30,textAlign:"center",border:"1px solid #e5e5e5"}},"Сотрудник"),this.state.dates.map((function(e,t){return h.createElement(b.Z,{key:t,style:{width:50,height:30,textAlign:"center",border:"1px solid #e5e5e5"}},e.dow)})))),h.createElement(k.Z,null,this.state.data.map((function(e,t){return h.createElement(O.Z,{hover:!0,key:t},e.map((function(e,t){return h.createElement(b.Z,{key:t,style:0==t?{width:200,height:30}:{width:50,height:30,textAlign:"center",border:"1px solid #e5e5e5"}},0==t?e.user_name:"0"==e.min?"":e.hours)})))})))))))),h.createElement(y.ZP,{container:!0,spacing:3,style:{paddingTop:20}},h.createElement(y.ZP,{item:!0,xs:12},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Ошибки по заказам"),h.createElement(x.Z,null,h.createElement(S.Z,null,h.createElement(_.Z,null,h.createElement(C.Z,null,h.createElement(O.Z,null,h.createElement(b.Z,null,"Заказ"),h.createElement(b.Z,null,"Дата заказа"),h.createElement(b.Z,null,"Ошибка"),h.createElement(b.Z,null,"Довоз"),h.createElement(b.Z,null,"Сумма"))),h.createElement(k.Z,null,this.state.errs.orders.map((function(t,n){return h.createElement(O.Z,{hover:!0,key:n,onClick:function(){e.setState({showErrOrders:!0,showErrOrder:t})}},h.createElement(b.Z,null,t.order_id),h.createElement(b.Z,null,t.date_time_order),h.createElement(b.Z,null,t.pr_name),h.createElement(b.Z,null,parseInt(t.new_order_id)>0?"+":" "),h.createElement(b.Z,null,t.my_price+" р."))}))))))),h.createElement(y.ZP,{item:!0,xs:12,style:{paddingTop:20}},h.createElement(P.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Ошибки по камерам"),h.createElement(x.Z,null,h.createElement(S.Z,null,h.createElement(_.Z,null,h.createElement(C.Z,null,h.createElement(O.Z,null,h.createElement(b.Z,null,"#"),h.createElement(b.Z,null,"Дата время совершения ошибки"),h.createElement(b.Z,null,"Ошибка"),h.createElement(b.Z,null,"Сумма"))),h.createElement(k.Z,null,this.state.errs.err_cum.map((function(t,n){return h.createElement(O.Z,{hover:!0,key:n,onClick:function(){e.setState({showErrOrders:!0,showErrOrderCum:t})}},h.createElement(b.Z,null,t.id),h.createElement(b.Z,null,t.date_time_fine),h.createElement(b.Z,null,t.fine_name),h.createElement(b.Z,null,t.price+" р."))})))))))))}}]),B}(h.Component);function F(){var e=j(),t=(0,m.k6)();return h.createElement(A,{classes:e,history:t})}},3498:(e,t,n)=>{"use strict";n.r(t),n.d(t,{CardItemList:()=>R,ListOrders:()=>z});var r=n(5861),o=n(5671),a=n(3144),i=n(7326),l=n(136),s=n(6215),c=n(1120),d=n(4942),u=n(7462),p=n(5987),h=n(4687),m=n.n(h),f=n(7294),g=n(5977),y=n(948),E=n(5725),w=n(2658),v=n(6914),Z=n(2318),x=n(1023),_=n(8999),k=n(4567),b=n(9062),S=n(3707),C=n(8811),O=n.n(C),I=["className"];function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var o=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var D=n(7563),P=(0,y.ZP)((function(e){var t=e.className,n=(0,p.Z)(e,I);return f.createElement(x.Z,(0,u.Z)({},n,{classes:{popper:t}}))}))((function(e){var t=e.theme;return(0,d.Z)({},"& .".concat(_.Z.tooltip),{backgroundColor:"#000",color:"#fff",marginTop:0,maxWidth:220,fontSize:t.typography.pxToRem(12),border:"1px solid #dadde9",borderRadius:5})})),R=function(e){(0,l.Z)(n,e);var t=T(n);function n(e){var r;return(0,o.Z)(this,n),r=t.call(this,e),(0,d.Z)((0,i.Z)(r),"_isMounted",!1),r.state={openTooltip:!1,is_load:!1},r}return(0,a.Z)(n,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"finishOrder",value:function(e){confirm("Точно завершить заказ ?")&&this.props.actionOrder(e,3)}},{key:"cancelOrder",value:function(e){confirm("Отменить заказ ?")&&this.props.actionOrder(e,2)}},{key:"checkFakeOrder",value:function(e){var t=this;this.setState({is_load:!0}),setTimeout((function(){t.setState({is_load:!1})}),5e3),navigator.geolocation.getCurrentPosition((function(n){var r=n.coords,o=r.latitude,a=r.longitude,i={token:localStorage.getItem("token"),order_id:e,lat:o,lon:a};fetch("https://jacochef.ru/api/site/driver.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:D.stringify({type:"checkFakeOrder",data:JSON.stringify(i)})}).then((function(e){return e.json()})).then((function(e){console.log("res1",e),!1===e.st?alert(e.text):alert("Успешно"),setTimeout((function(){t.setState({is_load:!1})}),500)})).catch((function(e){console.log(e)}))}),(function(e){e.message,alert("Не удалось определить местоположение")}),{enableHighAccuracy:!0})}},{key:"fakeOrder",value:function(e){confirm("Клиент точно не вышел на свзяь ?")&&this.checkFakeOrder(e)}},{key:"render",value:function(){var e=this,t=this.props.item,n="100%";return f.createElement("div",{className:"container"},f.createElement(k.Z,{open:this.state.is_load,style:{zIndex:99}},f.createElement(b.Z,{color:"inherit"})),f.createElement("div",{style:{display:"flex",flexDirection:"column",paddingBottom:10}},f.createElement(w.Z,{style:{fontSize:20,color:"#000"},component:"span"},t.id_text)),f.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",paddingBottom:10}},0==parseInt(t.count_other)?null:f.createElement(w.Z,{className:"textBold typeItems typeItemsBlue",style:{marginRight:5},component:"span"},"Роллы"),0==parseInt(t.count_pizza)?null:f.createElement(w.Z,{className:"textBold typeItems typeItemsRed",style:{marginLeft:5,marginRight:5},component:"span"},"Пицца x",t.count_pizza),0==parseInt(t.count_drink)?null:f.createElement(P,{style:{marginTop:0},open:this.state.openTooltip,onClose:function(){e.setState({openTooltip:!1})},title:f.createElement(f.Fragment,null,t.drink_list.map((function(e,t){return f.createElement(w.Z,{key:t,className:"text",style:{paddingBottom:5,paddingTop:2,color:"#fff"}},e.names)})))},f.createElement(w.Z,{onClick:function(){e.setState({openTooltip:!0})},className:"textBold typeItems typeItemsGreen",style:{marginLeft:5,marginRight:5},component:"span"},"Напиток x",t.count_drink))),f.createElement("div",{style:{display:"flex",flexDirection:"column",width:n,paddingBottom:15}},f.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},f.createElement(w.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000",paddingRight:5},component:"span"},"Адрес: "),f.createElement(w.Z,{style:{fontSize:20,color:"#000"},component:"span"},t.addr)),f.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},0==t.pd.length||0==parseInt(t.pd)?null:f.createElement(f.Fragment,null,f.createElement(w.Z,{className:"textBold",component:"span",style:{paddingRight:5}},"Пд:"),f.createElement(w.Z,{className:"text",component:"span",style:{paddingRight:5}},t.pd,",")),0==t.et.length||0==parseInt(t.et)?null:f.createElement(f.Fragment,null,f.createElement(w.Z,{className:"textBold",component:"span",style:{paddingRight:5}},"Эт: "),f.createElement(w.Z,{className:"text",component:"span",style:{paddingRight:5}},t.et,",")),0==t.kv.length||0==parseInt(t.kv)?null:f.createElement(f.Fragment,null,f.createElement(w.Z,{className:"textBold",component:"span",style:{paddingRight:5}},"Кв:"),f.createElement(w.Z,{className:"text",component:"span",style:{paddingRight:5}},t.kv))),0==parseInt(t.fake_dom)?f.createElement(w.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Домофон не работает"):null,f.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",paddingBottom:5,paddingTop:10}},f.createElement(w.Z,{className:"textBold",style:{paddingRight:5}},"Ко времени: "),f.createElement(w.Z,{className:"text"},t.need_time)),1!==parseInt(t.status_order)?null:f.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},f.createElement(w.Z,{className:"textBold",style:{paddingRight:5}},"Начнут готовить: "),f.createElement(w.Z,{className:"text"},t.time_start_order)),6!==parseInt(t.status_order)?null:f.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},f.createElement(w.Z,{className:"textBold",style:{paddingRight:5}},"Отдали: "),f.createElement(w.Z,{className:"text"},t.close_date_time_order)),6==parseInt(t.status_order)?null:f.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},f.createElement(w.Z,{className:"textBold",style:{paddingRight:5}},"Осталось: "),f.createElement(w.Z,{className:"text"},t.to_time))),0==t.comment.length?null:f.createElement("div",{style:{flex:1,display:"flex",flexDirection:"row",flexWrap:"wrap",paddingBottom:5,width:n}},f.createElement(w.Z,{className:"textBold",style:{paddingRight:5}},"Коммент: "),f.createElement(w.Z,{className:"text"},t.comment)),0==parseInt(t.is_delete)?null:f.createElement("div",{style:{flex:1,display:"flex",flexDirection:"row",flexWrap:"wrap",paddingBottom:5,width:n}},f.createElement(w.Z,{className:"textBold",style:{paddingRight:5}},"Причина удаления: "),f.createElement(w.Z,{className:"text"},t.delete_reason)),f.createElement("div",{style:{flex:1,display:"flex",flexDirection:"row",flexWrap:"wrap",paddingBottom:5,width:n}},f.createElement(w.Z,{className:"textBold",style:{paddingRight:5}},"Сумма: "),1==parseInt(t.online_pay)?f.createElement(w.Z,{style:{fontSize:15,color:"#fc2847",fontWeight:"bold"}},"Оплачено"):f.createElement(w.Z,{className:"text"},t.sum_order,"р.")),0==parseInt(t.sdacha)||1==parseInt(t.online_pay)?null:f.createElement("div",{style:{flex:1,display:"flex",flexDirection:"row",flexWrap:"wrap",paddingBottom:5,width:n}},f.createElement(w.Z,{className:"textBold",style:{paddingRight:5}},"Сдача с: "),f.createElement(w.Z,{className:"text"},t.sdacha,"р. ( ",t.sum_sdacha,"р. )")),0==parseInt(t.is_get)?f.createElement("div",{style:{display:"flex",flexDirection:"column",marginLeft:0,width:n,alignItems:"center",justifyContent:"center",paddingTop:20}},f.createElement("a",{className:"bntAction typeItemsGray",style:{width:"100%",marginBottom:10},href:"tel:"+t.number},t.number),f.createElement(v.Z,{className:"bntAction typeItemsGreen",style:{width:"100%"},onClick:this.props.actionOrder.bind(this,t.id,1)},"Взять")):1==parseInt(t.is_get)&&1==parseInt(t.is_my)?f.createElement("div",{style:{display:"flex",flexDirection:"column",width:n,alignItems:"center",justifyContent:"center",paddingTop:20}},f.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",width:n}},6==parseInt(t.status_order)?null:f.createElement(v.Z,{className:"bntAction typeItemsRed",style:{width:"40%",marginRight:5},onClick:this.cancelOrder.bind(this,t.id)},"Отменить"),f.createElement("a",{className:"bntAction",style:{width:6!=parseInt(t.status_order)?"60%":"100%",marginLeft:5,backgroundColor:"#bababa"},href:"tel:"+t.number},t.number)),6==parseInt(t.status_order)?null:f.createElement(v.Z,{className:"bntAction typeItemsGreen",style:{width:n,marginTop:20},onClick:this.finishOrder.bind(this,t.id)},"Завершить"),6==parseInt(t.status_order)?null:f.createElement(v.Z,{className:"bntAction typeItemsYellow",style:{width:n,marginTop:20},onClick:this.fakeOrder.bind(this,t.id)},"Клиент не вышел на связь")):f.createElement("div",{style:{display:"flex",flexDirection:"column",marginLeft:0,width:n,alignItems:"center",justifyContent:"center",paddingTop:20}},f.createElement(v.Z,{className:"bntAction typeItemsGray",style:{width:"100%",textAlign:"center"}},t.driver_name),f.createElement("a",{className:"bntAction typeItemsGray",style:{width:"100%",textAlign:"center",marginTop:20,color:"#000"},href:"tel:"+t.driver_login},t.driver_login)))}}]),n}(f.PureComponent),W=function(e){(0,l.Z)(h,e);var t,n,s,c,u,p=T(h);function h(e){var t;return(0,o.Z)(this,h),t=p.call(this,e),(0,d.Z)((0,i.Z)(t),"timerId",null),(0,d.Z)((0,i.Z)(t),"timerId2",null),(0,d.Z)((0,i.Z)(t),"_isMounted",!1),(0,d.Z)((0,i.Z)(t),"getData",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(O().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:D.stringify({type:e,data:JSON.stringify(t)})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){console.log(e)}))})),t.state={history:t.props.history,module_name:"",is_load:!1,del_orders:[],orders:[],is_open:!1,type:{id:1,text:"Активные"},types:[{id:1,text:"Активные"},{id:3,text:"Предзаказы"},{id:2,text:"Мои отмеченные"},{id:5,text:"У других курьеров"},{id:6,text:"Мои завершенные"}],driver_need_gps:!1,limit:""},t}return(0,a.Z)(h,[{key:"componentWillUnmount",value:function(){this._isMounted=!1,clearInterval(this.timerId),clearInterval(this.timerId2)}},{key:"componentDidMount",value:(u=(0,r.Z)(m().mark((function e(){var t,n,r=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(e){var t=e.message;console.log(t)},t=function(e){var t=e.coords,n=[t.latitude,t.longitude];console.log(n)},this._isMounted=!0,"http:"!=window.location.protocol&&"http"!=window.location.protocol||"localhost"==window.location.hostname||(window.location.href="https://jacodriver.ru/"+window.location.pathname),localStorage.getItem("token")&&localStorage.getItem("token").length>0||(this.state.history.push("/auth"),window.location.reload()),navigator.geolocation.getCurrentPosition(t,n,{enableHighAccuracy:!0}),this.getOrders(!1,this.state.type.id),this.save_position(),this.timerId2=setInterval((function(){r._isMounted?r.save_position():clearInterval(r.timerId2)}),12e4),setTimeout((function(){r.getOrders()}),100);case 10:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"getOrders",value:(c=(0,r.Z)(m().mark((function e(){var t,n,r,o,a,i=this,l=arguments;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(l.length>0&&void 0!==l[0])||l[0],n=l.length>1&&void 0!==l[1]?l[1]:1,t&&this.setState({is_load:!0,is_open:!1}),r=this.state.types.find((function(e){return parseInt(e.id)==parseInt(n)})),this.setState({type:r}),o={token:localStorage.getItem("token"),type:n,is_map:0},e.next=8,this.getData("get_orders_v5",o);case 8:!1===(a=e.sent)||(this.timerId&&0!=this.timerId||0==a.update_interval||(this.timerId=setInterval((function(){i._isMounted?i.getOrders(!1,i.state.type.id):clearInterval(i.timerId)}),1e3*parseInt(a.update_interval))),setTimeout((function(){var e=[];1==n&&(e=a.free_orders),2==n&&(e=a.my_orders),5==n&&(e=a.other_orders),3==n&&(e=a.pred_orders),6==n&&(e=a.my_finish),i.setState({driver_need_gps:a.driver_need_gps,del_orders:a.arr_del_list,orders:e,is_load:!1,limit:a.limit})}),300));case 10:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"save_position",value:(s=(0,r.Z)(m().mark((function e(){var t,n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(e){var t=e.message;console.log(t)},t=function(e){var t=e.coords,n=t.latitude,r=t.longitude,o={token:localStorage.getItem("token"),lat:n,lon:r};fetch("https://jacochef.ru/api/site/driver.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:D.stringify({type:"savePosition",data:JSON.stringify(o)})}).then((function(e){return e.json()})).then((function(e){console.log("res1",e)})).catch((function(e){console.log(e)}))},navigator.geolocation.getCurrentPosition(t,n,{enableHighAccuracy:!0});case 3:case"end":return e.stop()}}),e)}))),function(){return s.apply(this,arguments)})},{key:"actionOrder",value:(n=(0,r.Z)(m().mark((function e(t,n){var r,o,a,i,l,s;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(e){e.message,1!=parseInt(this.state.driver_need_gps)||alert("Чтобы осуществлять доставку заказов, надо разрешить определение местоположения")},r=function(e){e.coords},navigator.geolocation.getCurrentPosition(r,o,{enableHighAccuracy:!0}),this.setState({is_load:!0}),3==parseInt(n)&&(a=function(e){var n=e.coords,r=n.latitude,o=n.longitude,a={token:localStorage.getItem("token"),order_id:t,lat:r,lon:o};fetch("https://jacochef.ru/api/site/driver.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:D.stringify({type:"checkPosition",data:JSON.stringify(a)})}).then((function(e){return e.json()})).then((function(e){console.log("res1",e)})).catch((function(e){console.log(e)}))},i=function(e){var t=e.message;console.log(t),alert("Не удалось опеределить местоположение")},navigator.geolocation.getCurrentPosition(a,i,{enableHighAccuracy:!0})),l={token:localStorage.getItem("token"),id:t,type:n,appToken:localStorage.getItem("appToken")&&localStorage.getItem("appToken").length>0?localStorage.getItem("appToken"):""},e.next=8,this.getData("actionOrder",l);case 8:0==(s=e.sent).st?(alert(s.text),this.setState({is_load:!1})):this.getOrders(!0,this.state.type.id);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"is_show_del_orders",value:(t=(0,r.Z)(m().mark((function e(){var t,n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],this.state.del_orders.map((function(e,n){t.push(e.id)})),n={token:localStorage.getItem("token"),idList:t},e.next=5,this.getData("check_close_orders",n);case 5:e.sent,this.setState({del_orders:[]});case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return f.createElement(f.Fragment,null,f.createElement(k.Z,{open:this.state.is_load},f.createElement(b.Z,{color:"inherit"})),f.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},f.createElement(v.Z,{onClick:function(){e.setState({is_open:!0})}},this.state.type.text),f.createElement(v.Z,{style:{marginRight:3},onClick:this.getOrders.bind(this,!0,this.state.type.id)},f.createElement(S.Z,null))),f.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",paddingBottom:10}},f.createElement(w.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000"},component:"span"},this.state.limit)),f.createElement(f.Fragment,null,f.createElement(Z.ZP,{anchor:"bottom",open:this.state.del_orders.length>0,onClose:this.is_show_del_orders.bind(this)},f.createElement(w.Z,{style:{fontSize:20,paddingTop:10,paddingBottom:10,color:"#000",textAlign:"center",fontWeight:"bold"},component:"h6"},"Удаленные заказы"),f.createElement("div",{style:{height:300,width:"100%",overflow:"auto",padding:20,paddingTop:10}},this.state.del_orders.map((function(e,t){return f.createElement("div",{key:t,style:{display:"flex",flexDirection:"column"}},f.createElement(w.Z,{style:{fontSize:15,color:"#000"},component:"span"},"Удаленный заказ #",e.id),f.createElement(w.Z,{style:{fontSize:15,paddingBottom:20,color:"#000"},component:"span"},"Адрес: ",e.addr))}))),f.createElement(v.Z,{onClick:this.is_show_del_orders.bind(this)},"Хорошо"))),f.createElement(f.Fragment,null,f.createElement(Z.ZP,{anchor:"bottom",open:this.state.is_open,onClose:function(){e.setState({is_open:!1})}},this.state.types.map((function(t,n){return f.createElement(v.Z,{key:n,onClick:e.getOrders.bind(e,!0,t.id)},t.text)})))),f.createElement(E.ZP,{container:!0,spacing:3},this.state.orders.map((function(t,n){return f.createElement(E.ZP,{item:!0,xs:12,sm:3,key:n},f.createElement(R,{item:t,actionOrder:e.actionOrder.bind(e)}))}))))}}]),h}(f.Component);function z(){var e=(0,g.k6)();return f.createElement(W,{history:e})}},1401:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MapOrders:()=>C});var r=n(5861),o=n(5671),a=n(3144),i=n(7326),l=n(136),s=n(6215),c=n(1120),d=n(4942),u=n(4687),p=n.n(u),h=n(7294),m=n(5977),f=n(5725),g=n(6914),y=n(2318),E=n(4567),w=n(9062),v=n(3498),Z=n(3707),x=n(2658),_=n(8811),k=n.n(_);var b=n(7563),S=function(e){(0,l.Z)(I,e);var t,n,u,m,_,S,C,O=(S=I,C=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(S);if(C){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,s.Z)(this,e)});function I(e){var t;return(0,o.Z)(this,I),t=O.call(this,e),(0,d.Z)((0,i.Z)(t),"timerId",null),(0,d.Z)((0,i.Z)(t),"timerId2",null),(0,d.Z)((0,i.Z)(t),"_isMounted",!1),(0,d.Z)((0,i.Z)(t),"map",null),(0,d.Z)((0,i.Z)(t),"getData",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(k().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:b.stringify({type:e,data:JSON.stringify(t)})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){console.log(e)}))})),t.state={history:t.props.history,module_name:"",is_load:!1,del_orders:[],orders:[],home:null,is_open:!1,is_open_order:!1,showItems:[],type:{id:1,text:"Активные"},types:[{id:1,text:"Активные"},{id:2,text:"Мои отмеченные"},{id:5,text:"У других курьеров"}],rotate:!0,driver_need_gps:!1,limit:"",is_open_home:!1},t}return(0,a.Z)(I,[{key:"componentWillUnmount",value:function(){this._isMounted=!1,clearInterval(this.timerId),clearInterval(this.timerId2)}},{key:"componentDidMount",value:(_=(0,r.Z)(p().mark((function e(){var t,n,r=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(e){var t=e.message;console.log(t)},t=function(e){var t=e.coords,n=[t.latitude,t.longitude];console.log(n)},this._isMounted=!0,"http:"!=window.location.protocol&&"http"!=window.location.protocol||"localhost"==window.location.hostname||(window.location.href="https://jacodriver.ru/"+window.location.pathname),localStorage.getItem("token")&&localStorage.getItem("token").length>0||(this.state.history.push("/auth"),window.location.reload()),navigator.geolocation.getCurrentPosition(t,n,{enableHighAccuracy:!0}),this.getOrders(!1,this.state.type.id),this.save_position(),this.timerId2=setInterval((function(){r._isMounted?r.save_position():clearInterval(r.timerId2)}),12e4);case 9:case"end":return e.stop()}}),e,this)}))),function(){return _.apply(this,arguments)})},{key:"save_position",value:(m=(0,r.Z)(p().mark((function e(){var t,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(e){var t=e.message;console.log(t)},t=function(e){var t=e.coords,n=t.latitude,r=t.longitude,o={token:localStorage.getItem("token"),lat:n,lon:r};fetch("https://jacochef.ru/api/site/driver.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:b.stringify({type:"savePosition",data:JSON.stringify(o)})}).then((function(e){return e.json()})).then((function(e){console.log("res1",e)})).catch((function(e){console.log(e)}))},navigator.geolocation.getCurrentPosition(t,n,{enableHighAccuracy:!0});case 3:case"end":return e.stop()}}),e)}))),function(){return m.apply(this,arguments)})},{key:"getOrders",value:(u=(0,r.Z)(p().mark((function e(){var t,n,r,o,a,i=this,l=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(l.length>0&&void 0!==l[0])||l[0],n=l.length>1&&void 0!==l[1]?l[1]:1,t&&this.setState({is_load:!0,is_open:!1}),r=this.state.types.find((function(e){return parseInt(e.id)==parseInt(n)})),this.setState({type:r}),o={token:localStorage.getItem("token"),type:n,is_map:1},e.next=8,this.getData("get_orders_v5",o);case 8:!1===(a=e.sent)||(this.timerId&&0!=this.timerId||0==a.update_interval||(this.timerId=setInterval((function(){i._isMounted?i.getOrders(!1,i.state.type.id):clearInterval(i.timerId)}),1e3*parseInt(a.update_interval))),setTimeout((function(){var e=[];1==n&&(e=a.free_orders),2==n&&(e=a.my_orders),5==n&&(e=a.other_orders),i.setState({driver_need_gps:a.driver_need_gps,del_orders:a.arr_del_list,orders:e,home:a.home,is_load:!1,limit:a.limit});var t=new ymaps.ObjectManager;if(i.map){var r={type:"FeatureCollection",features:[]};r.features.push({type:"Feature",id:-1,options:{preset:"islands#blackDotIcon",iconColor:"black"},geometry:{type:"Point",coordinates:[a.home.latitude,a.home.longitude]}}),e.map((function(e){r.features.push({type:"Feature",id:e.id,options:{preset:6==parseInt(e.status_order)?"islands#blueCircleDotIconWithCaption":"islands#circleDotIcon",iconColor:e.point_color?e.point_color:e.color},properties:{iconCaption:e.point_text},geometry:{type:"Point",coordinates:[e.xy.latitude,e.xy.longitude]}})})),i.map.geoObjects.removeAll(),t.add(r),i.map.geoObjects.add(t)}else ymaps.ready((function(){i.map=new ymaps.Map("map",{center:[a.home.latitude,a.home.longitude],zoom:11},{searchControlProvider:"yandex#search"});var n={type:"FeatureCollection",features:[]};n.features.push({type:"Feature",id:-1,options:{preset:"islands#blackDotIcon",iconColor:"black"},geometry:{type:"Point",coordinates:[a.home.latitude,a.home.longitude]}}),e.map((function(e){n.features.push({type:"Feature",id:e.id,options:{preset:6==parseInt(e.status_order)?"islands#blueCircleDotIconWithCaption":"islands#circleDotIcon",iconColor:e.point_color?e.point_color:e.color},properties:{iconCaption:e.point_text},geometry:{type:"Point",coordinates:[e.xy.latitude,e.xy.longitude]}})})),t.add(n),i.map.geoObjects.add(t)}));t.objects.events.add(["click"],(function(e){var t=e.get("objectId");if(console.log("order_id",t),-1==t||"-1"==t)i.setState({is_open_home:!0});else{var n=i.state.orders.find((function(e){return parseInt(e.id)==parseInt(t)}));n&&i.showOrder(n)}}))}),300));case 10:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"actionOrder",value:(n=(0,r.Z)(p().mark((function e(t,n){var r,o,a,i,l,s;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(e){e.message,1!=parseInt(this.state.driver_need_gps)||alert("Чтобы осуществлять доставку заказов, надо разрешить определение местоположения")},r=function(e){e.coords},navigator.geolocation.getCurrentPosition(r,o,{enableHighAccuracy:!0}),this.setState({is_load:!0}),this.setState({is_open_order:!1,showItems:[]}),3==parseInt(n)&&(a=function(e){var n=e.coords,r=n.latitude,o=n.longitude,a={token:localStorage.getItem("token"),order_id:t,lat:r,lon:o};fetch("https://jacochef.ru/api/site/driver.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:b.stringify({type:"checkPosition",data:JSON.stringify(a)})}).then((function(e){return e.json()})).then((function(e){console.log("res1",e)})).catch((function(e){console.log(e)}))},i=function(e){var t=e.message;console.log(t),alert("Не удалось опеределить местоположение")},navigator.geolocation.getCurrentPosition(a,i,{enableHighAccuracy:!0})),l={token:localStorage.getItem("token"),id:t,type:n,appToken:localStorage.getItem("appToken")&&localStorage.getItem("appToken").length>0?localStorage.getItem("appToken"):""},e.next=9,this.getData("actionOrder",l);case 9:0==(s=e.sent).st?(alert(s.text),this.setState({is_load:!1})):(1==parseInt(s.action_centered_map)&&this.map.setCenter([this.state.home.latitude,this.state.home.longitude],11),this.getOrders(!0,this.state.type.id));case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"showOrder",value:function(e){var t=this.state.orders;t=t.filter((function(t){return t.xy.latitude==e.xy.latitude&&t.xy.longitude==e.xy.longitude})),this.setState({is_open_order:!0,showItems:t})}},{key:"stateHome",value:function(){var e=this;navigator.geolocation.getCurrentPosition((function(t){var n=t.coords,r=n.latitude,o=n.longitude,a={token:localStorage.getItem("token"),lat:r,lon:o};fetch("https://jacochef.ru/api/site/driver.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:b.stringify({type:"checkPositionHome",data:JSON.stringify(a)})}).then((function(e){return e.json()})).then((function(t){console.log("res1",t),e.closeSS()})).catch((function(e){console.log(e)}))}),(function(e){e.message,1!=parseInt(this.state.driver_need_gps)||alert("Чтобы отметиться на точке, надо разрешить определение местоположения")}),{enableHighAccuracy:!0})}},{key:"closeSS",value:function(){this.setState({is_open_home:!1})}},{key:"is_show_del_orders",value:(t=(0,r.Z)(p().mark((function e(){var t,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],this.state.del_orders.map((function(e,n){t.push(e.id)})),n={token:localStorage.getItem("token"),idList:t},e.next=5,this.getData("check_close_orders",n);case 5:e.sent,this.setState({del_orders:[]});case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(E.Z,{open:this.state.is_load},h.createElement(w.Z,{color:"inherit"})),h.createElement("div",{style:{position:"absolute",zIndex:10,display:"flex",flexDirection:"row",justifyContent:"space-between",width:"90%",left:"5%",bottom:50,backgroundColor:"#000",opacity:.5,borderRadius:60}},h.createElement(g.Z,{style:{marginLeft:38,color:1==this.state.type.id?"green":"#fff",fontWeight:"bold"},onClick:this.getOrders.bind(this,!0,1)},"Активные"),h.createElement(g.Z,{style:{color:2==this.state.type.id?"green":"#fff",fontWeight:"bold"},onClick:this.getOrders.bind(this,!0,2)},"Мои"),h.createElement(g.Z,{style:{color:5==this.state.type.id?"green":"#fff",fontWeight:"bold"},onClick:this.getOrders.bind(this,!0,5)},"У других"),h.createElement(g.Z,{style:{marginRight:3},onClick:this.getOrders.bind(this,!0,this.state.type.id)},h.createElement(Z.Z,{style:{color:"#fff"}}))),h.createElement("div",{style:{position:"absolute",zIndex:10,display:"flex",flexDirection:"row",justifyContent:"center",width:"100%",left:0,bottom:90}},h.createElement(x.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000"},component:"span"},this.state.limit)),h.createElement(h.Fragment,null,h.createElement(y.ZP,{anchor:"bottom",open:this.state.del_orders.length>0,onClose:this.is_show_del_orders.bind(this)},h.createElement(x.Z,{style:{fontSize:20,paddingTop:10,paddingBottom:10,color:"#000",textAlign:"center",fontWeight:"bold"},component:"h6"},"Удаленные заказы"),h.createElement("div",{style:{height:300,width:"100%",overflow:"auto",padding:20,paddingTop:10}},this.state.del_orders.map((function(e,t){return h.createElement("div",{key:t,style:{display:"flex",flexDirection:"column"}},h.createElement(x.Z,{style:{fontSize:15,color:"#000"},component:"span"},"Удаленный заказ #",e.id),h.createElement(x.Z,{style:{fontSize:15,paddingBottom:20,color:"#000"},component:"span"},"Адрес: ",e.addr))}))),h.createElement(g.Z,{onClick:this.is_show_del_orders.bind(this)},"Хорошо"))),h.createElement(h.Fragment,null,h.createElement(y.ZP,{anchor:"bottom",open:this.state.is_open,onClose:function(){e.setState({is_open:!1})}},this.state.types.map((function(t,n){return h.createElement(g.Z,{key:n,onClick:e.getOrders.bind(e,!0,t.id)},t.text)})))),h.createElement(h.Fragment,null,h.createElement(y.ZP,{anchor:"bottom",open:this.state.is_open_order,onClose:function(){e.setState({is_open_order:!1,showItems:[]})}},this.state.showItems.map((function(t,n){return h.createElement(v.CardItemList,{key:n,item:t,actionOrder:e.actionOrder.bind(e)})})))),h.createElement(h.Fragment,null,h.createElement(y.ZP,{anchor:"bottom",open:this.state.is_open_home,onClose:function(){e.setState({is_open_home:!1})}},h.createElement(g.Z,{className:"bntAction typeItemsGreen",style:{width:"100%",margin:"50px 0px"},onClick:this.stateHome.bind(this)},"Отметиться на точке"))),h.createElement(f.ZP,{style:{zIndex:9,margin:-16}},h.createElement("div",{id:"map",name:"map",style:{width:"100%",height:700,paddingTop:10}})))}}]),I}(h.Component);function C(){var e=(0,m.k6)();return h.createElement(S,{history:e})}},3543:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Price:()=>L});var r=n(7462),o=n(5861),a=n(5671),i=n(3144),l=n(7326),s=n(136),c=n(6215),d=n(1120),u=n(4942),p=n(4687),h=n.n(p),m=n(7294),f=n(5977),g=n(225),y=n(9617),E=n(5725),w=n(4567),v=n(9062),Z=n(2658),x=n(1095),_=n(8523),k=n(6501),b=n(9573),S=n(8732),C=n(6926),O=n(7896),I=n(6011),T=n(3694),D=n(3887),P=n(7922),R=n(2856),W=n(4520),z=n(8811),N=n.n(z);var B=n(7563),j=(0,y.Z)({palette:{primary:{main:"#c03"}}}),A=(0,g.Z)({formControl:{width:"100%"},selectEmpty:{marginTop:j.spacing(2)},tableCel:{textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},tableCelHead:{textAlign:"center",padding:15},customCel:{backgroundColor:"#bababa",textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},timePicker:{width:"100%"}});function F(e){var t=new Date(e),n=""+(t.getMonth()+1),r=""+t.getDate(),o=t.getFullYear();return n.length<2&&(n="0"+n),r.length<2&&(r="0"+r),[o,n,r].join("-")}var M=function(e){(0,s.Z)(y,e);var t,n,p,f,g=(p=y,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,d.Z)(p);if(f){var n=(0,d.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function y(e){var t;return(0,a.Z)(this,y),t=g.call(this,e),(0,u.Z)((0,l.Z)(t),"getData",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(N().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:B.stringify({type:e,data:JSON.stringify(t)})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){alert("Плохая связь с интернетом или ошибка на сервере"),console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,is_load:!1,date:F(new Date),allCount:0,bankCount:0,cashCount:0,bankSum:0,cashSum:0,myPrice:0,sdacha:0,myCash:0,giveList:[],full_give:0},t}return(0,i.Z)(y,[{key:"componentDidMount",value:(n=(0,o.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"http:"!=window.location.protocol&&"http"!=window.location.protocol||"localhost"==window.location.hostname||(window.location.href="https://jacodriver.ru/"+window.location.pathname),this.getPrice();case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"changeDate",value:function(e){var t=this;this.setState({date:F(e)}),setTimeout((function(){t.getPrice()}),300)}},{key:"getPrice",value:(t=(0,o.Z)(h().mark((function e(){var t,n,r,o,a,i,l,s,c,d,u,p,m,f,g,y;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=new Date(this.state.date),p=u.getDate(),p=parseInt(p)>9?p:"0"+p,m=u.getMonth()+1,m=parseInt(m)>9?m:"0"+m,f=u.getFullYear()+"-",f+=m+"-",f+=p,g={token:localStorage.getItem("token"),date:f},e.next=11,this.getData("getMyPrice_v2",g);case 11:y=e.sent,this.setState({allCount:null!==(t=y.stat.count)&&void 0!==t?t:0,bankCount:null!==(n=y.stat.count_bank)&&void 0!==n?n:0,cashCount:null!==(r=y.stat.count_cash)&&void 0!==r?r:0,bankSum:null!==(o=y.stat.sum_bank)&&void 0!==o?o:0,cashSum:null!==(a=y.stat.sum_cash)&&void 0!==a?a:0,myPrice:null!==(i=y.stat.my_price)&&void 0!==i?i:0,sdacha:null!==(l=y.stat.sdacha)&&void 0!==l?l:0,myCash:null!==(s=y.stat.my_cash)&&void 0!==s?s:0,giveList:null!==(c=y.give_hist)&&void 0!==c?c:[],full_give:null!==(d=y.stat.full_give)&&void 0!==d?d:0});case 13:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return m.createElement(m.Fragment,null,m.createElement(w.Z,{className:this.state.classes.backdrop,open:this.state.is_load},m.createElement(v.Z,{color:"inherit"})),m.createElement(E.ZP,{container:!0,spacing:3},m.createElement(E.ZP,{item:!0,xs:12,sm:3,style:{marginTop:10}},m.createElement(R._,{dateAdapter:P.Z,locale:_.Z},m.createElement(W.M,{multiple:!1,mask:"____-__-__",inputFormat:"yyyy-MM-dd",label:"Дата",value:F(this.state.date),onChange:function(t){e.changeDate(t)},renderInput:function(e){return m.createElement(x.Z,(0,r.Z)({variant:"outlined",size:"small",color:"primary",style:{width:"100%"}},e))}})),m.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",paddingTop:10}},m.createElement(Z.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000",paddingRight:5},component:"span"},"Cумма нала:"),m.createElement(Z.Z,{style:{fontSize:20,color:"#000"},component:"span"},this.state.cashSum,"р.")),m.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},m.createElement(Z.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000",paddingRight:5},component:"span"},"Cумма безнала:"),m.createElement(Z.Z,{style:{fontSize:20,color:"#000"},component:"span"},this.state.bankSum,"р.")),m.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},m.createElement(Z.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000",paddingRight:5},component:"span"},"Заработал:"),m.createElement(Z.Z,{style:{fontSize:20,color:"#000"},component:"span"},this.state.myPrice,"р.")),m.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",paddingBottom:10}},m.createElement(Z.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000",paddingRight:5},component:"span"},"Сдача:"),m.createElement(Z.Z,{style:{fontSize:20,color:"#000"},component:"span"},this.state.sdacha,"р.")),m.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",paddingBottom:10}},m.createElement(Z.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000",paddingRight:5},component:"span"},"Налички:"),m.createElement(Z.Z,{style:{fontSize:20,color:"#000"},component:"span"},this.state.myCash,"р.")),m.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},m.createElement(Z.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000",paddingRight:5},component:"span"},"Количество по налу:"),m.createElement(Z.Z,{style:{fontSize:20,color:"#000"},component:"span"},this.state.cashCount)),m.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},m.createElement(Z.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000",paddingRight:5},component:"span"},"Количество по безналу:"),m.createElement(Z.Z,{style:{fontSize:20,color:"#000"},component:"span"},this.state.bankCount)),m.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},m.createElement(Z.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000",paddingRight:5},component:"span"},"Завершенных заказов:"),m.createElement(Z.Z,{style:{fontSize:20,color:"#000"},component:"span"},this.state.allCount)))),m.createElement(E.ZP,{container:!0,spacing:3},m.createElement(E.ZP,{item:!0,xs:12,sm:3,style:{marginTop:10}},m.createElement(k.Z,{sx:{width:"100%"}},m.createElement(O.Z,null,m.createElement(b.Z,null,m.createElement(I.Z,null,m.createElement(T.Z,null,m.createElement(C.Z,null,"Время"),m.createElement(C.Z,null,"Сданная сумма"))),m.createElement(S.Z,null,this.state.giveList.map((function(e,t){return m.createElement(T.Z,{hover:!0,key:t},m.createElement(C.Z,null,e.time),m.createElement(C.Z,null,e.give," р."))}))),m.createElement(D.Z,null,m.createElement(T.Z,null,m.createElement(C.Z,null,"Итого"),m.createElement(C.Z,null,this.state.full_give," р.")),m.createElement(T.Z,null,m.createElement(C.Z,null,"Осталось"),m.createElement(C.Z,null,this.state.myCash," р.")))))))))}}]),y}(m.Component);function L(){var e=A(),t=(0,f.k6)();return m.createElement(M,{classes:e,history:t})}},9546:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Reg:()=>B});var r=n(5861),o=n(5671),a=n(3144),i=n(7326),l=n(136),s=n(6215),c=n(1120),d=n(4942),u=n(4687),p=n.n(u),h=n(7294),m=n(5977),f=n(7109),g=n(1095),y=n(5725),E=n(6914),w=n(225),v=n(9617),Z=n(4436),x=n(5272),_=n(5162),k=n(4666),b=n(8979),S=n(7750),C=n(6408),O=n(7645),I=n(4567),T=n(9062),D=n(8811),P=n.n(D);var R=n(7563),W=(0,v.Z)({palette:{primary:{main:"#c03"}}}),z=(0,w.Z)({paper:{display:"flex",flexDirection:"column",alignItems:"center"},avatar:{borderRadius:0,width:"100%",height:150,margin:0,backgroundColor:"#fff"},avatar2:{borderRadius:0,width:"100%",height:130,margin:0,backgroundColor:"#fff"},form:{width:"100%",marginTop:W.spacing(1)},submit:{margin:W.spacing(3,0,2)},backButton:{marginRight:W.spacing(1)},instructions:{marginTop:W.spacing(1),marginBottom:W.spacing(1)},textLink:{color:"#c03"}}),N=function(e){(0,l.Z)(D,e);var t,n,u,m,w,v=(m=D,w=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(m);if(w){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,s.Z)(this,e)});function D(e){var t;return(0,o.Z)(this,D),t=v.call(this,e),(0,d.Z)((0,i.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch(P().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:R.stringify({type:e,data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){return setTimeout((function(){t.setState({is_load:!1})}),300),e})).catch((function(e){alert("Плохая связь с интернетом или ошибка на сервере"),console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"auth",module_name:"",is_load:!1,modalDialog:!1,dialogTitle:"",dialogText:"",activeStep:0,steps:["Телефон","Подтверждение"],phone:"",code:"",pwd:""},t}return(0,a.Z)(D,[{key:"componentDidMount",value:(u=(0,r.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"http:"!=window.location.protocol&&"http"!=window.location.protocol||"localhost"==window.location.hostname||(window.location.href="https://jacodriver.ru/"+window.location.pathname);case 1:case"end":return e.stop()}}),e)}))),function(){return u.apply(this,arguments)})},{key:"updateData",value:(n=(0,r.Z)(p().mark((function e(){var t,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point_id:this.state.point,showReady:!0===this.state.showReady?1:0},e.next=3,this.getData("get_orders",t);case 3:n=e.sent,this.setState({read:n.read,onstol:n.onstol,ordersQueue:n.prestol_new});case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"nextStep",value:(t=(0,r.Z)(p().mark((function e(){var t,n,r,o;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=this.state.activeStep){e.next=8;break}return t={login:document.getElementById("phone").value,pwd:document.getElementById("password").value},e.next=4,this.getData("get_sms",t);case 4:0==(n=e.sent).st?this.setState({modalDialog:!0,dialogTitle:"Предупреждение",dialogText:n.text}):this.setState({activeStep:this.state.activeStep+1,phone:t.login,pwd:t.pwd}),e.next=14;break;case 8:if(1!=this.state.activeStep){e.next=14;break}return r={login:this.state.phone,pwd:this.state.pwd,code:document.getElementById("code").value},e.next=12,this.getData("send_code",r);case 12:0==(o=e.sent).st?this.setState({modalDialog:!0,dialogTitle:"Предупреждение",dialogText:o.text}):(localStorage.setItem("token",o.token),this.state.history.push("/list_orders"),location.reload());case 14:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"enterNextStep",value:function(e){13==e.charCode&&this.nextStep()}},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(I.Z,{className:this.state.classes.backdrop,open:this.state.is_load},h.createElement(T.Z,{color:"inherit"})),h.createElement(k.Z,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(O.Z,{id:"alert-dialog-title"},this.state.dialogTitle),h.createElement(S.Z,null,h.createElement(C.Z,{id:"alert-dialog-description"},this.state.dialogText)),h.createElement(b.Z,null,h.createElement(E.Z,{onClick:function(){e.setState({modalDialog:!1})},color:"primary",autoFocus:!0},"Хорошо"))),h.createElement(y.ZP,{container:!0,spacing:3,direction:"row",justifyContent:"center",alignItems:"center"},h.createElement(y.ZP,{item:!0,xs:12,sm:6,md:6,lg:4,xl:3},h.createElement("div",{className:this.state.classes.paper},h.createElement(f.Z,{className:this.state.classes.avatar,style:{marginBottom:10}},h.createElement("img",{alt:"Жако доставка роллов и пиццы",src:"../assets/img_other/Favikon.png",style:{height:"100%"}})),h.createElement(Z.Z,{activeStep:this.state.activeStep,alternativeLabel:!0,style:{width:"100%"}},this.state.steps.map((function(e){return h.createElement(x.Z,{key:e},h.createElement(_.Z,null,e))}))),h.createElement("div",{className:this.state.classes.form,style:{width:"100%"}},0==this.state.activeStep?h.createElement(h.Fragment,null,h.createElement(g.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,id:"phone",label:"Номер телефона",name:"phone",autoComplete:"phone",autoFocus:!0}),h.createElement(g.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,name:"password",label:"Новый пароль",type:"password",id:"password",autoComplete:"current-password"})):null,1==this.state.activeStep?h.createElement(g.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,id:"code",label:"Код из смс",name:"code",autoComplete:"code",autoFocus:!0}):null,2==this.state.activeStep?h.createElement(g.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,name:"password",label:"Пароль",type:"password",id:"password",autoComplete:"current-password",onKeyPress:this.enterNextStep.bind(this)}):null,h.createElement(E.Z,{fullWidth:!0,variant:"contained",color:"primary",className:this.state.classes.submit,onClick:this.nextStep.bind(this)},"Дальше"),h.createElement(y.ZP,{container:!0,style:{marginTop:10}},h.createElement(y.ZP,{item:!0,xs:!0},h.createElement("a",{href:"/auth",className:this.state.classes.textLink},"Вернуться к авторизации"))))))))}}]),D}(h.Component);function B(){var e=z(),t=(0,m.k6)();return h.createElement(N,{classes:e,history:t})}},9658:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Settings:()=>T});var r=n(5861),o=n(5671),a=n(3144),i=n(7326),l=n(136),s=n(6215),c=n(1120),d=n(4942),u=n(4687),p=n.n(u),h=n(7294),m=n(5725),f=n(4567),g=n(9062),y=n(795),E=n(8061),w=n(542),v=n(6446),Z=n(476),x=n(6914),_=n(3709),k=n(4212),b=n(3565),S=n(8811),C=n.n(S);var O=n(7563),I=function(e){(0,l.Z)(T,e);var t,n,u,S,I=(u=T,S=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(u);if(S){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,s.Z)(this,e)});function T(e){var t;return(0,o.Z)(this,T),t=I.call(this,e),(0,d.Z)((0,i.Z)(t),"click",!1),(0,d.Z)((0,i.Z)(t),"getData",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(C().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:O.stringify({type:e,data:JSON.stringify(t)})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){alert("Плохая связь с интернетом или ошибка на сервере"),console.log(e)}))})),t.state={is_load:!1,groupTypeTime:"norm",color:"blue",centered_map:!1,update_interval:0,update_interval_list:[],type_show_del:"max"},t}return(0,a.Z)(T,[{key:"componentDidMount",value:function(){"http:"!=window.location.protocol&&"http"!=window.location.protocol||"localhost"==window.location.hostname||(window.location.href="https://jacodriver.ru/"+window.location.pathname),this.getSettings()}},{key:"getSettings",value:(n=(0,r.Z)(p().mark((function e(){var t,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={token:localStorage.getItem("token")},e.next=3,this.getData("getMySetting",t);case 3:n=e.sent,this.setState({groupTypeTime:n.type_data_map,type_show_del:n.type_show_del,centered_map:1==parseInt(n.action_centered_map),update_interval_list:n.update_interval_list,update_interval:n.update_interval?parseInt(n.update_interval):30}),n.color&&this.setState({color:n.color});case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"saveMySetting",value:(t=(0,r.Z)(p().mark((function e(){var t,n=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.click){e.next=4;break}return e.abrupt("return");case 4:this.click=!0;case 5:return this.setState({is_load:!0}),t={token:localStorage.getItem("token"),typeMap:this.state.groupTypeTime,color:this.state.color,centered_map:this.state.centered_map?1:0,update_interval:this.state.update_interval,type_show_del:this.state.type_show_del},e.next=9,this.getData("saveMySetting",t);case 9:e.sent,setTimeout((function(){n.setState({is_load:!1}),n.click=!1}),300);case 11:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(f.Z,{style:{zIndex:999},open:this.state.is_load},h.createElement(g.Z,{color:"inherit"})),h.createElement(m.ZP,{container:!0,spacing:3},h.createElement(m.ZP,{item:!0,xs:12,style:{marginTop:10}},h.createElement(v.Z,{component:"fieldset"},h.createElement(Z.Z,{component:"legend"},"Формат данных на карте"),h.createElement(E.Z,{"aria-label":"gender",name:"radio-buttons-group",value:this.state.groupTypeTime,onChange:function(t,n){e.setState({groupTypeTime:n})}},h.createElement(w.Z,{value:"norm",control:h.createElement(y.Z,null),label:"Обычный (об заказ - время оформления, пред - промежуток времени)"}),h.createElement(w.Z,{value:"full",control:h.createElement(y.Z,null),label:"Полный (промежуток времени)"}),h.createElement(w.Z,{value:"min",control:h.createElement(y.Z,null),label:"Сокращенный (только оставшееся время)"})))),h.createElement(m.ZP,{item:!0,xs:12,style:{marginTop:10}},h.createElement(v.Z,{component:"fieldset"},h.createElement(Z.Z,{component:"legend"},"Отмененные заказы"),h.createElement(E.Z,{"aria-label":"gender",name:"radio-buttons-group",value:this.state.type_show_del,onChange:function(t,n){e.setState({type_show_del:n})}},h.createElement(w.Z,{value:"full",control:h.createElement(y.Z,null),label:"Показывать весь день"}),h.createElement(w.Z,{value:"min",control:h.createElement(y.Z,null),label:"30 минут"}),h.createElement(w.Z,{value:"max",control:h.createElement(y.Z,null),label:"2 часа"})))),h.createElement(m.ZP,{item:!0,xs:12,style:{marginTop:10}},h.createElement(_.Z,null,h.createElement(w.Z,{control:h.createElement(k.Z,{checked:this.state.centered_map,onClick:function(t){e.setState({centered_map:t.target.checked})}}),label:"При действии с карточкой на карте, центрировать карту"}))),h.createElement(m.ZP,{item:!0,xs:12,style:{marginTop:10}},h.createElement(v.Z,{component:"fieldset"},h.createElement(Z.Z,{component:"legend"},"Частота обновления заказов"),h.createElement(E.Z,{"aria-label":"gender",name:"radio-buttons-group1",value:this.state.update_interval,onChange:function(t,n){e.setState({update_interval:n})}},this.state.update_interval_list.map((function(e,t){return h.createElement(w.Z,{key:t,value:e.id,control:h.createElement(y.Z,null),label:e.name})}))))),h.createElement(m.ZP,{item:!0,xs:12,style:{marginTop:10}},h.createElement(b.AI,{style:{width:"100%"},color:this.state.color,onChangeComplete:function(t){e.setState({color:t.hex})}})),h.createElement(m.ZP,{item:!0,xs:12,style:{marginTop:10}},h.createElement(x.Z,{onClick:this.saveMySetting.bind(this),color:"primary",style:{width:"100%"}},"Сохранить"))))}}]),T}(h.Component);function T(){return h.createElement(I,null)}},5798:(e,t,n)=>{"use strict";var r=n(7294),o=n(3935),a=n(3727),i=n(5861),l=n(5671),s=n(3144),c=n(7326),d=n(136),u=n(6215),p=n(1120),h=n(4942),m=n(4687),f=n.n(m),g=n(6010),y=n(225),E=n(6720),w=n(3720),v=n(4386),Z=n(2440),x=n(799),_=n(8584),k=n(2658),b=n(6867),S=n(6089),C=n(5725),O=n(326),I=n(9617),T=n(1807),D=n(5977),P=n(3736),R=n(5152),W=n.n(R),z=n(8811),N=n.n(z);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var j=n(7563),A=(0,I.Z)({palette:{primary:{main:"#c03"},def:{main:"#353b48",secondary:"#fff"}}}),F=(0,y.Z)({root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){(0,h.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},A.mixins.toolbar),appBar:{zIndex:A.zIndex.drawer+1,transition:A.transitions.create(["width","margin"],{easing:A.transitions.easing.sharp,duration:A.transitions.duration.leavingScreen})},appBarShift:{marginLeft:300,width:"calc(100% - ".concat(300,"px)"),transition:A.transitions.create(["width","margin"],{easing:A.transitions.easing.sharp,duration:A.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:300,transition:A.transitions.create("width",{easing:A.transitions.easing.sharp,duration:A.transitions.duration.enteringScreen})},drawerPaperClose:(0,h.Z)({overflowX:"hidden",transition:A.transitions.create("width",{easing:A.transitions.easing.sharp,duration:A.transitions.duration.leavingScreen}),width:A.spacing(7)},A.breakpoints.up("sm"),{width:A.spacing(9)}),appBarSpacer:A.mixins.toolbar,content:{flexGrow:1,overflow:"auto"},container:{paddingTop:A.spacing(1),paddingBottom:A.spacing(4),width:"100%"},paper:{padding:A.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},heading:{fontSize:A.typography.pxToRem(15),fontWeight:A.typography.fontWeightRegular}}),M=function(e){(0,d.Z)(y,e);var t,n,o,m=(n=y,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,p.Z)(n);if(o){var r=(0,p.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,u.Z)(this,e)});function y(e){var t;return(0,l.Z)(this,y),t=m.call(this,e),(0,h.Z)((0,c.Z)(t),"getData",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(N().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:j.stringify({type:e,data:JSON.stringify(t)})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"header",title:"",open:!1,menu:[],full_menu:[],left:!1,phone_man:"",phone_center:"",phone_dir:""},t}return(0,s.Z)(y,[{key:"componentDidMount",value:(t=(0,i.Z)(f().mark((function e(){var t,n,r,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(window.location.protocol),"http:"!=window.location.protocol&&"http"!=window.location.protocol||"localhost"==window.location.hostname||(window.location.href="https://jacodriver.ru/"+window.location.pathname),t=window.location.pathname,n=W().find((function(e){return t.includes(e.path)})),this.setState({title:n.title}),window.document.title=n.title,r={token:localStorage.getItem("token")},e.next=9,this.getData("getPointInfo",r);case 9:o=e.sent,console.log(o),o&&this.setState({phone_man:o.phone_man,phone_center:o.phone_new,phone_dir:o.phone_upr});case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"handleDrawerOpen",value:function(){this.setState({open:!0})}},{key:"handleDrawerClose",value:function(){this.setState({open:!1})}},{key:"logOut",value:function(){localStorage.removeItem("token"),this.state.history.push("/auth"),location.reload()}},{key:"goTo",value:function(e){this.setState({title:e}),window.document.title=e}},{key:"render",value:function(){var e=this;return r.createElement(r.Fragment,null,r.createElement(w.Z,{className:(0,g.Z)(this.state.classes.appBar,this.state.open&&this.state.classes.appBarShift)},r.createElement(v.Z,{className:this.state.classes.toolbar},r.createElement(b.Z,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:this.handleDrawerOpen.bind(this),className:(0,g.Z)(this.state.classes.menuButton,this.state.open&&this.state.classes.menuButtonHidden)},r.createElement(O.Z,null)),r.createElement(k.Z,{component:"h1",variant:"h6",id:"GlobalHeader",color:"inherit",noWrap:!0,className:this.state.classes.title},this.state.title))),r.createElement(r.Fragment,null,r.createElement(P.Z,{anchor:"left",open:this.state.open,onClose:function(){e.setState({open:!1})},onOpen:function(){e.setState({open:!0})}},r.createElement(Z.Z,{style:{width:"100%"}},r.createElement(x.ZP,{button:!0,onClick:this.goTo.bind(this,"Список заказов")},r.createElement(a.OL,{to:"/list_orders"},r.createElement(_.Z,{primary:"Список заказов"}))),r.createElement(x.ZP,{button:!0,onClick:this.goTo.bind(this,"Карта заказов")},r.createElement(a.OL,{to:"/map_orders"},r.createElement(_.Z,{primary:"Карта заказов"}))),r.createElement(x.ZP,{button:!0,onClick:this.goTo.bind(this,"Расчет")},r.createElement(a.OL,{to:"/price"},r.createElement(_.Z,{primary:"Расчет"}))),r.createElement(x.ZP,{button:!0,onClick:this.goTo.bind(this,"График работы")},r.createElement(a.OL,{to:"/graph"},r.createElement(_.Z,{primary:"График работы"}))),r.createElement(x.ZP,{button:!0,onClick:this.goTo.bind(this,"Настройки")},r.createElement(a.OL,{to:"/settings"},r.createElement(_.Z,{primary:"Настройки"}))),r.createElement(x.ZP,{button:!0},r.createElement("a",{href:"tel:"+this.state.phone_dir},r.createElement(_.Z,{primary:"Директор"}))),r.createElement(x.ZP,{button:!0},r.createElement("a",{href:"tel:"+this.state.phone_man},r.createElement(_.Z,{primary:"Менеджер"}))),r.createElement(x.ZP,{button:!0},r.createElement("a",{href:"tel:"+this.state.phone_center},r.createElement(_.Z,{primary:"Контакт-центр"}))),r.createElement(x.ZP,{button:!0,onClick:this.logOut.bind(this)},r.createElement(_.Z,{primary:"Выйти"}))))))}}]),y}(r.Component);function L(e){var t=e.code,n=e.children;return r.createElement(D.AW,{render:function(e){var r=e.staticContext;return r&&(r.status=t),n}})}function H(){var e=F(),t=(0,D.k6)(),n=!0;return"/auth/"!=t.location.pathname&&"/auth"!=t.location.pathname&&"/registration/"!=t.location.pathname&&"/registration"!=t.location.pathname||(n=!1),r.createElement(T.Z,{theme:A},r.createElement("div",{className:e.root},n?r.createElement(r.Fragment,null,r.createElement(E.ZP,null),r.createElement(M,{classes:e,history:t})):null,r.createElement("main",{className:e.content},r.createElement("div",{className:e.appBarSpacer}),r.createElement(S.Z,{maxWidth:!1,className:e.container},r.createElement(D.rs,null,W().map((function(e,t){return r.createElement(D.AW,{key:t,path:e.path,exact:e.exact,component:e.component})})),r.createElement(D.AW,{component:function(){return r.createElement(L,{code:404},r.createElement(C.ZP,{container:!0,className:"Contact mainContainer MuiGrid-spacing-xs-3",style:{marginTop:64}},r.createElement(C.ZP,{item:!0,xs:12},r.createElement(k.Z,{variant:"h5",component:"h1"},"404 Страница не найдена"))))}}))))))}o.render(r.createElement(a.VK,null,r.createElement(H,null)),document.getElementById("app"))},8811:e=>{e.exports={urlApi:"https://jacochef.ru/api/site/driver.php"}}},e=>{e.O(0,[216],(()=>(5798,e(e.s=5798)))),e.O()}]);
//# sourceMappingURL=main.a0c746bfec7dd50966e3.js.map