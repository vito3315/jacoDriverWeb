(self.webpackChunkreact_ssr=self.webpackChunkreact_ssr||[]).push([[179],{5152:(e,t,n)=>{var o=n(8433).Auth,a=n(9546).Reg,r=n(3498).ListOrders,i=n(1401).MapOrders,s=n(3543).Price,l=n(8868).Graph;e.exports=[{path:"/",exact:!0,component:r,title:"Список заказов",code:200},{path:"/auth",exact:!0,component:o,title:"Авторизация",code:200},{path:"/registration",exact:!0,component:a,title:"Регистрация",code:200},{path:"/list_orders",exact:!0,component:r,title:"Список заказов",code:200},{path:"/map_orders",exact:!0,component:i,title:"Карта заказов",code:200},{path:"/price",exact:!0,component:s,title:"Расчет",code:200},{path:"/graph",exact:!0,component:l,title:"График работы",code:200}]},8433:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Auth:()=>T});var o=n(5861),a=n(5671),r=n(3144),i=n(7326),s=n(136),l=n(6215),c=n(1120),d=n(4942),p=n(7757),u=n.n(p),m=n(7294),h=n(5977),f=n(7109),g=n(2230),y=n(5725),v=n(2642),w=n(225),Z=n(4345),x=n(4666),E=n(8979),b=n(7750),k=n(6408),_=n(7645),S=n(821),C=n(9062);var I=n(7563),O=(0,Z.Z)({palette:{primary:{main:"#c03"}}}),D=(0,w.Z)({paper:{display:"flex",flexDirection:"column",alignItems:"center"},avatar:{borderRadius:0,width:"100%",height:150,margin:0,backgroundColor:"#fff"},avatar2:{borderRadius:0,width:"100%",height:130,margin:0,backgroundColor:"#fff"},form:{width:"100%",marginTop:O.spacing(1)},submit:{margin:O.spacing(3,0,2)},textLink:{color:"#c03"}}),R=function(e){(0,s.Z)(O,e);var t,n,p,h,w,Z=(h=O,w=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(h);if(w){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,l.Z)(this,e)});function O(e){var t;return(0,a.Z)(this,O),t=Z.call(this,e),(0,d.Z)((0,i.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/site/driver.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:I.stringify({type:e,data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){return setTimeout((function(){t.setState({is_load:!1})}),300),e})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"auth",module_name:"",is_load:!1,modalDialog:!1,dialogTitle:"",dialogText:""},t}return(0,r.Z)(O,[{key:"componentDidMount",value:(p=(0,o.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"http:"!=window.location.protocol&&"http"!=window.location.protocol||"localhost"==window.location.hostname||(console.log("goTo","https://jacodriver.ru/"+window.location.pathname),window.location.href="https://jacodriver.ru/"+window.location.pathname);case 1:case"end":return e.stop()}}),e)}))),function(){return p.apply(this,arguments)})},{key:"updateData",value:(n=(0,o.Z)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point_id:this.state.point,showReady:!0===this.state.showReady?1:0},e.next=3,this.getData("get_orders",t);case 3:n=e.sent,this.setState({read:n.read,onstol:n.onstol,ordersQueue:n.prestol_new});case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"auth",value:(t=(0,o.Z)(u().mark((function e(){var t,n,o=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={login:document.getElementById("phone").value,pwd:document.getElementById("password").value},e.next=3,this.getData("auth",t);case 3:!1===(n=e.sent).st?setTimeout((function(){o.setState({modalDialog:!0,dialogTitle:"Предупреждение",dialogText:n.text})}),500):(localStorage.setItem("token",n.token),setTimeout((function(){window.location.pathname="/list_orders"}),300));case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return m.createElement(m.Fragment,null,m.createElement(S.Z,{className:this.state.classes.backdrop,open:this.state.is_load},m.createElement(C.Z,{color:"inherit"})),m.createElement(x.Z,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},m.createElement(_.Z,{id:"alert-dialog-title"},this.state.dialogTitle),m.createElement(b.Z,null,m.createElement(k.Z,{id:"alert-dialog-description"},this.state.dialogText)),m.createElement(E.Z,null,m.createElement(v.Z,{onClick:function(){e.setState({modalDialog:!1})},color:"primary",autoFocus:!0},"Хорошо"))),m.createElement(y.ZP,{container:!0,spacing:3,direction:"row",justifyContent:"center",alignItems:"center"},m.createElement(y.ZP,{item:!0,xs:12,sm:6,md:6,lg:4,xl:3},m.createElement("div",{className:this.state.classes.paper},m.createElement(f.Z,{className:this.state.classes.avatar},m.createElement("img",{alt:"Жако доставка роллов и пиццы",src:"../assets/img_other/Favikon.png",style:{height:"100%"}})),m.createElement("form",{className:this.state.classes.form,noValidate:!0},m.createElement(g.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,id:"phone",label:"Номер телефона",name:"phone",autoComplete:"phone",autoFocus:!0}),m.createElement(g.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,name:"password",label:"Пароль",type:"password",id:"password",autoComplete:"current-password"}),m.createElement(v.Z,{fullWidth:!0,variant:"contained",color:"primary",className:this.state.classes.submit,onClick:this.auth.bind(this)},"Войти"),m.createElement(y.ZP,{container:!0,style:{marginTop:10}},m.createElement(y.ZP,{item:!0,xs:!0},m.createElement("a",{href:"/registration",className:this.state.classes.textLink},"Восстановить пароль"))))))))}}]),O}(m.Component);function T(){var e=D(),t=(0,h.k6)();return m.createElement(R,{classes:e,history:t})}},8868:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Graph:()=>P});var o=n(5861),a=n(5671),r=n(3144),i=n(7326),s=n(136),l=n(6215),c=n(1120),d=n(4942),p=n(7757),u=n.n(p),m=n(7294),h=n(5977),f=n(225),g=n(4345),y=n(5725),v=n(821),w=n(9062),Z=n(2642),x=n(2318),E=n(6501),b=n(9573),k=n(8732),_=n(6926),S=n(7896),C=n(6011),I=n(3694);var O=n(7563),D=(0,g.Z)({palette:{primary:{main:"#c03"}}}),R=(0,f.Z)({formControl:{width:"100%"},selectEmpty:{marginTop:D.spacing(2)},tableCel:{textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},tableCelHead:{textAlign:"center",padding:15},customCel:{backgroundColor:"#bababa",textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},timePicker:{width:"100%"}}),T=function(e){(0,s.Z)(g,e);var t,n,p,h,f=(p=g,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(p);if(h){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,l.Z)(this,e)});function g(e){var t;return(0,a.Z)(this,g),t=f.call(this,e),(0,d.Z)((0,i.Z)(t),"getData",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("https://jacochef.ru/api/site/driver.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:O.stringify({type:e,data:JSON.stringify(t)})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,is_load:!1,data:[],dates:[],mounth:[],thisMounth:"",isOpen:!1},t}return(0,r.Z)(g,[{key:"componentDidMount",value:(n=(0,o.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"http:"!=window.location.protocol&&"http"!=window.location.protocol||"localhost"==window.location.hostname||(console.log("goTo","https://jacodriver.ru/"+window.location.pathname),window.location.href="https://jacodriver.ru/"+window.location.pathname),this.getGraph();case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getGraph",value:(t=(0,o.Z)(u().mark((function e(){var t,n,o,a,r,i=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return""==(t=i.length>0&&void 0!==i[0]?i[0]:"")&&(n=new Date,o=n.getFullYear()+"-",o+=n.getMonth()+1,t=o),a={token:localStorage.getItem("token"),date:t},e.next=5,this.getData("getMyGraph",a);case 5:r=e.sent,this.setState({data:r.users,dates:r.all_dates,mounth:r.mounth,thisMounth:r.mounth.find((function(e){return e.day==t})).mounth,isOpen:!1});case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return m.createElement(m.Fragment,null,m.createElement(v.Z,{open:this.state.is_load},m.createElement(w.Z,{color:"inherit"})),m.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}},m.createElement(Z.Z,{onClick:function(){e.setState({isOpen:!0})}},this.state.thisMounth)),m.createElement(m.Fragment,null,m.createElement(x.ZP,{anchor:"bottom",open:this.state.isOpen,onClose:function(){e.setState({isOpen:!1})}},this.state.mounth.map((function(t,n){return m.createElement(Z.Z,{key:n,onClick:e.getGraph.bind(e,t.day)},t.mounth)})))),m.createElement(y.ZP,{container:!0,spacing:3,style:{marginTop:10}},m.createElement(E.Z,{sx:{width:"100%",overflow:"hidden"}},m.createElement(S.Z,{sx:{maxHeight:600}},m.createElement(b.Z,{stickyHeader:!0,"aria-label":"sticky table"},m.createElement(C.Z,null,m.createElement(I.Z,null,m.createElement(_.Z,{style:{width:150,height:30,textAlign:"center",border:"1px solid #e5e5e5"}}),this.state.dates.map((function(e,t){return m.createElement(_.Z,{key:t,style:{width:50,height:30,textAlign:"center",border:"1px solid #e5e5e5"}},e.day)}))),m.createElement(I.Z,null,m.createElement(_.Z,{style:{width:150,height:30,textAlign:"center",border:"1px solid #e5e5e5"}},"Сотрудник"),this.state.dates.map((function(e,t){return m.createElement(_.Z,{key:t,style:{width:50,height:30,textAlign:"center",border:"1px solid #e5e5e5"}},e.dow)})))),m.createElement(k.Z,null,this.state.data.map((function(e,t){return m.createElement(I.Z,{hover:!0,key:t},e.map((function(e,t){return m.createElement(_.Z,{key:t,style:0==t?{width:150,height:30}:{width:50,height:30,textAlign:"center",border:"1px solid #e5e5e5"}},0==t?e.user_name:"0"==e.min?"":e.hours)})))}))))))))}}]),g}(m.Component);function P(){var e=R(),t=(0,h.k6)();return m.createElement(T,{classes:e,history:t})}},3498:(e,t,n)=>{"use strict";n.r(t),n.d(t,{CardItemList:()=>R,ListOrders:()=>P});var o=n(5861),a=n(5671),r=n(3144),i=n(7326),s=n(136),l=n(6215),c=n(1120),d=n(4942),p=n(7462),u=n(5987),m=n(7757),h=n.n(m),f=n(7294),g=n(5977),y=n(1861),v=n(5725),w=n(2658),Z=n(2642),x=n(2318),E=n(3412),b=n(8999),k=n(821),_=n(9062),S=n(3707),C=["className"];function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,c.Z)(e);if(t){var a=(0,c.Z)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return(0,l.Z)(this,n)}}var O=n(7563),D=(0,y.ZP)((function(e){var t=e.className,n=(0,u.Z)(e,C);return f.createElement(E.Z,(0,p.Z)({},n,{classes:{popper:t}}))}))((function(e){var t=e.theme;return(0,d.Z)({},"& .".concat(b.Z.tooltip),{backgroundColor:"#000",color:"#fff",marginTop:0,maxWidth:220,fontSize:t.typography.pxToRem(12),border:"1px solid #dadde9",borderRadius:5})})),R=function(e){(0,s.Z)(n,e);var t=I(n);function n(e){var o;return(0,a.Z)(this,n),o=t.call(this,e),(0,d.Z)((0,i.Z)(o),"_isMounted",!1),o.state={openTooltip:!1},o}return(0,r.Z)(n,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"finishOrder",value:function(e){confirm("Точно завершить заказ ?")&&this.props.actionOrder(e,3)}},{key:"cancelOrder",value:function(e){confirm("Отменить заказ ?")&&this.props.actionOrder(e,2)}},{key:"render",value:function(){var e=this,t=this.props.item,n="100%";return f.createElement("div",{className:"container"},f.createElement("div",{style:{display:"flex",flexDirection:"column",paddingBottom:10}},f.createElement(w.Z,{style:{fontSize:20,color:"#000"},component:"span"},t.id_text)),f.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",paddingBottom:10}},0==parseInt(t.count_other)?null:f.createElement(w.Z,{className:"textBold typeItems typeItemsBlue",style:{marginRight:5},component:"span"},"Роллы"),0==parseInt(t.count_pizza)?null:f.createElement(w.Z,{className:"textBold typeItems typeItemsRed",style:{marginLeft:5,marginRight:5},component:"span"},"Пицца x",t.count_pizza),0==parseInt(t.count_drink)?null:f.createElement(D,{style:{marginTop:0},open:this.state.openTooltip,onClose:function(){e.setState({openTooltip:!1})},title:f.createElement(f.Fragment,null,t.drink_list.map((function(e,t){return f.createElement(w.Z,{key:t,className:"text",style:{paddingBottom:5,paddingTop:2,color:"#fff"}},e.names)})))},f.createElement(w.Z,{onClick:function(){e.setState({openTooltip:!0})},className:"textBold typeItems typeItemsGreen",style:{marginLeft:5,marginRight:5},component:"span"},"Напиток x",t.count_drink))),f.createElement("div",{style:{display:"flex",flexDirection:"column",width:n,paddingBottom:15}},f.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},f.createElement(w.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000",paddingRight:5},component:"span"},"Адрес: "),f.createElement(w.Z,{style:{fontSize:20,color:"#000"},component:"span"},t.addr)),f.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},0==t.pd.length||0==parseInt(t.pd)?null:f.createElement(f.Fragment,null,f.createElement(w.Z,{className:"textBold",component:"span",style:{paddingRight:5}},"Пд:"),f.createElement(w.Z,{className:"text",component:"span",style:{paddingRight:5}},t.pd,",")),0==t.et.length||0==parseInt(t.et)?null:f.createElement(f.Fragment,null,f.createElement(w.Z,{className:"textBold",component:"span",style:{paddingRight:5}},"Эт: "),f.createElement(w.Z,{className:"text",component:"span",style:{paddingRight:5}},t.et,",")),0==t.kv.length||0==parseInt(t.kv)?null:f.createElement(f.Fragment,null,f.createElement(w.Z,{className:"textBold",component:"span",style:{paddingRight:5}},"Кв:"),f.createElement(w.Z,{className:"text",component:"span",style:{paddingRight:5}},t.kv))),0==parseInt(t.fake_dom)?null:f.createElement(w.Z,{style:{fontSize:15,fontWeight:"bold",color:"#000"}},"Домофон не работает"),f.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",paddingBottom:5,paddingTop:10}},f.createElement(w.Z,{className:"textBold",style:{paddingRight:5}},"Ко времени: "),f.createElement(w.Z,{className:"text"},t.need_time)),1!==parseInt(t.status_order)?null:f.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},f.createElement(w.Z,{className:"textBold",style:{paddingRight:5}},"Начнут готовить: "),f.createElement(w.Z,{className:"text"},t.time_start_order)),6!==parseInt(t.status_order)?null:f.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},f.createElement(w.Z,{className:"textBold",style:{paddingRight:5}},"Отдали: "),f.createElement(w.Z,{className:"text"},t.close_date_time_order)),6==parseInt(t.status_order)?null:f.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},f.createElement(w.Z,{className:"textBold",style:{paddingRight:5}},"Осталось: "),f.createElement(w.Z,{className:"text"},t.to_time))),0==t.comment.length?null:f.createElement("div",{style:{flex:1,display:"flex",flexDirection:"row",flexWrap:"wrap",paddingBottom:5,width:n}},f.createElement(w.Z,{className:"textBold",style:{paddingRight:5}},"Коммент: "),f.createElement(w.Z,{className:"text"},t.comment)),0==parseInt(t.is_delete)?null:f.createElement("div",{style:{flex:1,display:"flex",flexDirection:"row",flexWrap:"wrap",paddingBottom:5,width:n}},f.createElement(w.Z,{className:"textBold",style:{paddingRight:5}},"Причина удаления: "),f.createElement(w.Z,{className:"text"},t.delete_reason)),f.createElement("div",{style:{flex:1,display:"flex",flexDirection:"row",flexWrap:"wrap",paddingBottom:5,width:n}},f.createElement(w.Z,{className:"textBold",style:{paddingRight:5}},"Сумма: "),1==parseInt(t.online_pay)?f.createElement(w.Z,{style:{fontSize:15,color:"#fc2847",fontWeight:"bold"}},"Оплачено"):f.createElement(w.Z,{className:"text"},t.sum_order,"р.")),0==parseInt(t.sdacha)||1==parseInt(t.online_pay)?null:f.createElement("div",{style:{flex:1,display:"flex",flexDirection:"row",flexWrap:"wrap",paddingBottom:5,width:n}},f.createElement(w.Z,{className:"textBold",style:{paddingRight:5}},"Сдача с: "),f.createElement(w.Z,{className:"text"},t.sdacha,"р. ( ",t.sum_sdacha,"р. )")),0==parseInt(t.is_get)?f.createElement("div",{style:{display:"flex",flexDirection:"column",marginLeft:0,width:n,alignItems:"center",justifyContent:"center",paddingTop:10}},f.createElement("a",{className:"bntAction typeItemsGray",style:{width:"100%",marginBottom:10},href:"tel:"+t.number},t.number),f.createElement(Z.Z,{className:"bntAction typeItemsGreen",style:{width:"100%"},onClick:this.props.actionOrder.bind(this,t.id,1)},"Взять")):1==parseInt(t.is_get)&&1==parseInt(t.is_my)?f.createElement("div",{style:{display:"flex",flexDirection:"column",width:n,alignItems:"center",justifyContent:"center",paddingTop:10}},f.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",width:n}},6==parseInt(t.status_order)?null:f.createElement(Z.Z,{className:"bntAction typeItemsRed",style:{width:"40%",marginRight:5},onClick:this.cancelOrder.bind(this,t.id)},"Отменить"),f.createElement("a",{className:"bntAction",style:{width:6!=parseInt(t.status_order)?"60%":"100%",marginLeft:5,backgroundColor:"#bababa"},href:"tel:"+t.number},t.number)),6==parseInt(t.status_order)?null:f.createElement(Z.Z,{className:"bntAction typeItemsGreen",style:{width:n,marginTop:10},onClick:this.finishOrder.bind(this,t.id)},"Завершить")):f.createElement("div",{style:{display:"flex",flexDirection:"column",marginLeft:0,width:n,alignItems:"center",justifyContent:"center",paddingTop:10}},f.createElement(Z.Z,{className:"bntAction typeItemsGray",style:{width:"100%",textAlign:"center"}},t.driver_name),f.createElement("a",{className:"bntAction typeItemsGray",style:{width:"100%",textAlign:"center",marginTop:10,color:"#000"},href:"tel:"+t.driver_login},t.driver_login)))}}]),n}(f.PureComponent),T=function(e){(0,s.Z)(p,e);var t,n,l,c=I(p);function p(e){var t;return(0,a.Z)(this,p),t=c.call(this,e),(0,d.Z)((0,i.Z)(t),"timerId",null),(0,d.Z)((0,i.Z)(t),"_isMounted",!1),(0,d.Z)((0,i.Z)(t),"getData",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("https://jacochef.ru/api/site/driver.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:O.stringify({type:e,data:JSON.stringify(t)})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){console.log(e)}))})),t.state={history:t.props.history,module_name:"",is_load:!1,orders:[],is_open:!1,type:{id:1,text:"Активные"},types:[{id:1,text:"Активные"},{id:3,text:"Предзаказы"},{id:2,text:"Мои отмеченные"},{id:5,text:"У других курьеров"},{id:6,text:"Мои завершенные"}]},t}return(0,r.Z)(p,[{key:"componentWillUnmount",value:function(){this._isMounted=!1,clearInterval(this.timerId)}},{key:"componentDidMount",value:(l=(0,o.Z)(h().mark((function e(){var t,n,o=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(e){var t=e.message;console.log(t)},t=function(e){var t=e.coords,n=[t.latitude,t.longitude];console.log(n)},this._isMounted=!0,"http:"!=window.location.protocol&&"http"!=window.location.protocol||"localhost"==window.location.hostname||(console.log("goTo","https://jacodriver.ru/"+window.location.pathname),window.location.href="https://jacodriver.ru/"+window.location.pathname),localStorage.getItem("token")&&localStorage.getItem("token").length>0||(this.state.history.push("/auth"),window.location.reload()),navigator.geolocation.getCurrentPosition(t,n,{enableHighAccuracy:!0}),this.timerId=setInterval((function(){o._isMounted?o.getOrders(!1,o.state.type.id):clearInterval(o.timerId)}),3e4),setTimeout((function(){o.getOrders()}),100);case 8:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"getOrders",value:(n=(0,o.Z)(h().mark((function e(){var t,n,o,a,r,i=this,s=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(s.length>0&&void 0!==s[0])||s[0],n=s.length>1&&void 0!==s[1]?s[1]:1,t&&this.setState({is_load:!0,is_open:!1}),o=this.state.types.find((function(e){return parseInt(e.id)==parseInt(n)})),this.setState({type:o}),a={token:localStorage.getItem("token"),type:n,is_map:0},e.next=8,this.getData("get_orders_v2",a);case 8:!1===(r=e.sent)||setTimeout((function(){var e=[];1==n&&(e=r.free_orders),2==n&&(e=r.my_orders),5==n&&(e=r.other_orders),3==n&&(e=r.pred_orders),6==n&&(e=r.my_finish),i.setState({orders:e,is_load:!1})}),1e3);case 10:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"actionOrder",value:(t=(0,o.Z)(h().mark((function e(t,n){var o,a,r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({is_load:!0}),3==parseInt(n)&&(o=function(e){var n=e.coords,o=n.latitude,a=n.longitude,r={token:localStorage.getItem("token"),order_id:t,lat:o,lon:a};fetch("https://jacochef.ru/api/site/driver.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:O.stringify({type:"checkPosition",data:JSON.stringify(r)})}).then((function(e){return e.json()})).then((function(e){console.log("res1",e)})).catch((function(e){console.log(e)}))},a=function(e){var t=e.message;console.log(t)},navigator.geolocation.getCurrentPosition(o,a,{enableHighAccuracy:!0})),r={token:localStorage.getItem("token"),id:t,type:n},e.next=5,this.getData("actionOrder",r);case 5:0==(i=e.sent).st?this.setState({showErr:!0,textErr:i.text,is_load:!1}):this.getOrders(!0,this.state.type.id);case 7:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return f.createElement(f.Fragment,null,f.createElement(k.Z,{open:this.state.is_load},f.createElement(_.Z,{color:"inherit"})),f.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingBottom:10}},f.createElement(Z.Z,{onClick:function(){e.setState({is_open:!0})}},this.state.type.text),f.createElement(Z.Z,{style:{marginRight:3},onClick:this.getOrders.bind(this,!0,this.state.type.id)},f.createElement(S.Z,null))),f.createElement(f.Fragment,null,f.createElement(x.ZP,{anchor:"bottom",open:this.state.is_open,onClose:function(){e.setState({is_open:!1})}},this.state.types.map((function(t,n){return f.createElement(Z.Z,{key:n,onClick:e.getOrders.bind(e,!0,t.id)},t.text)})))),f.createElement(v.ZP,{container:!0,spacing:3},this.state.orders.map((function(t,n){return f.createElement(v.ZP,{item:!0,xs:12,sm:3,key:n},f.createElement(R,{item:t,actionOrder:e.actionOrder.bind(e)}))}))))}}]),p}(f.Component);function P(){var e=(0,g.k6)();return f.createElement(T,{history:e})}},1401:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MapOrders:()=>D});var o=n(5861),a=n(5671),r=n(3144),i=n(7326),s=n(136),l=n(6215),c=n(1120),d=n(4942),p=n(7757),u=n.n(p),m=n(7294),h=n(5977),f=n(5725),g=n(2642),y=n(2318),v=n(821),w=n(9062),Z=n(3498),x=n(3707),E=n(5503),b=n(4465),k=n(1656);var _=n(7563),S=(0,E.ZF)({apiKey:"AIzaSyAK8l7m2URB6kFbBzC5iv67W34cuEzPKYc",authDomain:"macro-thinker-288611.firebaseapp.com",databaseURL:"https://macro-thinker-288611.firebaseio.com",projectId:"macro-thinker-288611",storageBucket:"macro-thinker-288611.appspot.com",messagingSenderId:"989415800368",appId:"1:989415800368:web:35373fd752ab60aa3177f5",measurementId:"G-YDT84TR2E2"}),C=(0,b.IH)(S),I=(0,k.KL)();(0,k.LP)(I,{vapidKey:"BJmoVaG5ijS0CXc126Y47xmkjxv92stPrkQDfLql5hirvoWvAcy2N4xR1CPKVnCzUVai3ZqkzvVAjOyHGUWhogA"}).then((function(e){e?console.log("currentToken",e):console.log("No registration token available. Request permission to generate one.")})).catch((function(e){console.log("An error occurred while retrieving token. ",e)})),console.log("app",S),console.log("analytics",C);var O=function(e){(0,s.Z)(k,e);var t,n,p,h,E,b=(h=k,E=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(h);if(E){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,l.Z)(this,e)});function k(e){var t;return(0,a.Z)(this,k),t=b.call(this,e),(0,d.Z)((0,i.Z)(t),"timerId",null),(0,d.Z)((0,i.Z)(t),"_isMounted",!1),(0,d.Z)((0,i.Z)(t),"map",null),(0,d.Z)((0,i.Z)(t),"getData",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("https://jacochef.ru/api/site/driver.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:_.stringify({type:e,data:JSON.stringify(t)})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){console.log(e)}))})),t.state={history:t.props.history,module_name:"",is_load:!1,orders:[],home:null,is_open:!1,is_open_order:!1,openOrder:null,type:{id:1,text:"Активные"},types:[{id:1,text:"Активные"},{id:2,text:"Мои отмеченные"},{id:5,text:"У других курьеров"}],rotate:!0},t}return(0,r.Z)(k,[{key:"componentWillUnmount",value:function(){this._isMounted=!1,clearInterval(this.timerId)}},{key:"componentDidMount",value:(p=(0,o.Z)(u().mark((function e(){var t,n,o=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(e){var t=e.message;console.log(t)},t=function(e){var t=e.coords,n=[t.latitude,t.longitude];console.log(n)},this._isMounted=!0,"http:"!=window.location.protocol&&"http"!=window.location.protocol||"localhost"==window.location.hostname||(window.location.href="https://jacodriver.ru/"+window.location.pathname),localStorage.getItem("token")&&localStorage.getItem("token").length>0||(this.state.history.push("/auth"),window.location.reload()),navigator.geolocation.getCurrentPosition(t,n,{enableHighAccuracy:!0}),this.getOrders(!1,1),this.timerId=setInterval((function(){o._isMounted?o.getOrders(!1,o.state.type.id):clearInterval(o.timerId)}),3e4),setTimeout((function(){o.getOrders()}),100);case 9:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"getOrders",value:(n=(0,o.Z)(u().mark((function e(){var t,n,o,a,r,i=this,s=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(s.length>0&&void 0!==s[0])||s[0],n=s.length>1&&void 0!==s[1]?s[1]:1,t&&this.setState({is_load:!0,is_open:!1}),o=this.state.types.find((function(e){return parseInt(e.id)==parseInt(n)})),this.setState({type:o}),a={token:localStorage.getItem("token"),type:n,is_map:1},e.next=8,this.getData("get_orders_v2",a);case 8:r=e.sent,console.log(r.home),!1===r||setTimeout((function(){var e=[];1==n&&(e=r.free_orders),2==n&&(e=r.my_orders),5==n&&(e=r.other_orders),i.setState({orders:e,home:r.home,is_load:!1});var t=new ymaps.ObjectManager;if(i.map){var o={type:"FeatureCollection",features:[]};o.features.push({type:"Feature",id:0,options:{preset:"islands#blackDotIcon",iconColor:"black"},geometry:{type:"Point",coordinates:[r.home.latitude,r.home.longitude]}}),e.map((function(e){o.features.push({type:"Feature",id:e.id,options:{preset:6==parseInt(e.status_order)?"islands#blueCircleDotIconWithCaption":"islands#circleDotIcon",iconColor:e.point_color?e.point_color:e.color},properties:{iconCaption:e.point_text},geometry:{type:"Point",coordinates:[e.xy.latitude,e.xy.longitude]}})})),i.map.geoObjects.removeAll(),t.add(o),i.map.geoObjects.add(t)}else ymaps.ready((function(){i.map=new ymaps.Map("map",{center:[r.home.latitude,r.home.longitude],zoom:11},{searchControlProvider:"yandex#search"});var n=new ymaps.GeoObject({geometry:{type:"Point",coordinates:[r.home.latitude,r.home.longitude]}},{preset:"islands#blackDotIcon",iconColor:"black"});i.map.geoObjects.add(n);var o={type:"FeatureCollection",features:[]};e.map((function(e){o.features.push({type:"Feature",id:e.id,options:{preset:6==parseInt(e.status_order)?"islands#blueCircleDotIconWithCaption":"islands#circleDotIcon",iconColor:e.point_color?e.point_color:e.color},properties:{iconCaption:e.point_text},geometry:{type:"Point",coordinates:[e.xy.latitude,e.xy.longitude]}})})),t.add(o),i.map.geoObjects.add(t)}));t.objects.events.add(["click"],(function(e){var t=e.get("objectId"),n=i.state.orders.find((function(e){return parseInt(e.id)==parseInt(t)}));n&&i.showOrder(n)}))}),1e3);case 11:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"actionOrder",value:(t=(0,o.Z)(u().mark((function e(t,n){var o,a,r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({is_load:!0}),3==parseInt(n)&&(o=function(e){var n=e.coords,o=n.latitude,a=n.longitude,r={token:localStorage.getItem("token"),order_id:t,lat:o,lon:a};fetch("https://jacochef.ru/api/site/driver.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:_.stringify({type:"checkPosition",data:JSON.stringify(r)})}).then((function(e){return e.json()})).then((function(e){console.log("res1",e)})).catch((function(e){console.log(e)}))},a=function(e){var t=e.message;console.log(t)},navigator.geolocation.getCurrentPosition(o,a,{enableHighAccuracy:!0})),r={token:localStorage.getItem("token"),id:t,type:n},e.next=5,this.getData("actionOrder",r);case 5:0==(i=e.sent).st?this.setState({showErr:!0,textErr:i.text,is_load:!1}):(this.setState({is_open_order:!1,openOrder:null}),this.getOrders(!0,this.state.type.id));case 7:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"showOrder",value:function(e){this.setState({is_open_order:!0,openOrder:e})}},{key:"render",value:function(){var e=this;return m.createElement(m.Fragment,null,m.createElement(v.Z,{open:this.state.is_load},m.createElement(w.Z,{color:"inherit"})),m.createElement("div",{style:{position:"absolute",zIndex:10,display:"flex",flexDirection:"row",justifyContent:"space-between",width:"100%",left:0,top:100}},m.createElement(g.Z,{style:{marginLeft:38,color:1==this.state.type.id?"#2c75ff":"#000",fontWeight:"bold"},onClick:this.getOrders.bind(this,!0,1)},"Активные"),m.createElement(g.Z,{style:{color:2==this.state.type.id?"#2c75ff":"#000",fontWeight:"bold"},onClick:this.getOrders.bind(this,!0,2)},"Мои"),m.createElement(g.Z,{style:{color:5==this.state.type.id?"#2c75ff":"#000",fontWeight:"bold"},onClick:this.getOrders.bind(this,!0,5)},"У других"),m.createElement(g.Z,{style:{marginRight:3},onClick:this.getOrders.bind(this,!0,this.state.type.id)},m.createElement(x.Z,null))),m.createElement(m.Fragment,null,m.createElement(y.ZP,{anchor:"bottom",open:this.state.is_open,onClose:function(){e.setState({is_open:!1})}},this.state.types.map((function(t,n){return m.createElement(g.Z,{key:n,onClick:e.getOrders.bind(e,!0,t.id)},t.text)})))),m.createElement(m.Fragment,null,m.createElement(y.ZP,{anchor:"bottom",open:this.state.is_open_order,onClose:function(){e.setState({is_open_order:!1,openOrder:null})}},this.state.openOrder?m.createElement(Z.CardItemList,{item:this.state.openOrder,actionOrder:this.actionOrder.bind(this)}):null)),m.createElement(f.ZP,{style:{zIndex:9,margin:-16}},m.createElement("div",{id:"map",name:"map",style:{width:"100%",height:700,paddingTop:10}})))}}]),k}(m.Component);function D(){var e=(0,h.k6)();return m.createElement(O,{history:e})}},3543:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Price:()=>R});var o=n(5861),a=n(5671),r=n(3144),i=n(7326),s=n(136),l=n(6215),c=n(1120),d=n(4942),p=n(7757),u=n.n(p),m=n(7294),h=n(5977),f=n(225),g=n(4345),y=n(5725),v=n(821),w=n(9062),Z=n(2658),x=n(2230),E=n(4424),b=n(5344),k=n(6752),_=n(6447),S=n(8523);var C=n(7563),I=(0,g.Z)({palette:{primary:{main:"#c03"}}}),O=(0,f.Z)({formControl:{width:"100%"},selectEmpty:{marginTop:I.spacing(2)},tableCel:{textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},tableCelHead:{textAlign:"center",padding:15},customCel:{backgroundColor:"#bababa",textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},timePicker:{width:"100%"}}),D=function(e){(0,s.Z)(g,e);var t,n,p,h,f=(p=g,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(p);if(h){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,l.Z)(this,e)});function g(e){var t;return(0,a.Z)(this,g),t=f.call(this,e),(0,d.Z)((0,i.Z)(t),"getData",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("https://jacochef.ru/api/site/driver.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:C.stringify({type:e,data:JSON.stringify(t)})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,is_load:!1,date:new Date,allCount:0,bankCount:0,cashCount:0,bankSum:0,cashSum:0,myPrice:0,sdacha:0},t}return(0,r.Z)(g,[{key:"componentDidMount",value:(n=(0,o.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(window.location.protocol),"http:"!=window.location.protocol&&"http"!=window.location.protocol||"localhost"==window.location.hostname||(console.log("goTo","https://jacodriver.ru/"+window.location.pathname),window.location.href="https://jacodriver.ru/"+window.location.pathname),this.getPrice();case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"changeDate",value:function(e){var t=this;this.setState({date:e}),setTimeout((function(){t.getPrice()}),300)}},{key:"getPrice",value:(t=(0,o.Z)(u().mark((function e(){var t,n,o,a,r,i,s,l,c,d,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=new Date(this.state.date),c=l.getFullYear()+"-",c+=l.getMonth()+1+"-",c+=l.getDate(),d={token:localStorage.getItem("token"),date:c},e.next=7,this.getData("getMyPrice",d);case 7:p=e.sent,console.log("load res",p),this.setState({allCount:null!==(t=p.count)&&void 0!==t?t:0,bankCount:null!==(n=p.count_bank)&&void 0!==n?n:0,cashCount:null!==(o=p.count_cash)&&void 0!==o?o:0,bankSum:null!==(a=p.sum_bank)&&void 0!==a?a:0,cashSum:null!==(r=p.sum_cash)&&void 0!==r?r:0,myPrice:null!==(i=p.my_price)&&void 0!==i?i:0,sdacha:null!==(s=p.sdacha)&&void 0!==s?s:0});case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e,t=this;return m.createElement(m.Fragment,null,m.createElement(v.Z,{className:this.state.classes.backdrop,open:this.state.is_load},m.createElement(w.Z,{color:"inherit"})),m.createElement(y.ZP,{container:!0,spacing:3},m.createElement(y.ZP,{item:!0,xs:12,sm:3,style:{marginTop:10}},m.createElement(b.Z,{dateAdapter:E.Z,locale:S.Z},m.createElement(_.Z,{spacing:3},m.createElement(k.Z,(e={label:"Дата",allowSameDateSelection:!0,showTodayButton:!0,startText:this.props.startText,endText:this.props.endText,value:this.props.value,inputFormat:"yyyy-MM-dd"},(0,d.Z)(e,"value",this.state.date),(0,d.Z)(e,"onChange",(function(e){t.changeDate(e)})),(0,d.Z)(e,"renderInput",(function(e){return m.createElement(x.Z,e)})),e)))),m.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",paddingTop:10}},m.createElement(Z.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000",paddingRight:5},component:"span"},"Cумма нала:"),m.createElement(Z.Z,{style:{fontSize:20,color:"#000"},component:"span"},this.state.cashSum,"р.")),m.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},m.createElement(Z.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000",paddingRight:5},component:"span"},"Cумма безнала:"),m.createElement(Z.Z,{style:{fontSize:20,color:"#000"},component:"span"},this.state.bankSum,"р.")),m.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},m.createElement(Z.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000",paddingRight:5},component:"span"},"Заработал:"),m.createElement(Z.Z,{style:{fontSize:20,color:"#000"},component:"span"},this.state.myPrice,"р.")),m.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",paddingBottom:10}},m.createElement(Z.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000",paddingRight:5},component:"span"},"Сдача:"),m.createElement(Z.Z,{style:{fontSize:20,color:"#000"},component:"span"},this.state.sdacha,"р.")),m.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},m.createElement(Z.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000",paddingRight:5},component:"span"},"Количество по налу:"),m.createElement(Z.Z,{style:{fontSize:20,color:"#000"},component:"span"},this.state.cashCount)),m.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},m.createElement(Z.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000",paddingRight:5},component:"span"},"Количество по безналу:"),m.createElement(Z.Z,{style:{fontSize:20,color:"#000"},component:"span"},this.state.bankCount)),m.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},m.createElement(Z.Z,{style:{fontSize:20,fontWeight:"bold",color:"#000",paddingRight:5},component:"span"},"Завершенных заказов:"),m.createElement(Z.Z,{style:{fontSize:20,color:"#000"},component:"span"},this.state.allCount)))))}}]),g}(m.Component);function R(){var e=O(),t=(0,h.k6)();return m.createElement(D,{classes:e,history:t})}},9546:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Reg:()=>B});var o=n(5861),a=n(5671),r=n(3144),i=n(7326),s=n(136),l=n(6215),c=n(1120),d=n(4942),p=n(7757),u=n.n(p),m=n(7294),h=n(5977),f=n(7109),g=n(2230),y=n(5725),v=n(2642),w=n(225),Z=n(4345),x=n(4436),E=n(5272),b=n(5162),k=n(4666),_=n(8979),S=n(7750),C=n(6408),I=n(7645),O=n(821),D=n(9062);var R=n(7563),T=(0,Z.Z)({palette:{primary:{main:"#c03"}}}),P=(0,w.Z)({paper:{display:"flex",flexDirection:"column",alignItems:"center"},avatar:{borderRadius:0,width:"100%",height:150,margin:0,backgroundColor:"#fff"},avatar2:{borderRadius:0,width:"100%",height:130,margin:0,backgroundColor:"#fff"},form:{width:"100%",marginTop:T.spacing(1)},submit:{margin:T.spacing(3,0,2)},backButton:{marginRight:T.spacing(1)},instructions:{marginTop:T.spacing(1),marginBottom:T.spacing(1)},textLink:{color:"#c03"}}),N=function(e){(0,s.Z)(T,e);var t,n,p,h,w,Z=(h=T,w=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(h);if(w){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,l.Z)(this,e)});function T(e){var t;return(0,a.Z)(this,T),t=Z.call(this,e),(0,d.Z)((0,i.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/site/driver.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:R.stringify({type:e,data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){return setTimeout((function(){t.setState({is_load:!1})}),300),e})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"auth",module_name:"",is_load:!1,modalDialog:!1,dialogTitle:"",dialogText:"",activeStep:0,steps:["Телефон","Подтверждение"],phone:"",code:"",pwd:""},t}return(0,r.Z)(T,[{key:"componentDidMount",value:(p=(0,o.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(window.location.protocol),"http:"!=window.location.protocol&&"http"!=window.location.protocol||"localhost"==window.location.hostname||(console.log("goTo","https://jacodriver.ru/"+window.location.pathname),window.location.href="https://jacodriver.ru/"+window.location.pathname);case 2:case"end":return e.stop()}}),e)}))),function(){return p.apply(this,arguments)})},{key:"updateData",value:(n=(0,o.Z)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point_id:this.state.point,showReady:!0===this.state.showReady?1:0},e.next=3,this.getData("get_orders",t);case 3:n=e.sent,this.setState({read:n.read,onstol:n.onstol,ordersQueue:n.prestol_new});case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"nextStep",value:(t=(0,o.Z)(u().mark((function e(){var t,n,o,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=this.state.activeStep){e.next=8;break}return t={login:document.getElementById("phone").value,pwd:document.getElementById("password").value},e.next=4,this.getData("get_sms",t);case 4:0==(n=e.sent).st?this.setState({modalDialog:!0,dialogTitle:"Предупреждение",dialogText:n.text}):this.setState({activeStep:this.state.activeStep+1,phone:t.login,pwd:t.pwd}),e.next=14;break;case 8:if(1!=this.state.activeStep){e.next=14;break}return o={login:this.state.phone,pwd:this.state.pwd,code:document.getElementById("code").value},e.next=12,this.getData("send_code",o);case 12:0==(a=e.sent).st?this.setState({modalDialog:!0,dialogTitle:"Предупреждение",dialogText:a.text}):(localStorage.setItem("token",a.token),this.state.history.push("/list_orders"),location.reload());case 14:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"enterNextStep",value:function(e){13==e.charCode&&this.nextStep()}},{key:"render",value:function(){var e=this;return m.createElement(m.Fragment,null,m.createElement(O.Z,{className:this.state.classes.backdrop,open:this.state.is_load},m.createElement(D.Z,{color:"inherit"})),m.createElement(k.Z,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},m.createElement(I.Z,{id:"alert-dialog-title"},this.state.dialogTitle),m.createElement(S.Z,null,m.createElement(C.Z,{id:"alert-dialog-description"},this.state.dialogText)),m.createElement(_.Z,null,m.createElement(v.Z,{onClick:function(){e.setState({modalDialog:!1})},color:"primary",autoFocus:!0},"Хорошо"))),m.createElement(y.ZP,{container:!0,spacing:3,direction:"row",justifyContent:"center",alignItems:"center"},m.createElement(y.ZP,{item:!0,xs:12,sm:6,md:6,lg:4,xl:3},m.createElement("div",{className:this.state.classes.paper},m.createElement(f.Z,{className:this.state.classes.avatar,style:{marginBottom:10}},m.createElement("img",{alt:"Жако доставка роллов и пиццы",src:"../assets/img_other/Favikon.png",style:{height:"100%"}})),m.createElement(x.Z,{activeStep:this.state.activeStep,alternativeLabel:!0,style:{width:"100%"}},this.state.steps.map((function(e){return m.createElement(E.Z,{key:e},m.createElement(b.Z,null,e))}))),m.createElement("div",{className:this.state.classes.form,style:{width:"100%"}},0==this.state.activeStep?m.createElement(m.Fragment,null,m.createElement(g.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,id:"phone",label:"Номер телефона",name:"phone",autoComplete:"phone",autoFocus:!0}),m.createElement(g.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,name:"password",label:"Новый пароль",type:"password",id:"password",autoComplete:"current-password"})):null,1==this.state.activeStep?m.createElement(g.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,id:"code",label:"Код из смс",name:"code",autoComplete:"code",autoFocus:!0}):null,2==this.state.activeStep?m.createElement(g.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,name:"password",label:"Пароль",type:"password",id:"password",autoComplete:"current-password",onKeyPress:this.enterNextStep.bind(this)}):null,m.createElement(v.Z,{fullWidth:!0,variant:"contained",color:"primary",className:this.state.classes.submit,onClick:this.nextStep.bind(this)},"Дальше"),m.createElement(y.ZP,{container:!0,style:{marginTop:10}},m.createElement(y.ZP,{item:!0,xs:!0},m.createElement("a",{href:"/auth",className:this.state.classes.textLink},"Вернуться к авторизации"))))))))}}]),T}(m.Component);function B(){var e=P(),t=(0,h.k6)();return m.createElement(N,{classes:e,history:t})}},5798:(e,t,n)=>{"use strict";var o=n(7294),a=n(3935),r=n(3727),i=n(5861),s=n(5671),l=n(3144),c=n(7326),d=n(136),p=n(6215),u=n(1120),m=n(4942),h=n(7757),f=n.n(h),g=n(6010),y=n(225),v=n(6720),w=n(3720),Z=n(4386),x=n(2440),E=n(799),b=n(8584),k=n(2658),_=n(6867),S=n(4065),C=n(5725),I=n(326),O=n(4345),D=n(1807),R=n(5977),T=n(6655),P=n(5152),N=n.n(P);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var j=n(7563),W=(0,O.Z)({palette:{primary:{main:"#c03"},def:{main:"#353b48",secondary:"#fff"}}}),z=(0,y.Z)({root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},W.mixins.toolbar),appBar:{zIndex:W.zIndex.drawer+1,transition:W.transitions.create(["width","margin"],{easing:W.transitions.easing.sharp,duration:W.transitions.duration.leavingScreen})},appBarShift:{marginLeft:300,width:"calc(100% - ".concat(300,"px)"),transition:W.transitions.create(["width","margin"],{easing:W.transitions.easing.sharp,duration:W.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:300,transition:W.transitions.create("width",{easing:W.transitions.easing.sharp,duration:W.transitions.duration.enteringScreen})},drawerPaperClose:(0,m.Z)({overflowX:"hidden",transition:W.transitions.create("width",{easing:W.transitions.easing.sharp,duration:W.transitions.duration.leavingScreen}),width:W.spacing(7)},W.breakpoints.up("sm"),{width:W.spacing(9)}),appBarSpacer:W.mixins.toolbar,content:{flexGrow:1,overflow:"auto"},container:{paddingTop:W.spacing(1),paddingBottom:W.spacing(4),width:"100%"},paper:{padding:W.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},heading:{fontSize:W.typography.pxToRem(15),fontWeight:W.typography.fontWeightRegular}}),A=function(e){(0,d.Z)(y,e);var t,n,a,h=(n=y,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(a){var o=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return(0,p.Z)(this,e)});function y(e){var t;return(0,s.Z)(this,y),t=h.call(this,e),(0,m.Z)((0,c.Z)(t),"getData",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("https://jacochef.ru/api/site/driver.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:j.stringify({type:e,data:JSON.stringify(t)})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"header",title:"",open:!1,menu:[],full_menu:[],left:!1,phone_man:"",phone_center:"",phone_dir:""},t}return(0,l.Z)(y,[{key:"componentDidMount",value:(t=(0,i.Z)(f().mark((function e(){var t,n,o,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(window.location.protocol),"http:"!=window.location.protocol&&"http"!=window.location.protocol||"localhost"==window.location.hostname||(console.log("goTo","https://jacodriver.ru/"+window.location.pathname),window.location.href="https://jacodriver.ru/"+window.location.pathname),t=window.location.pathname,e.next=8;break;case 8:return n=N().find((function(e){return t.includes(e.path)})),this.setState({title:n.title}),window.document.title=n.title,o={token:localStorage.getItem("token")},e.next=14,this.getData("getPointInfo",o);case 14:a=e.sent,console.log(a),a&&this.setState({phone_man:a.phone_man,phone_center:a.phone_new,phone_dir:a.phone_upr});case 17:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"handleDrawerOpen",value:function(){this.setState({open:!0})}},{key:"handleDrawerClose",value:function(){this.setState({open:!1})}},{key:"logOut",value:function(){localStorage.removeItem("token"),this.state.history.push("/auth"),location.reload()}},{key:"goTo",value:function(e){this.setState({title:e}),window.document.title=e}},{key:"render",value:function(){var e=this;return o.createElement(o.Fragment,null,o.createElement(w.Z,{className:(0,g.Z)(this.state.classes.appBar,this.state.open&&this.state.classes.appBarShift)},o.createElement(Z.Z,{className:this.state.classes.toolbar},o.createElement(_.Z,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:this.handleDrawerOpen.bind(this),className:(0,g.Z)(this.state.classes.menuButton,this.state.open&&this.state.classes.menuButtonHidden)},o.createElement(I.Z,null)),o.createElement(k.Z,{component:"h1",variant:"h6",id:"GlobalHeader",color:"inherit",noWrap:!0,className:this.state.classes.title},this.state.title))),o.createElement(o.Fragment,null,o.createElement(T.Z,{anchor:"left",open:this.state.open,onClose:function(){e.setState({open:!1})},onOpen:function(){e.setState({open:!0})}},o.createElement(x.Z,{style:{width:"100%"}},o.createElement(E.ZP,{button:!0,onClick:this.goTo.bind(this,"Список заказов")},o.createElement(r.OL,{to:"/list_orders"},o.createElement(b.Z,{primary:"Список заказов"}))),o.createElement(E.ZP,{button:!0,onClick:this.goTo.bind(this,"Карта заказов")},o.createElement(r.OL,{to:"/map_orders"},o.createElement(b.Z,{primary:"Карта заказов"}))),o.createElement(E.ZP,{button:!0,onClick:this.goTo.bind(this,"Расчет")},o.createElement(r.OL,{to:"/price"},o.createElement(b.Z,{primary:"Расчет"}))),o.createElement(E.ZP,{button:!0,onClick:this.goTo.bind(this,"График работы")},o.createElement(r.OL,{to:"/graph"},o.createElement(b.Z,{primary:"График работы"}))),o.createElement(E.ZP,{button:!0},o.createElement("a",{href:"tel:"+this.state.phone_dir},o.createElement(b.Z,{primary:"Директор"}))),o.createElement(E.ZP,{button:!0},o.createElement("a",{href:"tel:"+this.state.phone_man},o.createElement(b.Z,{primary:"Менеджер"}))),o.createElement(E.ZP,{button:!0},o.createElement("a",{href:"tel:"+this.state.phone_center},o.createElement(b.Z,{primary:"Контакт-центр"}))),o.createElement(E.ZP,{button:!0,onClick:this.logOut.bind(this)},o.createElement(b.Z,{primary:"Выйти"}))))))}}]),y}(o.Component);function F(e){var t=e.code,n=e.children;return o.createElement(R.AW,{render:function(e){var o=e.staticContext;return o&&(o.status=t),n}})}function M(){var e=z(),t=(0,R.k6)(),n=!0;return"/auth/"!=t.location.pathname&&"/auth"!=t.location.pathname&&"/registration/"!=t.location.pathname&&"/registration"!=t.location.pathname||(n=!1),o.createElement(D.Z,{theme:W},o.createElement("div",{className:e.root},n?o.createElement(o.Fragment,null,o.createElement(v.ZP,null),o.createElement(A,{classes:e,history:t})):null,o.createElement("main",{className:e.content},o.createElement("div",{className:e.appBarSpacer}),o.createElement(S.Z,{maxWidth:!1,className:e.container},o.createElement(R.rs,null,N().map((function(e,t){return o.createElement(R.AW,{key:t,path:e.path,exact:e.exact,component:e.component})})),o.createElement(R.AW,{component:function(){return o.createElement(F,{code:404},o.createElement(C.ZP,{container:!0,className:"Contact mainContainer MuiGrid-spacing-xs-3",style:{marginTop:64}},o.createElement(C.ZP,{item:!0,xs:12},o.createElement(k.Z,{variant:"h5",component:"h1"},"404 Страница не найдена"))))}}))))))}a.render(o.createElement(r.VK,null,o.createElement(M,null)),document.getElementById("app"))}},e=>{e.O(0,[216],(()=>(5798,e(e.s=5798)))),e.O()}]);
//# sourceMappingURL=main.5d234befef787cb15f21.js.map